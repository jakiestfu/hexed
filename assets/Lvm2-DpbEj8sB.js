import{k as w}from"./index-LM5QM2-c.js";var z=Object.getOwnPropertyNames,D=(_,h)=>function(){return h||(0,_[z(_)[0]])((h={exports:{}}).exports,h),h.exports},L=D({"<stdin>"(_){(function(h,i){typeof define=="function"&&define.amd?define(["exports","kaitai-struct/KaitaiStream"],i):typeof _=="object"&&_!==null&&typeof _.nodeType!="number"?i(_,w.KaitaiStream):i(h.Lvm2||(h.Lvm2={}),h.KaitaiStream)})(typeof self<"u"?self:_,function(h,i){var v=(function(){function l(u,b,n){this._io=u,this._parent=b,this._root=n||this,this._debug={},this._read()}l.prototype._read=function(){this._debug.pv={start:this._io.pos,ioOffset:this._io.byteOffset},this.pv=new O(this._io,this,this._root),this._debug.pv.end=this._io.pos};var O=l.PhysicalVolume=(function(){function u(n,y,m){this._io=n,this._parent=y,this._root=m,this._debug={},this._read()}u.prototype._read=function(){this._debug.emptySector={start:this._io.pos,ioOffset:this._io.byteOffset},this.emptySector=this._io.readBytes(this._root.sectorSize),this._debug.emptySector.end=this._io.pos,this._debug.label={start:this._io.pos,ioOffset:this._io.byteOffset},this.label=new b(this._io,this,this._root),this._debug.label.end=this._io.pos};var b=u.Label=(function(){function n(s,o,d){this._io=s,this._parent=o,this._root=d,this._debug={},this._read()}n.prototype._read=function(){this._debug.labelHeader={start:this._io.pos,ioOffset:this._io.byteOffset},this.labelHeader=new y(this._io,this,this._root),this._debug.labelHeader.end=this._io.pos,this._debug.volumeHeader={start:this._io.pos,ioOffset:this._io.byteOffset},this.volumeHeader=new m(this._io,this,this._root),this._debug.volumeHeader.end=this._io.pos};var y=n.LabelHeader=(function(){function s(o,d,c){this._io=o,this._parent=d,this._root=c,this._debug={},this._read()}s.prototype._read=function(){if(this._debug.signature={start:this._io.pos,ioOffset:this._io.byteOffset},this.signature=this._io.readBytes(8),this._debug.signature.end=this._io.pos,i.byteArrayCompare(this.signature,new Uint8Array([76,65,66,69,76,79,78,69]))!=0){var o=new i.ValidationNotEqualError(new Uint8Array([76,65,66,69,76,79,78,69]),this.signature,this._io,"/types/physical_volume/types/label/types/label_header/seq/0");throw this._debug.signature.validationError=o,o}this._debug.sectorNumber={start:this._io.pos,ioOffset:this._io.byteOffset},this.sectorNumber=this._io.readU8le(),this._debug.sectorNumber.end=this._io.pos,this._debug.checksum={start:this._io.pos,ioOffset:this._io.byteOffset},this.checksum=this._io.readU4le(),this._debug.checksum.end=this._io.pos,this._debug.labelHeader={start:this._io.pos,ioOffset:this._io.byteOffset},this.labelHeader=new s(this._io,this,this._root),this._debug.labelHeader.end=this._io.pos};var s=s.LabelHeader=(function(){function o(d,c,t){this._io=d,this._parent=c,this._root=t,this._debug={},this._read()}return o.prototype._read=function(){if(this._debug.dataOffset={start:this._io.pos,ioOffset:this._io.byteOffset},this.dataOffset=this._io.readU4le(),this._debug.dataOffset.end=this._io.pos,this._debug.typeIndicator={start:this._io.pos,ioOffset:this._io.byteOffset},this.typeIndicator=this._io.readBytes(8),this._debug.typeIndicator.end=this._io.pos,i.byteArrayCompare(this.typeIndicator,new Uint8Array([76,86,77,50,32,48,48,49]))!=0){var d=new i.ValidationNotEqualError(new Uint8Array([76,86,77,50,32,48,48,49]),this.typeIndicator,this._io,"/types/physical_volume/types/label/types/label_header/types/label_header_/seq/1");throw this._debug.typeIndicator.validationError=d,d}},o})();return s})(),m=n.VolumeHeader=(function(){function s(t,r,e){this._io=t,this._parent=r,this._root=e,this._debug={},this._read()}s.prototype._read=function(){this._debug.id={start:this._io.pos,ioOffset:this._io.byteOffset},this.id=i.bytesToStr(this._io.readBytes(32),"ASCII"),this._debug.id.end=this._io.pos,this._debug.size={start:this._io.pos,ioOffset:this._io.byteOffset},this.size=this._io.readU8le(),this._debug.size.end=this._io.pos,this._debug.dataAreaDescriptors={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.dataAreaDescriptors.arr=[],this.dataAreaDescriptors=[];do{this._debug.dataAreaDescriptors.arr[this.dataAreaDescriptors.length]={start:this._io.pos,ioOffset:this._io.byteOffset};var t=new o(this._io,this,this._root);this.dataAreaDescriptors.push(t),this._debug.dataAreaDescriptors.arr[this.dataAreaDescriptors.length-1].end=this._io.pos}while(!(t.size!=0&&t.offset!=0));this._debug.dataAreaDescriptors.end=this._io.pos,this._debug.metadataAreaDescriptors={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.metadataAreaDescriptors.arr=[],this.metadataAreaDescriptors=[];do{this._debug.metadataAreaDescriptors.arr[this.metadataAreaDescriptors.length]={start:this._io.pos,ioOffset:this._io.byteOffset};var t=new c(this._io,this,this._root);this.metadataAreaDescriptors.push(t),this._debug.metadataAreaDescriptors.arr[this.metadataAreaDescriptors.length-1].end=this._io.pos}while(!(t.size!=0&&t.offset!=0));this._debug.metadataAreaDescriptors.end=this._io.pos};var o=s.DataAreaDescriptor=(function(){function t(r,e,p){this._io=r,this._parent=e,this._root=p,this._debug={},this._read()}return t.prototype._read=function(){this._debug.offset={start:this._io.pos,ioOffset:this._io.byteOffset},this.offset=this._io.readU8le(),this._debug.offset.end=this._io.pos,this._debug.size={start:this._io.pos,ioOffset:this._io.byteOffset},this.size=this._io.readU8le(),this._debug.size.end=this._io.pos},Object.defineProperty(t.prototype,"data",{get:function(){if(this._m_data!==void 0)return this._m_data;if(this.size!=0){var r=this._io.pos;this._io.seek(this.offset),this._debug._m_data={start:this._io.pos,ioOffset:this._io.byteOffset},this._m_data=i.bytesToStr(this._io.readBytes(this.size),"ASCII"),this._debug._m_data.end=this._io.pos,this._io.seek(r)}return this._m_data}}),t})(),d=s.MetadataArea=(function(){function t(e,p,a){this._io=e,this._parent=p,this._root=a,this._debug={},this._read()}t.prototype._read=function(){this._debug.header={start:this._io.pos,ioOffset:this._io.byteOffset},this.header=new r(this._io,this,this._root),this._debug.header.end=this._io.pos};var r=t.MetadataAreaHeader=(function(){function e(a,f,g){this._io=a,this._parent=f,this._root=g,this._debug={},this._read()}e.prototype._read=function(){if(this._debug.checksum={start:this._io.pos,ioOffset:this._io.byteOffset},this.checksum=new e(this._io,this,this._root),this._debug.checksum.end=this._io.pos,this._debug.signature={start:this._io.pos,ioOffset:this._io.byteOffset},this.signature=this._io.readBytes(16),this._debug.signature.end=this._io.pos,i.byteArrayCompare(this.signature,new Uint8Array([32,76,86,77,50,32,120,91,53,65,37,114,48,78,42,62]))!=0){var a=new i.ValidationNotEqualError(new Uint8Array([32,76,86,77,50,32,120,91,53,65,37,114,48,78,42,62]),this.signature,this._io,"/types/physical_volume/types/label/types/volume_header/types/metadata_area/types/metadata_area_header/seq/1");throw this._debug.signature.validationError=a,a}this._debug.version={start:this._io.pos,ioOffset:this._io.byteOffset},this.version=this._io.readU4le(),this._debug.version.end=this._io.pos,this._debug.metadataAreaOffset={start:this._io.pos,ioOffset:this._io.byteOffset},this.metadataAreaOffset=this._io.readU8le(),this._debug.metadataAreaOffset.end=this._io.pos,this._debug.metadataAreaSize={start:this._io.pos,ioOffset:this._io.byteOffset},this.metadataAreaSize=this._io.readU8le(),this._debug.metadataAreaSize.end=this._io.pos,this._debug.rawLocationDescriptors={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.rawLocationDescriptors.arr=[],this.rawLocationDescriptors=[];do{this._debug.rawLocationDescriptors.arr[this.rawLocationDescriptors.length]={start:this._io.pos,ioOffset:this._io.byteOffset};var f=new p(this._io,this,this._root);this.rawLocationDescriptors.push(f),this._debug.rawLocationDescriptors.arr[this.rawLocationDescriptors.length-1].end=this._io.pos}while(!(f.offset!=0&&f.size!=0&&f.checksum!=0));this._debug.rawLocationDescriptors.end=this._io.pos};var p=e.RawLocationDescriptor=(function(){a.RawLocationDescriptorFlags=Object.freeze({RAW_LOCATION_IGNORED:1,1:"RAW_LOCATION_IGNORED"});function a(f,g,A){this._io=f,this._parent=g,this._root=A,this._debug={},this._read()}return a.prototype._read=function(){this._debug.offset={start:this._io.pos,ioOffset:this._io.byteOffset},this.offset=this._io.readU8le(),this._debug.offset.end=this._io.pos,this._debug.size={start:this._io.pos,ioOffset:this._io.byteOffset},this.size=this._io.readU8le(),this._debug.size.end=this._io.pos,this._debug.checksum={start:this._io.pos,ioOffset:this._io.byteOffset},this.checksum=this._io.readU4le(),this._debug.checksum.end=this._io.pos,this._debug.flags={start:this._io.pos,ioOffset:this._io.byteOffset,enumName:"Lvm2.PhysicalVolume.Label.VolumeHeader.MetadataArea.MetadataAreaHeader.RawLocationDescriptor.RawLocationDescriptorFlags"},this.flags=this._io.readU4le(),this._debug.flags.end=this._io.pos},a})();return Object.defineProperty(e.prototype,"metadata",{get:function(){if(this._m_metadata!==void 0)return this._m_metadata;var a=this._io.pos;return this._io.seek(this.metadataAreaOffset),this._debug._m_metadata={start:this._io.pos,ioOffset:this._io.byteOffset},this._m_metadata=this._io.readBytes(this.metadataAreaSize),this._debug._m_metadata.end=this._io.pos,this._io.seek(a),this._m_metadata}}),e})();return t})(),c=s.MetadataAreaDescriptor=(function(){function t(r,e,p){this._io=r,this._parent=e,this._root=p,this._debug={},this._read()}return t.prototype._read=function(){this._debug.offset={start:this._io.pos,ioOffset:this._io.byteOffset},this.offset=this._io.readU8le(),this._debug.offset.end=this._io.pos,this._debug.size={start:this._io.pos,ioOffset:this._io.byteOffset},this.size=this._io.readU8le(),this._debug.size.end=this._io.pos},Object.defineProperty(t.prototype,"data",{get:function(){if(this._m_data!==void 0)return this._m_data;if(this.size!=0){var r=this._io.pos;this._io.seek(this.offset),this._debug._m_data={start:this._io.pos,ioOffset:this._io.byteOffset},this._raw__m_data=this._io.readBytes(this.size);var e=new i(this._raw__m_data);this._m_data=new d(e,this,this._root),this._debug._m_data.end=this._io.pos,this._io.seek(r)}return this._m_data}}),t})();return s})();return n})();return u})();return Object.defineProperty(l.prototype,"sectorSize",{get:function(){return this._m_sectorSize!==void 0?this._m_sectorSize:(this._debug._m_sectorSize={},this._m_sectorSize=512,this._m_sectorSize)}}),l})();h.Lvm2=v})}});const H=L(),U={id:"lvm2",title:"Logical Volume Manager version 2",ksy:{meta:{id:"lvm2",title:"Logical Volume Manager version 2",application:["linux","grub2","lvm tools","libvslvm"],xref:{forensicswiki:"linux_logical_volume_manager_(lvm)",wikidata:"Q6667482"},tags:["filesystem","linux"],license:"GFDL-1.3-or-later",encoding:"ascii",endian:"le"},doc:`### Building a test file

\`\`\`
dd if=/dev/zero of=image.img bs=512 count=$(( 4 * 1024 * 2 ))
sudo losetup /dev/loop1 image.img
sudo pvcreate /dev/loop1
sudo vgcreate vg_test /dev/loop1
sudo lvcreate --name lv_test1 vg_test
sudo losetup -d /dev/loop1
\`\`\`
`,"doc-ref":"https://github.com/libyal/libvslvm/blob/main/documentation/Logical%20Volume%20Manager%20(LVM)%20format.asciidoc",seq:[{id:"pv",type:"physical_volume",doc:"Physical volume"}],instances:{sector_size:{value:512}},types:{physical_volume:{seq:[{id:"empty_sector",size:"_root.sector_size"},{id:"label",type:"label"}],types:{label:{seq:[{id:"label_header",type:"label_header"},{id:"volume_header",type:"volume_header"}],types:{label_header:{seq:[{id:"signature",contents:"LABELONE"},{id:"sector_number",type:"u8",doc:"The sector number of the physical volume label header"},{id:"checksum",type:"u4",doc:"CRC-32 for offset 20 to end of the physical volume label sector"},{id:"label_header_",type:"label_header_"}],types:{label_header_:{seq:[{id:"data_offset",type:"u4",doc:"The offset, in bytes, relative from the start of the physical volume label header where data is stored"},{id:"type_indicator",contents:"LVM2 001"}]}}},volume_header:{seq:[{id:"id",type:"str",size:32,doc:`Contains a UUID stored as an ASCII string. The physical volume identifier can be used to uniquely identify a physical volume. The physical volume identifier is stored as: 9LBcEB7PQTGIlLI0KxrtzrynjuSL983W but is equivalent to its formatted variant: 9LBcEB-7PQT-GIlL-I0Kx-rtzr-ynju-SL983W, which is used in the metadata.
`},{id:"size",type:"u8",doc:"Physical Volume size. Value in bytes"},{id:"data_area_descriptors",type:"data_area_descriptor",repeat:"until","repeat-until":"_.size != 0 and _.offset != 0",doc:"The last descriptor in the list is terminator and consists of 0-byte values."},{id:"metadata_area_descriptors",type:"metadata_area_descriptor",repeat:"until","repeat-until":"_.size != 0 and _.offset != 0"}],types:{data_area_descriptor:{seq:[{id:"offset",type:"u8",doc:"The offset, in bytes, relative from the start of the physical volume"},{id:"size",type:"u8",doc:`Value in bytes. Can be 0. [yellow-background]*Does this represent all remaining available space?*
`}],instances:{data:{pos:"offset",size:"size",type:"str",if:"size != 0"}}},metadata_area_descriptor:{seq:[{id:"offset",type:"u8",doc:"The offset, in bytes, relative from the start of the physical volume"},{id:"size",type:"u8",doc:"Value in bytes"}],instances:{data:{pos:"offset",size:"size",type:"metadata_area",if:"size != 0"}}},metadata_area:{doc:"According to `[REDHAT]` the metadata area is a circular buffer. New metadata is appended to the old metadata and then the pointer to the start of it is updated. The metadata area, therefore, can contain copies of older versions of the metadata.",seq:[{id:"header",type:"metadata_area_header"}],types:{metadata_area_header:{seq:[{id:"checksum",type:"metadata_area_header",doc:"CRC-32 for offset 4 to end of the metadata area header"},{id:"signature",contents:" LVM2 x[5A%r0N*>"},{id:"version",type:"u4"},{id:"metadata_area_offset",type:"u8",doc:"The offset, in bytes, of the metadata area relative from the start of the physical volume"},{id:"metadata_area_size",type:"u8"},{id:"raw_location_descriptors",type:"raw_location_descriptor",doc:"The last descriptor in the list is terminator and consists of 0-byte values.",repeat:"until","repeat-until":"_.offset != 0 and _.size != 0 and _.checksum != 0"}],instances:{metadata:{pos:"metadata_area_offset",size:"metadata_area_size"}},types:{raw_location_descriptor:{"-orig-id":"raw_locn",doc:"The data area size can be 0. It is assumed it represents the remaining  available data.",seq:[{id:"offset",type:"u8",doc:"The data area offset, in bytes, relative from the start of the metadata area"},{id:"size",type:"u8",doc:"data area size in bytes"},{id:"checksum",type:"u4",doc:"CRC-32 of *TODO (metadata?)*"},{id:"flags",type:"u4",enum:"raw_location_descriptor_flags"}],enums:{raw_location_descriptor_flags:{1:"raw_location_ignored"}}}}}}}}}}}}}}}};export{H as default,U as spec};
