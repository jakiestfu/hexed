import{k as O}from"./index-C9sUxlHS.js";var w=Object.getOwnPropertyNames,v=(_,r)=>function(){return r||(0,_[w(_)[0]])((r={exports:{}}).exports,r),r.exports},D=v({"<stdin>"(_){(function(r,o){typeof define=="function"&&define.amd?define(["exports","kaitai-struct/KaitaiStream"],o):typeof _=="object"&&_!==null&&typeof _.nodeType!="number"?o(_,O.KaitaiStream):o(r.AllegroDat||(r.AllegroDat={}),r.KaitaiStream)})(typeof self<"u"?self:_,function(r,o){var p=(function(){h.PackEnum=Object.freeze({UNPACKED:1936484398,1936484398:"UNPACKED"});function h(i,t,e){this._io=i,this._parent=t,this._root=e||this,this._debug={},this._read()}h.prototype._read=function(){if(this._debug.packMagic={start:this._io.pos,ioOffset:this._io.byteOffset,enumName:"AllegroDat.PackEnum"},this.packMagic=this._io.readU4be(),this._debug.packMagic.end=this._io.pos,this._debug.datMagic={start:this._io.pos,ioOffset:this._io.byteOffset},this.datMagic=this._io.readBytes(4),this._debug.datMagic.end=this._io.pos,o.byteArrayCompare(this.datMagic,new Uint8Array([65,76,76,46]))!=0){var i=new o.ValidationNotEqualError(new Uint8Array([65,76,76,46]),this.datMagic,this._io,"/seq/1");throw this._debug.datMagic.validationError=i,i}this._debug.numObjects={start:this._io.pos,ioOffset:this._io.byteOffset},this.numObjects=this._io.readU4be(),this._debug.numObjects.end=this._io.pos,this._debug.objects={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.objects.arr=[],this.objects=[];for(var t=0;t<this.numObjects;t++)this._debug.objects.arr[t]={start:this._io.pos,ioOffset:this._io.byteOffset},this.objects.push(new y(this._io,this,this._root)),this._debug.objects.arr[t].end=this._io.pos;this._debug.objects.end=this._io.pos};var f=h.DatBitmap=(function(){function i(t,e,s){this._io=t,this._parent=e,this._root=s,this._debug={},this._read()}return i.prototype._read=function(){this._debug.bitsPerPixel={start:this._io.pos,ioOffset:this._io.byteOffset},this.bitsPerPixel=this._io.readS2be(),this._debug.bitsPerPixel.end=this._io.pos,this._debug.width={start:this._io.pos,ioOffset:this._io.byteOffset},this.width=this._io.readU2be(),this._debug.width.end=this._io.pos,this._debug.height={start:this._io.pos,ioOffset:this._io.byteOffset},this.height=this._io.readU2be(),this._debug.height.end=this._io.pos,this._debug.image={start:this._io.pos,ioOffset:this._io.byteOffset},this.image=this._io.readBytesFull(),this._debug.image.end=this._io.pos},i})(),b=h.DatFont=(function(){function i(t,e,s){this._io=t,this._parent=e,this._root=s,this._debug={},this._read()}return i.prototype._read=function(){switch(this._debug.fontSize={start:this._io.pos,ioOffset:this._io.byteOffset},this.fontSize=this._io.readS2be(),this._debug.fontSize.end=this._io.pos,this._debug.body={start:this._io.pos,ioOffset:this._io.byteOffset},this.fontSize){case 0:this.body=new g(this._io,this,this._root);break;case 16:this.body=new u(this._io,this,this._root);break;case 8:this.body=new c(this._io,this,this._root);break}this._debug.body.end=this._io.pos},i})(),u=h.DatFont16=(function(){function i(t,e,s){this._io=t,this._parent=e,this._root=s,this._debug={},this._read()}return i.prototype._read=function(){this._debug.chars={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.chars.arr=[],this.chars=[];for(var t=0;t<95;t++)this._debug.chars.arr[t]={start:this._io.pos,ioOffset:this._io.byteOffset},this.chars.push(this._io.readBytes(16)),this._debug.chars.arr[t].end=this._io.pos;this._debug.chars.end=this._io.pos},i})(),g=h.DatFont39=(function(){function i(s,a,d){this._io=s,this._parent=a,this._root=d,this._debug={},this._read()}i.prototype._read=function(){this._debug.numRanges={start:this._io.pos,ioOffset:this._io.byteOffset},this.numRanges=this._io.readS2be(),this._debug.numRanges.end=this._io.pos,this._debug.ranges={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.ranges.arr=[],this.ranges=[];for(var s=0;s<this.numRanges;s++)this._debug.ranges.arr[s]={start:this._io.pos,ioOffset:this._io.byteOffset},this.ranges.push(new e(this._io,this,this._root)),this._debug.ranges.arr[s].end=this._io.pos;this._debug.ranges.end=this._io.pos};var t=i.FontChar=(function(){function s(a,d,n){this._io=a,this._parent=d,this._root=n,this._debug={},this._read()}return s.prototype._read=function(){this._debug.width={start:this._io.pos,ioOffset:this._io.byteOffset},this.width=this._io.readU2be(),this._debug.width.end=this._io.pos,this._debug.height={start:this._io.pos,ioOffset:this._io.byteOffset},this.height=this._io.readU2be(),this._debug.height.end=this._io.pos,this._debug.body={start:this._io.pos,ioOffset:this._io.byteOffset},this.body=this._io.readBytes(this.width*this.height),this._debug.body.end=this._io.pos},s})(),e=i.Range=(function(){function s(a,d,n){this._io=a,this._parent=d,this._root=n,this._debug={},this._read()}return s.prototype._read=function(){this._debug.mono={start:this._io.pos,ioOffset:this._io.byteOffset},this.mono=this._io.readU1(),this._debug.mono.end=this._io.pos,this._debug.startChar={start:this._io.pos,ioOffset:this._io.byteOffset},this.startChar=this._io.readU4be(),this._debug.startChar.end=this._io.pos,this._debug.endChar={start:this._io.pos,ioOffset:this._io.byteOffset},this.endChar=this._io.readU4be(),this._debug.endChar.end=this._io.pos,this._debug.chars={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.chars.arr=[],this.chars=[];for(var a=0;a<this.endChar-this.startChar+1;a++)this._debug.chars.arr[a]={start:this._io.pos,ioOffset:this._io.byteOffset},this.chars.push(new t(this._io,this,this._root)),this._debug.chars.arr[a].end=this._io.pos;this._debug.chars.end=this._io.pos},s})();return i})(),c=h.DatFont8=(function(){function i(t,e,s){this._io=t,this._parent=e,this._root=s,this._debug={},this._read()}return i.prototype._read=function(){this._debug.chars={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.chars.arr=[],this.chars=[];for(var t=0;t<95;t++)this._debug.chars.arr[t]={start:this._io.pos,ioOffset:this._io.byteOffset},this.chars.push(this._io.readBytes(8)),this._debug.chars.arr[t].end=this._io.pos;this._debug.chars.end=this._io.pos},i})(),y=h.DatObject=(function(){function i(t,e,s){this._io=t,this._parent=e,this._root=s,this._debug={},this._read()}return i.prototype._read=function(){this._debug.properties={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.properties.arr=[],this.properties=[];do{this._debug.properties.arr[this.properties.length]={start:this._io.pos,ioOffset:this._io.byteOffset};var t=new m(this._io,this,this._root);this.properties.push(t),this._debug.properties.arr[this.properties.length-1].end=this._io.pos}while(t.isValid);switch(this._debug.properties.end=this._io.pos,this._debug.lenCompressed={start:this._io.pos,ioOffset:this._io.byteOffset},this.lenCompressed=this._io.readS4be(),this._debug.lenCompressed.end=this._io.pos,this._debug.lenUncompressed={start:this._io.pos,ioOffset:this._io.byteOffset},this.lenUncompressed=this._io.readS4be(),this._debug.lenUncompressed.end=this._io.pos,this._debug.body={start:this._io.pos,ioOffset:this._io.byteOffset},this.type){case"BMP ":this._raw_body=this._io.readBytes(this.lenCompressed);var e=new o(this._raw_body);this.body=new f(e,this,this._root);break;case"FONT":this._raw_body=this._io.readBytes(this.lenCompressed);var e=new o(this._raw_body);this.body=new b(e,this,this._root);break;case"RLE ":this._raw_body=this._io.readBytes(this.lenCompressed);var e=new o(this._raw_body);this.body=new l(e,this,this._root);break;default:this.body=this._io.readBytes(this.lenCompressed);break}this._debug.body.end=this._io.pos},Object.defineProperty(i.prototype,"type",{get:function(){return this._m_type!==void 0?this._m_type:(this._debug._m_type={},this._m_type=this.properties[this.properties.length-1].magic,this._m_type)}}),i})(),l=h.DatRleSprite=(function(){function i(t,e,s){this._io=t,this._parent=e,this._root=s,this._debug={},this._read()}return i.prototype._read=function(){this._debug.bitsPerPixel={start:this._io.pos,ioOffset:this._io.byteOffset},this.bitsPerPixel=this._io.readS2be(),this._debug.bitsPerPixel.end=this._io.pos,this._debug.width={start:this._io.pos,ioOffset:this._io.byteOffset},this.width=this._io.readU2be(),this._debug.width.end=this._io.pos,this._debug.height={start:this._io.pos,ioOffset:this._io.byteOffset},this.height=this._io.readU2be(),this._debug.height.end=this._io.pos,this._debug.lenImage={start:this._io.pos,ioOffset:this._io.byteOffset},this.lenImage=this._io.readU4be(),this._debug.lenImage.end=this._io.pos,this._debug.image={start:this._io.pos,ioOffset:this._io.byteOffset},this.image=this._io.readBytesFull(),this._debug.image.end=this._io.pos},i})(),m=h.Property=(function(){function i(t,e,s){this._io=t,this._parent=e,this._root=s,this._debug={},this._read()}return i.prototype._read=function(){this._debug.magic={start:this._io.pos,ioOffset:this._io.byteOffset},this.magic=o.bytesToStr(this._io.readBytes(4),"UTF-8"),this._debug.magic.end=this._io.pos,this.isValid&&(this._debug.type={start:this._io.pos,ioOffset:this._io.byteOffset},this.type=o.bytesToStr(this._io.readBytes(4),"UTF-8"),this._debug.type.end=this._io.pos),this.isValid&&(this._debug.lenBody={start:this._io.pos,ioOffset:this._io.byteOffset},this.lenBody=this._io.readU4be(),this._debug.lenBody.end=this._io.pos),this.isValid&&(this._debug.body={start:this._io.pos,ioOffset:this._io.byteOffset},this.body=o.bytesToStr(this._io.readBytes(this.lenBody),"UTF-8"),this._debug.body.end=this._io.pos)},Object.defineProperty(i.prototype,"isValid",{get:function(){return this._m_isValid!==void 0?this._m_isValid:(this._debug._m_isValid={},this._m_isValid=this.magic=="prop",this._m_isValid)}}),i})();return h})();r.AllegroDat=p})}});const j=D(),P={id:"allegro_dat",title:"Allegro data file",ksy:{meta:{id:"allegro_dat",title:"Allegro data file",application:"Allegro library (v2.2-v4.4)","file-extension":"dat",xref:{justsolve:"Allegro_packfile"},license:"CC0-1.0",encoding:"UTF-8",endian:"be"},doc:`Allegro library for C (mostly used for game and multimedia apps
programming) used its own container file format.

In general, it allows storage of arbitrary binary data blocks
bundled together with some simple key-value style metadata
("properties") for every block. Allegro also pre-defines some simple
formats for bitmaps, fonts, MIDI music, sound samples and
palettes. Allegro library v4.0+ also support LZSS compression.

This spec applies to Allegro data files for library versions 2.2 up
to 4.4.
`,"doc-ref":"https://liballeg.org/stabledocs/en/datafile.html",seq:[{id:"pack_magic",type:"u4",enum:"pack_enum"},{id:"dat_magic",contents:"ALL."},{id:"num_objects",type:"u4"},{id:"objects",type:"dat_object",repeat:"expr","repeat-expr":"num_objects"}],types:{dat_object:{seq:[{id:"properties",type:"property",repeat:"until","repeat-until":"not _.is_valid"},{id:"len_compressed",type:"s4"},{id:"len_uncompressed",type:"s4"},{id:"body",size:"len_compressed",type:{"switch-on":"type",cases:{'"BMP "':"dat_bitmap",'"RLE "':"dat_rle_sprite",'"FONT"':"dat_font"}}}],instances:{type:{value:"properties.last.magic"}}},property:{seq:[{id:"magic",size:4,type:"str"},{id:"type",size:4,type:"str",if:"is_valid"},{id:"len_body",type:"u4",if:"is_valid"},{id:"body",size:"len_body",type:"str",if:"is_valid"}],instances:{is_valid:{value:'magic == "prop"'}}},dat_bitmap:{seq:[{id:"bits_per_pixel",type:"s2"},{id:"width",type:"u2"},{id:"height",type:"u2"},{id:"image","size-eos":!0}]},dat_rle_sprite:{seq:[{id:"bits_per_pixel",type:"s2"},{id:"width",type:"u2"},{id:"height",type:"u2"},{id:"len_image",type:"u4"},{id:"image","size-eos":!0}]},dat_font:{seq:[{id:"font_size",type:"s2"},{id:"body",type:{"switch-on":"font_size",cases:{0:"dat_font_3_9",8:"dat_font_8",16:"dat_font_16"}}}]},dat_font_8:{doc:`Simple monochrome monospaced font, 95 characters, 8x8 px
characters.
`,seq:[{id:"chars",size:8,repeat:"expr","repeat-expr":95}]},dat_font_16:{doc:`Simple monochrome monospaced font, 95 characters, 8x16 px
characters.
`,seq:[{id:"chars",size:16,repeat:"expr","repeat-expr":95}]},dat_font_3_9:{doc:`New bitmap font format introduced since Allegro 3.9: allows
flexible designation of character ranges, 8-bit colored
characters, etc.
`,seq:[{id:"num_ranges",type:"s2"},{id:"ranges",type:"range",repeat:"expr","repeat-expr":"num_ranges"}],types:{range:{seq:[{id:"mono",type:"u1"},{id:"start_char",type:"u4",doc:"First character in range"},{id:"end_char",type:"u4",doc:"Last character in range (inclusive)"},{id:"chars",type:"font_char",repeat:"expr","repeat-expr":"end_char - start_char + 1"}]},font_char:{seq:[{id:"width",type:"u2"},{id:"height",type:"u2"},{id:"body",size:"width * height"}]}}}},enums:{pack_enum:{1936484398:"unpacked"}}}};export{j as default,P as spec};
