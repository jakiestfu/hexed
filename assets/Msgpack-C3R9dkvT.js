import{k as m}from"./index-CMEpbKl5.js";var p=Object.getOwnPropertyNames,u=(e,s)=>function(){return s||(0,e[p(e)[0]])((s={exports:{}}).exports,s),s.exports},f=u({"<stdin>"(e){(function(s,r){typeof define=="function"&&define.amd?define(["exports","kaitai-struct/KaitaiStream"],r):typeof e=="object"&&e!==null&&typeof e.nodeType!="number"?r(e,m.KaitaiStream):r(s.Msgpack||(s.Msgpack={}),s.KaitaiStream)})(typeof self<"u"?self:e,function(s,r){var o=(function(){function t(i,_,a){this._io=i,this._parent=_,this._root=a||this,this._debug={},this._read()}t.prototype._read=function(){switch(this._debug.b1={start:this._io.pos,ioOffset:this._io.byteOffset},this.b1=this._io.readU1(),this._debug.b1.end=this._io.pos,this._debug.intExtra={start:this._io.pos,ioOffset:this._io.byteOffset},this.b1){case 204:this.intExtra=this._io.readU1();break;case 205:this.intExtra=this._io.readU2be();break;case 206:this.intExtra=this._io.readU4be();break;case 207:this.intExtra=this._io.readU8be();break;case 208:this.intExtra=this._io.readS1();break;case 209:this.intExtra=this._io.readS2be();break;case 210:this.intExtra=this._io.readS4be();break;case 211:this.intExtra=this._io.readS8be();break}if(this._debug.intExtra.end=this._io.pos,this.isFloat32&&(this._debug.float32Value={start:this._io.pos,ioOffset:this._io.byteOffset},this.float32Value=this._io.readF4be(),this._debug.float32Value.end=this._io.pos),this.isFloat64&&(this._debug.float64Value={start:this._io.pos,ioOffset:this._io.byteOffset},this.float64Value=this._io.readF8be(),this._debug.float64Value.end=this._io.pos),this.isStr8&&(this._debug.strLen8={start:this._io.pos,ioOffset:this._io.byteOffset},this.strLen8=this._io.readU1(),this._debug.strLen8.end=this._io.pos),this.isStr16&&(this._debug.strLen16={start:this._io.pos,ioOffset:this._io.byteOffset},this.strLen16=this._io.readU2be(),this._debug.strLen16.end=this._io.pos),this.isStr32&&(this._debug.strLen32={start:this._io.pos,ioOffset:this._io.byteOffset},this.strLen32=this._io.readU4be(),this._debug.strLen32.end=this._io.pos),this.isStr&&(this._debug.strValue={start:this._io.pos,ioOffset:this._io.byteOffset},this.strValue=r.bytesToStr(this._io.readBytes(this.strLen),"UTF-8"),this._debug.strValue.end=this._io.pos),this.isArray16&&(this._debug.numArrayElements16={start:this._io.pos,ioOffset:this._io.byteOffset},this.numArrayElements16=this._io.readU2be(),this._debug.numArrayElements16.end=this._io.pos),this.isArray32&&(this._debug.numArrayElements32={start:this._io.pos,ioOffset:this._io.byteOffset},this.numArrayElements32=this._io.readU4be(),this._debug.numArrayElements32.end=this._io.pos),this.isArray){this._debug.arrayElements={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.arrayElements.arr=[],this.arrayElements=[];for(var i=0;i<this.numArrayElements;i++)this._debug.arrayElements.arr[i]={start:this._io.pos,ioOffset:this._io.byteOffset},this.arrayElements.push(new t(this._io,this,this._root)),this._debug.arrayElements.arr[i].end=this._io.pos;this._debug.arrayElements.end=this._io.pos}if(this.isMap16&&(this._debug.numMapElements16={start:this._io.pos,ioOffset:this._io.byteOffset},this.numMapElements16=this._io.readU2be(),this._debug.numMapElements16.end=this._io.pos),this.isMap32&&(this._debug.numMapElements32={start:this._io.pos,ioOffset:this._io.byteOffset},this.numMapElements32=this._io.readU4be(),this._debug.numMapElements32.end=this._io.pos),this.isMap){this._debug.mapElements={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.mapElements.arr=[],this.mapElements=[];for(var i=0;i<this.numMapElements;i++)this._debug.mapElements.arr[i]={start:this._io.pos,ioOffset:this._io.byteOffset},this.mapElements.push(new n(this._io,this,this._root)),this._debug.mapElements.arr[i].end=this._io.pos;this._debug.mapElements.end=this._io.pos}};var n=t.MapTuple=(function(){function i(_,a,h){this._io=_,this._parent=a,this._root=h,this._debug={},this._read()}return i.prototype._read=function(){this._debug.key={start:this._io.pos,ioOffset:this._io.byteOffset},this.key=new t(this._io,this,this._root),this._debug.key.end=this._io.pos,this._debug.value={start:this._io.pos,ioOffset:this._io.byteOffset},this.value=new t(this._io,this,this._root),this._debug.value.end=this._io.pos},i})();return Object.defineProperty(t.prototype,"boolValue",{get:function(){return this._m_boolValue!==void 0?this._m_boolValue:(this.isBool&&(this._debug._m_boolValue={},this._m_boolValue=this.b1==195),this._m_boolValue)}}),Object.defineProperty(t.prototype,"floatValue",{get:function(){return this._m_floatValue!==void 0?this._m_floatValue:(this.isFloat&&(this._debug._m_floatValue={},this._m_floatValue=this.isFloat32?this.float32Value:this.float64Value),this._m_floatValue)}}),Object.defineProperty(t.prototype,"intValue",{get:function(){return this._m_intValue!==void 0?this._m_intValue:(this.isInt&&(this._debug._m_intValue={},this._m_intValue=this.isPosInt7?this.posInt7Value:this.isNegInt5?this.negInt5Value:4919),this._m_intValue)}}),Object.defineProperty(t.prototype,"isArray",{get:function(){return this._m_isArray!==void 0?this._m_isArray:(this._debug._m_isArray={},this._m_isArray=this.isFixArray||this.isArray16||this.isArray32,this._m_isArray)}}),Object.defineProperty(t.prototype,"isArray16",{get:function(){return this._m_isArray16!==void 0?this._m_isArray16:(this._debug._m_isArray16={},this._m_isArray16=this.b1==220,this._m_isArray16)}}),Object.defineProperty(t.prototype,"isArray32",{get:function(){return this._m_isArray32!==void 0?this._m_isArray32:(this._debug._m_isArray32={},this._m_isArray32=this.b1==221,this._m_isArray32)}}),Object.defineProperty(t.prototype,"isBool",{get:function(){return this._m_isBool!==void 0?this._m_isBool:(this._debug._m_isBool={},this._m_isBool=this.b1==194||this.b1==195,this._m_isBool)}}),Object.defineProperty(t.prototype,"isFixArray",{get:function(){return this._m_isFixArray!==void 0?this._m_isFixArray:(this._debug._m_isFixArray={},this._m_isFixArray=(this.b1&240)==144,this._m_isFixArray)}}),Object.defineProperty(t.prototype,"isFixMap",{get:function(){return this._m_isFixMap!==void 0?this._m_isFixMap:(this._debug._m_isFixMap={},this._m_isFixMap=(this.b1&240)==128,this._m_isFixMap)}}),Object.defineProperty(t.prototype,"isFixStr",{get:function(){return this._m_isFixStr!==void 0?this._m_isFixStr:(this._debug._m_isFixStr={},this._m_isFixStr=(this.b1&224)==160,this._m_isFixStr)}}),Object.defineProperty(t.prototype,"isFloat",{get:function(){return this._m_isFloat!==void 0?this._m_isFloat:(this._debug._m_isFloat={},this._m_isFloat=this.isFloat32||this.isFloat64,this._m_isFloat)}}),Object.defineProperty(t.prototype,"isFloat32",{get:function(){return this._m_isFloat32!==void 0?this._m_isFloat32:(this._debug._m_isFloat32={},this._m_isFloat32=this.b1==202,this._m_isFloat32)}}),Object.defineProperty(t.prototype,"isFloat64",{get:function(){return this._m_isFloat64!==void 0?this._m_isFloat64:(this._debug._m_isFloat64={},this._m_isFloat64=this.b1==203,this._m_isFloat64)}}),Object.defineProperty(t.prototype,"isInt",{get:function(){return this._m_isInt!==void 0?this._m_isInt:(this._debug._m_isInt={},this._m_isInt=this.isPosInt7||this.isNegInt5,this._m_isInt)}}),Object.defineProperty(t.prototype,"isMap",{get:function(){return this._m_isMap!==void 0?this._m_isMap:(this._debug._m_isMap={},this._m_isMap=this.isFixMap||this.isMap16||this.isMap32,this._m_isMap)}}),Object.defineProperty(t.prototype,"isMap16",{get:function(){return this._m_isMap16!==void 0?this._m_isMap16:(this._debug._m_isMap16={},this._m_isMap16=this.b1==222,this._m_isMap16)}}),Object.defineProperty(t.prototype,"isMap32",{get:function(){return this._m_isMap32!==void 0?this._m_isMap32:(this._debug._m_isMap32={},this._m_isMap32=this.b1==223,this._m_isMap32)}}),Object.defineProperty(t.prototype,"isNegInt5",{get:function(){return this._m_isNegInt5!==void 0?this._m_isNegInt5:(this._debug._m_isNegInt5={},this._m_isNegInt5=(this.b1&224)==224,this._m_isNegInt5)}}),Object.defineProperty(t.prototype,"isNil",{get:function(){return this._m_isNil!==void 0?this._m_isNil:(this._debug._m_isNil={},this._m_isNil=this.b1==192,this._m_isNil)}}),Object.defineProperty(t.prototype,"isPosInt7",{get:function(){return this._m_isPosInt7!==void 0?this._m_isPosInt7:(this._debug._m_isPosInt7={},this._m_isPosInt7=(this.b1&128)==0,this._m_isPosInt7)}}),Object.defineProperty(t.prototype,"isStr",{get:function(){return this._m_isStr!==void 0?this._m_isStr:(this._debug._m_isStr={},this._m_isStr=this.isFixStr||this.isStr8||this.isStr16||this.isStr32,this._m_isStr)}}),Object.defineProperty(t.prototype,"isStr16",{get:function(){return this._m_isStr16!==void 0?this._m_isStr16:(this._debug._m_isStr16={},this._m_isStr16=this.b1==218,this._m_isStr16)}}),Object.defineProperty(t.prototype,"isStr32",{get:function(){return this._m_isStr32!==void 0?this._m_isStr32:(this._debug._m_isStr32={},this._m_isStr32=this.b1==219,this._m_isStr32)}}),Object.defineProperty(t.prototype,"isStr8",{get:function(){return this._m_isStr8!==void 0?this._m_isStr8:(this._debug._m_isStr8={},this._m_isStr8=this.b1==217,this._m_isStr8)}}),Object.defineProperty(t.prototype,"negInt5Value",{get:function(){return this._m_negInt5Value!==void 0?this._m_negInt5Value:(this.isNegInt5&&(this._debug._m_negInt5Value={},this._m_negInt5Value=-(this.b1&31)),this._m_negInt5Value)}}),Object.defineProperty(t.prototype,"numArrayElements",{get:function(){return this._m_numArrayElements!==void 0?this._m_numArrayElements:(this.isArray&&(this._debug._m_numArrayElements={},this._m_numArrayElements=this.isFixArray?this.b1&15:this.isArray16?this.numArrayElements16:this.numArrayElements32),this._m_numArrayElements)}}),Object.defineProperty(t.prototype,"numMapElements",{get:function(){return this._m_numMapElements!==void 0?this._m_numMapElements:(this.isMap&&(this._debug._m_numMapElements={},this._m_numMapElements=this.isFixMap?this.b1&15:this.isMap16?this.numMapElements16:this.numMapElements32),this._m_numMapElements)}}),Object.defineProperty(t.prototype,"posInt7Value",{get:function(){return this._m_posInt7Value!==void 0?this._m_posInt7Value:(this.isPosInt7&&(this._debug._m_posInt7Value={},this._m_posInt7Value=this.b1),this._m_posInt7Value)}}),Object.defineProperty(t.prototype,"strLen",{get:function(){return this._m_strLen!==void 0?this._m_strLen:(this.isStr&&(this._debug._m_strLen={},this._m_strLen=this.isFixStr?this.b1&31:this.isStr8?this.strLen8:this.isStr16?this.strLen16:this.strLen32),this._m_strLen)}}),t})();s.Msgpack=o})}});const l=f(),d={id:"msgpack",title:"MessagePack (msgpack) serialization format",ksy:{meta:{id:"msgpack",title:"MessagePack (msgpack) serialization format",xref:{wikidata:"Q6821738"},license:"CC0-1.0",endian:"be"},doc:`MessagePack (msgpack) is a system to serialize arbitrary structured
data into a compact binary stream.
`,"doc-ref":"https://github.com/msgpack/msgpack/blob/master/spec.md",seq:[{id:"b1",type:"u1",doc:`First byte is msgpack message is either a piece of data by
itself or determines types of further, more complex data
structures.
`},{id:"int_extra",type:{"switch-on":"b1",cases:{204:"u1",205:"u2",206:"u4",207:"u8",208:"s1",209:"s2",210:"s4",211:"s8"}}},{id:"float_32_value",type:"f4",if:"is_float_32"},{id:"float_64_value",type:"f8",if:"is_float_64"},{id:"str_len_8",type:"u1",if:"is_str_8"},{id:"str_len_16",type:"u2",if:"is_str_16"},{id:"str_len_32",type:"u4",if:"is_str_32"},{id:"str_value",type:"str",encoding:"UTF-8",size:"str_len",if:"is_str"},{id:"num_array_elements_16",type:"u2",if:"is_array_16"},{id:"num_array_elements_32",type:"u4",if:"is_array_32"},{id:"array_elements",type:"msgpack",repeat:"expr","repeat-expr":"num_array_elements",if:"is_array"},{id:"num_map_elements_16",type:"u2",if:"is_map_16"},{id:"num_map_elements_32",type:"u4",if:"is_map_32"},{id:"map_elements",type:"map_tuple",repeat:"expr","repeat-expr":"num_map_elements",if:"is_map"}],instances:{is_nil:{value:"b1 == 0xc0","doc-ref":"https://github.com/msgpack/msgpack/blob/master/spec.md#formats-nil"},is_bool:{value:"b1 == 0xc2 or b1 == 0xc3"},bool_value:{value:"b1 == 0xc3",if:"is_bool","doc-ref":"https://github.com/msgpack/msgpack/blob/master/spec.md#formats-bool"},is_pos_int7:{value:"b1 & 0b1000_0000 == 0"},pos_int7_value:{value:"b1",if:"is_pos_int7"},is_neg_int5:{value:"b1 & 0b111_00000 == 0b111_00000"},neg_int5_value:{value:"-(b1 & 0b000_11111)",if:"is_neg_int5"},is_int:{value:"is_pos_int7 or is_neg_int5"},int_value:{value:"is_pos_int7 ? pos_int7_value : is_neg_int5 ? neg_int5_value : 0x1337",if:"is_int"},is_float_32:{value:"b1 == 0xca","doc-ref":"https://github.com/msgpack/msgpack/blob/master/spec.md#formats-float"},is_float_64:{value:"b1 == 0xcb","doc-ref":"https://github.com/msgpack/msgpack/blob/master/spec.md#formats-float"},is_float:{value:"is_float_32 or is_float_64"},float_value:{value:"is_float_32 ? float_32_value : float_64_value",if:"is_float"},is_fix_str:{value:"b1 & 0b111_00000 == 0b101_00000","doc-ref":"https://github.com/msgpack/msgpack/blob/master/spec.md#formats-str"},is_str_8:{value:"b1 == 0xd9","doc-ref":"https://github.com/msgpack/msgpack/blob/master/spec.md#formats-str"},is_str_16:{value:"b1 == 0xda","doc-ref":"https://github.com/msgpack/msgpack/blob/master/spec.md#formats-str"},is_str_32:{value:"b1 == 0xdb","doc-ref":"https://github.com/msgpack/msgpack/blob/master/spec.md#formats-str"},is_str:{value:"is_fix_str or is_str_8 or is_str_16 or is_str_32"},str_len:{value:"is_fix_str ? (b1 & 0b000_11111) : is_str_8 ? str_len_8 : is_str_16 ? str_len_16 : str_len_32",if:"is_str"},is_array:{value:"is_fix_array or is_array_16 or is_array_32","doc-ref":"https://github.com/msgpack/msgpack/blob/master/spec.md#formats-array"},is_fix_array:{value:"b1 & 0b1111_0000 == 0b1001_0000","doc-ref":"https://github.com/msgpack/msgpack/blob/master/spec.md#formats-array"},is_array_16:{value:"b1 == 0xdc","doc-ref":"https://github.com/msgpack/msgpack/blob/master/spec.md#formats-array"},is_array_32:{value:"b1 == 0xdd","doc-ref":"https://github.com/msgpack/msgpack/blob/master/spec.md#formats-array"},num_array_elements:{value:"is_fix_array ? b1 & 0b0000_1111 : is_array_16 ? num_array_elements_16 : num_array_elements_32",if:"is_array","doc-ref":"https://github.com/msgpack/msgpack/blob/master/spec.md#formats-array"},is_map:{value:"is_fix_map or is_map_16 or is_map_32","doc-ref":"https://github.com/msgpack/msgpack/blob/master/spec.md#formats-map"},is_fix_map:{value:"b1 & 0b1111_0000 == 0b1000_0000","doc-ref":"https://github.com/msgpack/msgpack/blob/master/spec.md#formats-map"},is_map_16:{value:"b1 == 0xde","doc-ref":"https://github.com/msgpack/msgpack/blob/master/spec.md#formats-map"},is_map_32:{value:"b1 == 0xdf","doc-ref":"https://github.com/msgpack/msgpack/blob/master/spec.md#formats-map"},num_map_elements:{value:"is_fix_map ? b1 & 0b0000_1111 : is_map_16 ? num_map_elements_16 : num_map_elements_32",if:"is_map","doc-ref":"https://github.com/msgpack/msgpack/blob/master/spec.md#formats-map"}},types:{map_tuple:{seq:[{id:"key",type:"msgpack"},{id:"value",type:"msgpack"}]}}}};export{l as default,d as spec};
