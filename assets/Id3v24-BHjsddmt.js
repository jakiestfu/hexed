import{k as m}from"./index-DZ3xxA7Z.js";var B=Object.getOwnPropertyNames,I=(d,r)=>function(){return r||(0,d[B(d)[0]])((r={exports:{}}).exports,r),r.exports},x=I({"<stdin>"(d){(function(r,_){typeof define=="function"&&define.amd?define(["exports","kaitai-struct/KaitaiStream"],_):typeof d=="object"&&d!==null&&typeof d.nodeType!="number"?_(d,m.KaitaiStream):_(r.Id3v24||(r.Id3v24={}),r.KaitaiStream)})(typeof self<"u"?self:d,function(r,_){var p=(function(){function h(t,e,i){this._io=t,this._parent=e,this._root=i||this,this._debug={},this._read()}h.prototype._read=function(){this._debug.tag={start:this._io.pos,ioOffset:this._io.byteOffset},this.tag=new O(this._io,this,this._root),this._debug.tag.end=this._io.pos};var b=h.Footer=(function(){function t(i,s,o){this._io=i,this._parent=s,this._root=o,this._debug={},this._read()}t.prototype._read=function(){if(this._debug.magic={start:this._io.pos,ioOffset:this._io.byteOffset},this.magic=this._io.readBytes(3),this._debug.magic.end=this._io.pos,_.byteArrayCompare(this.magic,new Uint8Array([51,68,73]))!=0){var i=new _.ValidationNotEqualError(new Uint8Array([51,68,73]),this.magic,this._io,"/types/footer/seq/0");throw this._debug.magic.validationError=i,i}this._debug.versionMajor={start:this._io.pos,ioOffset:this._io.byteOffset},this.versionMajor=this._io.readU1(),this._debug.versionMajor.end=this._io.pos,this._debug.versionRevision={start:this._io.pos,ioOffset:this._io.byteOffset},this.versionRevision=this._io.readU1(),this._debug.versionRevision.end=this._io.pos,this._debug.flags={start:this._io.pos,ioOffset:this._io.byteOffset},this.flags=new e(this._io,this,this._root),this._debug.flags.end=this._io.pos,this._debug.size={start:this._io.pos,ioOffset:this._io.byteOffset},this.size=new f(this._io,this,this._root),this._debug.size.end=this._io.pos};var e=t.Flags=(function(){function i(s,o,a){this._io=s,this._parent=o,this._root=a,this._debug={},this._read()}return i.prototype._read=function(){this._debug.flagUnsynchronization={start:this._io.pos,ioOffset:this._io.byteOffset},this.flagUnsynchronization=this._io.readBitsIntBe(1)!=0,this._debug.flagUnsynchronization.end=this._io.pos,this._debug.flagHeaderex={start:this._io.pos,ioOffset:this._io.byteOffset},this.flagHeaderex=this._io.readBitsIntBe(1)!=0,this._debug.flagHeaderex.end=this._io.pos,this._debug.flagExperimental={start:this._io.pos,ioOffset:this._io.byteOffset},this.flagExperimental=this._io.readBitsIntBe(1)!=0,this._debug.flagExperimental.end=this._io.pos,this._debug.flagFooter={start:this._io.pos,ioOffset:this._io.byteOffset},this.flagFooter=this._io.readBitsIntBe(1)!=0,this._debug.flagFooter.end=this._io.pos,this._debug.reserved={start:this._io.pos,ioOffset:this._io.byteOffset},this.reserved=this._io.readBitsIntBe(4),this._debug.reserved.end=this._io.pos},i})();return t})(),l=h.Frame=(function(){function t(s,o,a){this._io=s,this._parent=o,this._root=a,this._debug={},this._read()}t.prototype._read=function(){this._debug.id={start:this._io.pos,ioOffset:this._io.byteOffset},this.id=_.bytesToStr(this._io.readBytes(4),"ASCII"),this._debug.id.end=this._io.pos,this._debug.size={start:this._io.pos,ioOffset:this._io.byteOffset},this.size=new f(this._io,this,this._root),this._debug.size.end=this._io.pos,this._debug.flagsStatus={start:this._io.pos,ioOffset:this._io.byteOffset},this.flagsStatus=new i(this._io,this,this._root),this._debug.flagsStatus.end=this._io.pos,this._debug.flagsFormat={start:this._io.pos,ioOffset:this._io.byteOffset},this.flagsFormat=new e(this._io,this,this._root),this._debug.flagsFormat.end=this._io.pos,this._debug.data={start:this._io.pos,ioOffset:this._io.byteOffset},this.data=this._io.readBytes(this.size.value),this._debug.data.end=this._io.pos};var e=t.FlagsFormat=(function(){function s(o,a,n){this._io=o,this._parent=a,this._root=n,this._debug={},this._read()}return s.prototype._read=function(){this._debug.reserved1={start:this._io.pos,ioOffset:this._io.byteOffset},this.reserved1=this._io.readBitsIntBe(1)!=0,this._debug.reserved1.end=this._io.pos,this._debug.flagGrouping={start:this._io.pos,ioOffset:this._io.byteOffset},this.flagGrouping=this._io.readBitsIntBe(1)!=0,this._debug.flagGrouping.end=this._io.pos,this._debug.reserved2={start:this._io.pos,ioOffset:this._io.byteOffset},this.reserved2=this._io.readBitsIntBe(2),this._debug.reserved2.end=this._io.pos,this._debug.flagCompressed={start:this._io.pos,ioOffset:this._io.byteOffset},this.flagCompressed=this._io.readBitsIntBe(1)!=0,this._debug.flagCompressed.end=this._io.pos,this._debug.flagEncrypted={start:this._io.pos,ioOffset:this._io.byteOffset},this.flagEncrypted=this._io.readBitsIntBe(1)!=0,this._debug.flagEncrypted.end=this._io.pos,this._debug.flagUnsynchronisated={start:this._io.pos,ioOffset:this._io.byteOffset},this.flagUnsynchronisated=this._io.readBitsIntBe(1)!=0,this._debug.flagUnsynchronisated.end=this._io.pos,this._debug.flagIndicator={start:this._io.pos,ioOffset:this._io.byteOffset},this.flagIndicator=this._io.readBitsIntBe(1)!=0,this._debug.flagIndicator.end=this._io.pos},s})(),i=t.FlagsStatus=(function(){function s(o,a,n){this._io=o,this._parent=a,this._root=n,this._debug={},this._read()}return s.prototype._read=function(){this._debug.reserved1={start:this._io.pos,ioOffset:this._io.byteOffset},this.reserved1=this._io.readBitsIntBe(1)!=0,this._debug.reserved1.end=this._io.pos,this._debug.flagDiscardAlterTag={start:this._io.pos,ioOffset:this._io.byteOffset},this.flagDiscardAlterTag=this._io.readBitsIntBe(1)!=0,this._debug.flagDiscardAlterTag.end=this._io.pos,this._debug.flagDiscardAlterFile={start:this._io.pos,ioOffset:this._io.byteOffset},this.flagDiscardAlterFile=this._io.readBitsIntBe(1)!=0,this._debug.flagDiscardAlterFile.end=this._io.pos,this._debug.flagReadOnly={start:this._io.pos,ioOffset:this._io.byteOffset},this.flagReadOnly=this._io.readBitsIntBe(1)!=0,this._debug.flagReadOnly.end=this._io.pos,this._debug.reserved2={start:this._io.pos,ioOffset:this._io.byteOffset},this.reserved2=this._io.readBitsIntBe(4),this._debug.reserved2.end=this._io.pos},s})();return Object.defineProperty(t.prototype,"isInvalid",{get:function(){return this._m_isInvalid!==void 0?this._m_isInvalid:(this._debug._m_isInvalid={},this._m_isInvalid=this.id=="\0\0\0\0",this._m_isInvalid)}}),t})(),y=h.Header=(function(){function t(i,s,o){this._io=i,this._parent=s,this._root=o,this._debug={},this._read()}t.prototype._read=function(){if(this._debug.magic={start:this._io.pos,ioOffset:this._io.byteOffset},this.magic=this._io.readBytes(3),this._debug.magic.end=this._io.pos,_.byteArrayCompare(this.magic,new Uint8Array([73,68,51]))!=0){var i=new _.ValidationNotEqualError(new Uint8Array([73,68,51]),this.magic,this._io,"/types/header/seq/0");throw this._debug.magic.validationError=i,i}this._debug.versionMajor={start:this._io.pos,ioOffset:this._io.byteOffset},this.versionMajor=this._io.readU1(),this._debug.versionMajor.end=this._io.pos,this._debug.versionRevision={start:this._io.pos,ioOffset:this._io.byteOffset},this.versionRevision=this._io.readU1(),this._debug.versionRevision.end=this._io.pos,this._debug.flags={start:this._io.pos,ioOffset:this._io.byteOffset},this.flags=new e(this._io,this,this._root),this._debug.flags.end=this._io.pos,this._debug.size={start:this._io.pos,ioOffset:this._io.byteOffset},this.size=new f(this._io,this,this._root),this._debug.size.end=this._io.pos};var e=t.Flags=(function(){function i(s,o,a){this._io=s,this._parent=o,this._root=a,this._debug={},this._read()}return i.prototype._read=function(){this._debug.flagUnsynchronization={start:this._io.pos,ioOffset:this._io.byteOffset},this.flagUnsynchronization=this._io.readBitsIntBe(1)!=0,this._debug.flagUnsynchronization.end=this._io.pos,this._debug.flagHeaderex={start:this._io.pos,ioOffset:this._io.byteOffset},this.flagHeaderex=this._io.readBitsIntBe(1)!=0,this._debug.flagHeaderex.end=this._io.pos,this._debug.flagExperimental={start:this._io.pos,ioOffset:this._io.byteOffset},this.flagExperimental=this._io.readBitsIntBe(1)!=0,this._debug.flagExperimental.end=this._io.pos,this._debug.flagFooter={start:this._io.pos,ioOffset:this._io.byteOffset},this.flagFooter=this._io.readBitsIntBe(1)!=0,this._debug.flagFooter.end=this._io.pos,this._debug.reserved={start:this._io.pos,ioOffset:this._io.byteOffset},this.reserved=this._io.readBitsIntBe(4),this._debug.reserved.end=this._io.pos},i})();return t})(),c=h.HeaderEx=(function(){function t(i,s,o){this._io=i,this._parent=s,this._root=o,this._debug={},this._read()}t.prototype._read=function(){this._debug.size={start:this._io.pos,ioOffset:this._io.byteOffset},this.size=new f(this._io,this,this._root),this._debug.size.end=this._io.pos,this._debug.flagsEx={start:this._io.pos,ioOffset:this._io.byteOffset},this.flagsEx=new e(this._io,this,this._root),this._debug.flagsEx.end=this._io.pos,this._debug.data={start:this._io.pos,ioOffset:this._io.byteOffset},this.data=this._io.readBytes(this.size.value-5),this._debug.data.end=this._io.pos};var e=t.FlagsEx=(function(){function i(s,o,a){this._io=s,this._parent=o,this._root=a,this._debug={},this._read()}return i.prototype._read=function(){this._debug.reserved1={start:this._io.pos,ioOffset:this._io.byteOffset},this.reserved1=this._io.readBitsIntBe(1)!=0,this._debug.reserved1.end=this._io.pos,this._debug.flagUpdate={start:this._io.pos,ioOffset:this._io.byteOffset},this.flagUpdate=this._io.readBitsIntBe(1)!=0,this._debug.flagUpdate.end=this._io.pos,this._debug.flagCrc={start:this._io.pos,ioOffset:this._io.byteOffset},this.flagCrc=this._io.readBitsIntBe(1)!=0,this._debug.flagCrc.end=this._io.pos,this._debug.flagRestrictions={start:this._io.pos,ioOffset:this._io.byteOffset},this.flagRestrictions=this._io.readBitsIntBe(1)!=0,this._debug.flagRestrictions.end=this._io.pos,this._debug.reserved2={start:this._io.pos,ioOffset:this._io.byteOffset},this.reserved2=this._io.readBitsIntBe(4),this._debug.reserved2.end=this._io.pos},i})();return t})(),v=h.Padding=(function(){function t(e,i,s){this._io=e,this._parent=i,this._root=s,this._debug={},this._read()}return t.prototype._read=function(){this._debug.padding={start:this._io.pos,ioOffset:this._io.byteOffset},this.padding=this._io.readBytes(this._root.tag.header.size.value-this._io.pos),this._debug.padding.end=this._io.pos},t})(),O=h.Tag=(function(){function t(e,i,s){this._io=e,this._parent=i,this._root=s,this._debug={},this._read()}return t.prototype._read=function(){this._debug.header={start:this._io.pos,ioOffset:this._io.byteOffset},this.header=new y(this._io,this,this._root),this._debug.header.end=this._io.pos,this.header.flags.flagHeaderex&&(this._debug.headerEx={start:this._io.pos,ioOffset:this._io.byteOffset},this.headerEx=new c(this._io,this,this._root),this._debug.headerEx.end=this._io.pos),this._debug.frames={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.frames.arr=[],this.frames=[];do{this._debug.frames.arr[this.frames.length]={start:this._io.pos,ioOffset:this._io.byteOffset};var e=new l(this._io,this,this._root);this.frames.push(e),this._debug.frames.arr[this.frames.length-1].end=this._io.pos}while(!(this._io.pos+e.size.value>this.header.size.value||e.isInvalid));this._debug.frames.end=this._io.pos,this.header.flags.flagFooter||(this._debug.padding={start:this._io.pos,ioOffset:this._io.byteOffset},this.padding=new v(this._io,this,this._root),this._debug.padding.end=this._io.pos),this.header.flags.flagFooter&&(this._debug.footer={start:this._io.pos,ioOffset:this._io.byteOffset},this.footer=new b(this._io,this,this._root),this._debug.footer.end=this._io.pos)},t})(),g=h.U1beSynchsafe=(function(){function t(e,i,s){this._io=e,this._parent=i,this._root=s,this._debug={},this._read()}return t.prototype._read=function(){this._debug.padding={start:this._io.pos,ioOffset:this._io.byteOffset},this.padding=this._io.readBitsIntBe(1)!=0,this._debug.padding.end=this._io.pos,this._debug.value={start:this._io.pos,ioOffset:this._io.byteOffset},this.value=this._io.readBitsIntBe(7),this._debug.value.end=this._io.pos},t})(),u=h.U2beSynchsafe=(function(){function t(e,i,s){this._io=e,this._parent=i,this._root=s,this._debug={},this._read()}return t.prototype._read=function(){this._debug.byte0={start:this._io.pos,ioOffset:this._io.byteOffset},this.byte0=new g(this._io,this,this._root),this._debug.byte0.end=this._io.pos,this._debug.byte1={start:this._io.pos,ioOffset:this._io.byteOffset},this.byte1=new g(this._io,this,this._root),this._debug.byte1.end=this._io.pos},Object.defineProperty(t.prototype,"value",{get:function(){return this._m_value!==void 0?this._m_value:(this._debug._m_value={},this._m_value=this.byte0.value<<7|this.byte1.value,this._m_value)}}),t})(),f=h.U4beSynchsafe=(function(){function t(e,i,s){this._io=e,this._parent=i,this._root=s,this._debug={},this._read()}return t.prototype._read=function(){this._debug.short0={start:this._io.pos,ioOffset:this._io.byteOffset},this.short0=new u(this._io,this,this._root),this._debug.short0.end=this._io.pos,this._debug.short1={start:this._io.pos,ioOffset:this._io.byteOffset},this.short1=new u(this._io,this,this._root),this._debug.short1.end=this._io.pos},Object.defineProperty(t.prototype,"value",{get:function(){return this._m_value!==void 0?this._m_value:(this._debug._m_value={},this._m_value=this.short0.value<<14|this.short1.value,this._m_value)}}),t})();return h})();r.Id3v24=p})}});const F=x(),w={id:"id3v2_4",title:"ID3v2.4 tag for .mp3 files",ksy:{meta:{id:"id3v2_4",title:"ID3v2.4 tag for .mp3 files","file-extension":"mp3",xref:{forensicswiki:"id3",justsolve:"ID3",loc:"fdd000108",wikidata:"Q1054220"},license:"CC0-1.0",endian:"be"},"doc-ref":["http://id3.org/id3v2.4.0-structure","http://id3.org/id3v2.4.0-frames"],seq:[{id:"tag",type:"tag"}],types:{tag:{seq:[{id:"header",type:"header"},{id:"header_ex",type:"header_ex",if:"header.flags.flag_headerex"},{id:"frames",type:"frame",repeat:"until","repeat-until":"_io.pos + _.size.value > header.size.value or _.is_invalid"},{id:"padding",type:"padding",if:"not header.flags.flag_footer"},{id:"footer",type:"footer",if:"header.flags.flag_footer"}]},header:{seq:[{id:"magic",contents:"ID3"},{id:"version_major",type:"u1"},{id:"version_revision",type:"u1"},{id:"flags",type:"flags"},{id:"size",type:"u4be_synchsafe"}],types:{flags:{seq:[{id:"flag_unsynchronization",type:"b1"},{id:"flag_headerex",type:"b1"},{id:"flag_experimental",type:"b1"},{id:"flag_footer",type:"b1"},{id:"reserved",type:"b4"}]}}},header_ex:{seq:[{id:"size",type:"u4be_synchsafe"},{id:"flags_ex",type:"flags_ex"},{id:"data",size:"size.value - 5"}],types:{flags_ex:{seq:[{id:"reserved1",type:"b1"},{id:"flag_update",type:"b1"},{id:"flag_crc",type:"b1"},{id:"flag_restrictions",type:"b1"},{id:"reserved2",type:"b4"}]}}},padding:{seq:[{id:"padding",size:"_root.tag.header.size.value - _io.pos"}]},footer:{seq:[{id:"magic",contents:"3DI"},{id:"version_major",type:"u1"},{id:"version_revision",type:"u1"},{id:"flags",type:"flags"},{id:"size",type:"u4be_synchsafe"}],types:{flags:{seq:[{id:"flag_unsynchronization",type:"b1"},{id:"flag_headerex",type:"b1"},{id:"flag_experimental",type:"b1"},{id:"flag_footer",type:"b1"},{id:"reserved",type:"b4"}]}}},frame:{seq:[{id:"id",type:"str",size:4,encoding:"ASCII"},{id:"size",type:"u4be_synchsafe"},{id:"flags_status",type:"flags_status"},{id:"flags_format",type:"flags_format"},{id:"data",size:"size.value"}],types:{flags_status:{seq:[{id:"reserved1",type:"b1"},{id:"flag_discard_alter_tag",type:"b1"},{id:"flag_discard_alter_file",type:"b1"},{id:"flag_read_only",type:"b1"},{id:"reserved2",type:"b4"}]},flags_format:{seq:[{id:"reserved1",type:"b1"},{id:"flag_grouping",type:"b1"},{id:"reserved2",type:"b2"},{id:"flag_compressed",type:"b1"},{id:"flag_encrypted",type:"b1"},{id:"flag_unsynchronisated",type:"b1"},{id:"flag_indicator",type:"b1"}]}},instances:{is_invalid:{value:"id == '\0\0\0\0'"}}},u1be_synchsafe:{seq:[{id:"padding",type:"b1"},{id:"value",type:"b7"}]},u2be_synchsafe:{seq:[{id:"byte0",type:"u1be_synchsafe"},{id:"byte1",type:"u1be_synchsafe"}],instances:{value:{value:"(byte0.value << 7) | byte1.value"}}},u4be_synchsafe:{seq:[{id:"short0",type:"u2be_synchsafe"},{id:"short1",type:"u2be_synchsafe"}],instances:{value:{value:"(short0.value << 14) | short1.value"}}}}}};export{F as default,w as spec};
