import{k as u}from"./index-Cy_iKu7E.js";var p=Object.getOwnPropertyNames,l=(o,e)=>function(){return e||(0,o[p(o)[0]])((e={exports:{}}).exports,e),e.exports},b=l({"<stdin>"(o){(function(e,_){typeof define=="function"&&define.amd?define(["exports","kaitai-struct/KaitaiStream"],_):typeof o=="object"&&o!==null&&typeof o.nodeType!="number"?_(o,u.KaitaiStream):_(e.FalloutDat||(e.FalloutDat={}),e.KaitaiStream)})(typeof self<"u"?self:o,function(e,_){var r=(function(){h.Compression=Object.freeze({NONE:32,LZSS:64,32:"NONE",64:"LZSS"});function h(t,s,i){this._io=t,this._parent=s,this._root=i||this,this._debug={},this._read()}h.prototype._read=function(){this._debug.folderCount={start:this._io.pos,ioOffset:this._io.byteOffset},this.folderCount=this._io.readU4be(),this._debug.folderCount.end=this._io.pos,this._debug.unknown1={start:this._io.pos,ioOffset:this._io.byteOffset},this.unknown1=this._io.readU4be(),this._debug.unknown1.end=this._io.pos,this._debug.unknown2={start:this._io.pos,ioOffset:this._io.byteOffset},this.unknown2=this._io.readU4be(),this._debug.unknown2.end=this._io.pos,this._debug.timestamp={start:this._io.pos,ioOffset:this._io.byteOffset},this.timestamp=this._io.readU4be(),this._debug.timestamp.end=this._io.pos,this._debug.folderNames={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.folderNames.arr=[],this.folderNames=[];for(var t=0;t<this.folderCount;t++)this._debug.folderNames.arr[t]={start:this._io.pos,ioOffset:this._io.byteOffset},this.folderNames.push(new n(this._io,this,this._root)),this._debug.folderNames.arr[t].end=this._io.pos;this._debug.folderNames.end=this._io.pos,this._debug.folders={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.folders.arr=[],this.folders=[];for(var t=0;t<this.folderCount;t++)this._debug.folders.arr[t]={start:this._io.pos,ioOffset:this._io.byteOffset},this.folders.push(new a(this._io,this,this._root)),this._debug.folders.arr[t].end=this._io.pos;this._debug.folders.end=this._io.pos};var d=h.File=(function(){function t(s,i,f){this._io=s,this._parent=i,this._root=f,this._debug={},this._read()}return t.prototype._read=function(){this._debug.name={start:this._io.pos,ioOffset:this._io.byteOffset},this.name=new n(this._io,this,this._root),this._debug.name.end=this._io.pos,this._debug.flags={start:this._io.pos,ioOffset:this._io.byteOffset,enumName:"FalloutDat.Compression"},this.flags=this._io.readU4be(),this._debug.flags.end=this._io.pos,this._debug.offset={start:this._io.pos,ioOffset:this._io.byteOffset},this.offset=this._io.readU4be(),this._debug.offset.end=this._io.pos,this._debug.sizeUnpacked={start:this._io.pos,ioOffset:this._io.byteOffset},this.sizeUnpacked=this._io.readU4be(),this._debug.sizeUnpacked.end=this._io.pos,this._debug.sizePacked={start:this._io.pos,ioOffset:this._io.byteOffset},this.sizePacked=this._io.readU4be(),this._debug.sizePacked.end=this._io.pos},Object.defineProperty(t.prototype,"contents",{get:function(){if(this._m_contents!==void 0)return this._m_contents;var s=this._root._io,i=s.pos;return s.seek(this.offset),this._debug._m_contents={start:s.pos,ioOffset:s.byteOffset},this._m_contents=s.readBytes(this.flags==h.Compression.NONE?this.sizeUnpacked:this.sizePacked),this._debug._m_contents.end=s.pos,s.seek(i),this._m_contents}}),t})(),a=h.Folder=(function(){function t(s,i,f){this._io=s,this._parent=i,this._root=f,this._debug={},this._read()}return t.prototype._read=function(){this._debug.fileCount={start:this._io.pos,ioOffset:this._io.byteOffset},this.fileCount=this._io.readU4be(),this._debug.fileCount.end=this._io.pos,this._debug.unknown={start:this._io.pos,ioOffset:this._io.byteOffset},this.unknown=this._io.readU4be(),this._debug.unknown.end=this._io.pos,this._debug.flags={start:this._io.pos,ioOffset:this._io.byteOffset},this.flags=this._io.readU4be(),this._debug.flags.end=this._io.pos,this._debug.timestamp={start:this._io.pos,ioOffset:this._io.byteOffset},this.timestamp=this._io.readU4be(),this._debug.timestamp.end=this._io.pos,this._debug.files={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.files.arr=[],this.files=[];for(var s=0;s<this.fileCount;s++)this._debug.files.arr[s]={start:this._io.pos,ioOffset:this._io.byteOffset},this.files.push(new d(this._io,this,this._root)),this._debug.files.arr[s].end=this._io.pos;this._debug.files.end=this._io.pos},t})(),n=h.Pstr=(function(){function t(s,i,f){this._io=s,this._parent=i,this._root=f,this._debug={},this._read()}return t.prototype._read=function(){this._debug.size={start:this._io.pos,ioOffset:this._io.byteOffset},this.size=this._io.readU1(),this._debug.size.end=this._io.pos,this._debug.str={start:this._io.pos,ioOffset:this._io.byteOffset},this.str=_.bytesToStr(this._io.readBytes(this.size),"ASCII"),this._debug.str.end=this._io.pos},t})();return h})();e.FalloutDat=r})}});const c=b(),y={id:"fallout_dat",title:"fallout_dat",ksy:{meta:{id:"fallout_dat",application:"Fallout","file-extension":"dat",xref:{wikidata:"Q32097740"},license:"CC0-1.0",endian:"be"},seq:[{id:"folder_count",type:"u4"},{id:"unknown1",type:"u4"},{id:"unknown2",type:"u4"},{id:"timestamp",type:"u4"},{id:"folder_names",type:"pstr",repeat:"expr","repeat-expr":"folder_count"},{id:"folders",type:"folder",repeat:"expr","repeat-expr":"folder_count"}],types:{pstr:{seq:[{id:"size",type:"u1"},{id:"str",type:"str",size:"size",encoding:"ASCII"}]},folder:{seq:[{id:"file_count",type:"u4"},{id:"unknown",type:"u4"},{id:"flags",type:"u4"},{id:"timestamp",type:"u4"},{id:"files",type:"file",repeat:"expr","repeat-expr":"file_count"}]},file:{seq:[{id:"name",type:"pstr"},{id:"flags",type:"u4",enum:"compression"},{id:"offset",type:"u4"},{id:"size_unpacked",type:"u4"},{id:"size_packed",type:"u4"}],instances:{contents:{io:"_root._io",pos:"offset",size:"(flags == compression::none) ? size_unpacked : size_packed"}}}},enums:{compression:{32:"none",64:"lzss"}}}};export{c as default,y as spec};
