import{k as p}from"./index-C9sUxlHS.js";var d=Object.getOwnPropertyNames,f=(i,t)=>function(){return t||(0,i[d(i)[0]])((t={exports:{}}).exports,t),t.exports},u=f({"<stdin>"(i){(function(t,e){typeof define=="function"&&define.amd?define(["exports","kaitai-struct/KaitaiStream"],e):typeof i=="object"&&i!==null&&typeof i.nodeType!="number"?e(i,p.KaitaiStream):e(t.PsxTim||(t.PsxTim={}),t.KaitaiStream)})(typeof self<"u"?self:i,function(t,e){var n=(function(){o.BppType=Object.freeze({BPP_4:0,BPP_8:1,BPP_16:2,BPP_24:3,0:"BPP_4",1:"BPP_8",2:"BPP_16",3:"BPP_24"});function o(s,h,_){this._io=s,this._parent=h,this._root=_||this,this._debug={},this._read()}o.prototype._read=function(){if(this._debug.magic={start:this._io.pos,ioOffset:this._io.byteOffset},this.magic=this._io.readBytes(4),this._debug.magic.end=this._io.pos,e.byteArrayCompare(this.magic,new Uint8Array([16,0,0,0]))!=0){var s=new e.ValidationNotEqualError(new Uint8Array([16,0,0,0]),this.magic,this._io,"/seq/0");throw this._debug.magic.validationError=s,s}this._debug.flags={start:this._io.pos,ioOffset:this._io.byteOffset},this.flags=this._io.readU4le(),this._debug.flags.end=this._io.pos,this.hasClut&&(this._debug.clut={start:this._io.pos,ioOffset:this._io.byteOffset},this.clut=new a(this._io,this,this._root),this._debug.clut.end=this._io.pos),this._debug.img={start:this._io.pos,ioOffset:this._io.byteOffset},this.img=new a(this._io,this,this._root),this._debug.img.end=this._io.pos};var a=o.Bitmap=(function(){function s(h,_,r){this._io=h,this._parent=_,this._root=r,this._debug={},this._read()}return s.prototype._read=function(){this._debug.len={start:this._io.pos,ioOffset:this._io.byteOffset},this.len=this._io.readU4le(),this._debug.len.end=this._io.pos,this._debug.originX={start:this._io.pos,ioOffset:this._io.byteOffset},this.originX=this._io.readU2le(),this._debug.originX.end=this._io.pos,this._debug.originY={start:this._io.pos,ioOffset:this._io.byteOffset},this.originY=this._io.readU2le(),this._debug.originY.end=this._io.pos,this._debug.width={start:this._io.pos,ioOffset:this._io.byteOffset},this.width=this._io.readU2le(),this._debug.width.end=this._io.pos,this._debug.height={start:this._io.pos,ioOffset:this._io.byteOffset},this.height=this._io.readU2le(),this._debug.height.end=this._io.pos,this._debug.body={start:this._io.pos,ioOffset:this._io.byteOffset},this.body=this._io.readBytes(this.len-12),this._debug.body.end=this._io.pos},s})();return Object.defineProperty(o.prototype,"bpp",{get:function(){return this._m_bpp!==void 0?this._m_bpp:(this._debug._m_bpp={},this._m_bpp=this.flags&3,this._m_bpp)}}),Object.defineProperty(o.prototype,"hasClut",{get:function(){return this._m_hasClut!==void 0?this._m_hasClut:(this._debug._m_hasClut={},this._m_hasClut=(this.flags&8)!=0,this._m_hasClut)}}),o})();t.PsxTim=n})}});const l=u(),b={id:"psx_tim",title:"psx_tim",ksy:{meta:{id:"psx_tim",application:"Sony PlayStation (PSX) typical image format","file-extension":"tim",xref:{justsolve:"TIM_(PlayStation_graphics)",wikidata:"Q28207389"},license:"CC0-1.0","ks-version":.9,endian:"le"},"doc-ref":["http://fileformats.archiveteam.org/wiki/TIM_(PlayStation_graphics)","https://mrclick.zophar.net/TilEd/download/timgfx.txt","https://www.romhacking.net/documents/31/"],seq:[{id:"magic",contents:[16,0,0,0]},{id:"flags",type:"u4",doc:"Encodes bits-per-pixel and whether CLUT is present in a file or not"},{id:"clut",type:"bitmap",if:"has_clut",doc:"CLUT (Color LookUp Table), one or several palettes for indexed color image, represented as a"},{id:"img",type:"bitmap"}],types:{bitmap:{seq:[{id:"len",type:"u4"},{id:"origin_x",type:"u2"},{id:"origin_y",type:"u2"},{id:"width",type:"u2"},{id:"height",type:"u2"},{id:"body",size:"len - 12"}]}},instances:{has_clut:{value:"flags & 0b1000 != 0"},bpp:{value:"flags & 0b0011"}},enums:{bpp_type:{0:"bpp_4",1:"bpp_8",2:"bpp_16",3:"bpp_24"}}}};export{l as default,b as spec};
