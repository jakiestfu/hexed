import{k as y}from"./index-DZ3xxA7Z.js";var g=Object.getOwnPropertyNames,c=(_,r)=>function(){return r||(0,_[g(_)[0]])((r={exports:{}}).exports,r),r.exports},l=c({"<stdin>"(_){(function(r,o){typeof define=="function"&&define.amd?define(["exports","kaitai-struct/KaitaiStream"],o):typeof _=="object"&&_!==null&&typeof _.nodeType!="number"?o(_,y.KaitaiStream):o(r.Avi||(r.Avi={}),r.KaitaiStream)})(typeof self<"u"?self:_,function(r,o){var d=(function(){e.ChunkType=Object.freeze({IDX1:829973609,JUNK:1263424842,INFO:1330007625,ISFT:1413894985,LIST:1414744396,STRF:1718776947,AVIH:1751742049,STRH:1752331379,MOVI:1769369453,HDRL:1819436136,STRL:1819440243,829973609:"IDX1",1263424842:"JUNK",1330007625:"INFO",1413894985:"ISFT",1414744396:"LIST",1718776947:"STRF",1751742049:"AVIH",1752331379:"STRH",1769369453:"MOVI",1819436136:"HDRL",1819440243:"STRL"}),e.HandlerType=Object.freeze({MP3:85,AC3:8192,DTS:8193,CVID:1684633187,XVID:1684633208,85:"MP3",8192:"AC3",8193:"DTS",1684633187:"CVID",1684633208:"XVID"}),e.StreamType=Object.freeze({MIDS:1935960429,VIDS:1935960438,AUDS:1935963489,TXTS:1937012852,1935960429:"MIDS",1935960438:"VIDS",1935963489:"AUDS",1937012852:"TXTS"});function e(t,i,s){this._io=t,this._parent=i,this._root=s||this,this._debug={},this._read()}e.prototype._read=function(){if(this._debug.magic1={start:this._io.pos,ioOffset:this._io.byteOffset},this.magic1=this._io.readBytes(4),this._debug.magic1.end=this._io.pos,o.byteArrayCompare(this.magic1,new Uint8Array([82,73,70,70]))!=0){var t=new o.ValidationNotEqualError(new Uint8Array([82,73,70,70]),this.magic1,this._io,"/seq/0");throw this._debug.magic1.validationError=t,t}if(this._debug.fileSize={start:this._io.pos,ioOffset:this._io.byteOffset},this.fileSize=this._io.readU4le(),this._debug.fileSize.end=this._io.pos,this._debug.magic2={start:this._io.pos,ioOffset:this._io.byteOffset},this.magic2=this._io.readBytes(4),this._debug.magic2.end=this._io.pos,o.byteArrayCompare(this.magic2,new Uint8Array([65,86,73,32]))!=0){var t=new o.ValidationNotEqualError(new Uint8Array([65,86,73,32]),this.magic2,this._io,"/seq/2");throw this._debug.magic2.validationError=t,t}this._debug.data={start:this._io.pos,ioOffset:this._io.byteOffset},this._raw_data=this._io.readBytes(this.fileSize-4);var i=new o(this._raw_data);this.data=new a(i,this,this._root),this._debug.data.end=this._io.pos};var f=e.AvihBody=(function(){function t(i,s,h){this._io=i,this._parent=s,this._root=h,this._debug={},this._read()}return t.prototype._read=function(){this._debug.microSecPerFrame={start:this._io.pos,ioOffset:this._io.byteOffset},this.microSecPerFrame=this._io.readU4le(),this._debug.microSecPerFrame.end=this._io.pos,this._debug.maxBytesPerSec={start:this._io.pos,ioOffset:this._io.byteOffset},this.maxBytesPerSec=this._io.readU4le(),this._debug.maxBytesPerSec.end=this._io.pos,this._debug.paddingGranularity={start:this._io.pos,ioOffset:this._io.byteOffset},this.paddingGranularity=this._io.readU4le(),this._debug.paddingGranularity.end=this._io.pos,this._debug.flags={start:this._io.pos,ioOffset:this._io.byteOffset},this.flags=this._io.readU4le(),this._debug.flags.end=this._io.pos,this._debug.totalFrames={start:this._io.pos,ioOffset:this._io.byteOffset},this.totalFrames=this._io.readU4le(),this._debug.totalFrames.end=this._io.pos,this._debug.initialFrames={start:this._io.pos,ioOffset:this._io.byteOffset},this.initialFrames=this._io.readU4le(),this._debug.initialFrames.end=this._io.pos,this._debug.streams={start:this._io.pos,ioOffset:this._io.byteOffset},this.streams=this._io.readU4le(),this._debug.streams.end=this._io.pos,this._debug.suggestedBufferSize={start:this._io.pos,ioOffset:this._io.byteOffset},this.suggestedBufferSize=this._io.readU4le(),this._debug.suggestedBufferSize.end=this._io.pos,this._debug.width={start:this._io.pos,ioOffset:this._io.byteOffset},this.width=this._io.readU4le(),this._debug.width.end=this._io.pos,this._debug.height={start:this._io.pos,ioOffset:this._io.byteOffset},this.height=this._io.readU4le(),this._debug.height.end=this._io.pos,this._debug.reserved={start:this._io.pos,ioOffset:this._io.byteOffset},this.reserved=this._io.readBytes(16),this._debug.reserved.end=this._io.pos},t})(),n=e.Block=(function(){function t(i,s,h){this._io=i,this._parent=s,this._root=h,this._debug={},this._read()}return t.prototype._read=function(){switch(this._debug.fourCc={start:this._io.pos,ioOffset:this._io.byteOffset,enumName:"Avi.ChunkType"},this.fourCc=this._io.readU4le(),this._debug.fourCc.end=this._io.pos,this._debug.blockSize={start:this._io.pos,ioOffset:this._io.byteOffset},this.blockSize=this._io.readU4le(),this._debug.blockSize.end=this._io.pos,this._debug.data={start:this._io.pos,ioOffset:this._io.byteOffset},this.fourCc){case e.ChunkType.AVIH:this._raw_data=this._io.readBytes(this.blockSize);var i=new o(this._raw_data);this.data=new f(i,this,this._root);break;case e.ChunkType.LIST:this._raw_data=this._io.readBytes(this.blockSize);var i=new o(this._raw_data);this.data=new u(i,this,this._root);break;case e.ChunkType.STRH:this._raw_data=this._io.readBytes(this.blockSize);var i=new o(this._raw_data);this.data=new b(i,this,this._root);break;default:this.data=this._io.readBytes(this.blockSize);break}this._debug.data.end=this._io.pos},t})(),a=e.Blocks=(function(){function t(i,s,h){this._io=i,this._parent=s,this._root=h,this._debug={},this._read()}return t.prototype._read=function(){for(this._debug.entries={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.entries.arr=[],this.entries=[];!this._io.isEof();)this._debug.entries.arr[this.entries.length]={start:this._io.pos,ioOffset:this._io.byteOffset},this.entries.push(new n(this._io,this,this._root)),this._debug.entries.arr[this.entries.length-1].end=this._io.pos;this._debug.entries.end=this._io.pos},t})(),u=e.ListBody=(function(){function t(i,s,h){this._io=i,this._parent=s,this._root=h,this._debug={},this._read()}return t.prototype._read=function(){this._debug.listType={start:this._io.pos,ioOffset:this._io.byteOffset,enumName:"Avi.ChunkType"},this.listType=this._io.readU4le(),this._debug.listType.end=this._io.pos,this._debug.data={start:this._io.pos,ioOffset:this._io.byteOffset},this.data=new a(this._io,this,this._root),this._debug.data.end=this._io.pos},t})(),p=e.Rect=(function(){function t(i,s,h){this._io=i,this._parent=s,this._root=h,this._debug={},this._read()}return t.prototype._read=function(){this._debug.left={start:this._io.pos,ioOffset:this._io.byteOffset},this.left=this._io.readS2le(),this._debug.left.end=this._io.pos,this._debug.top={start:this._io.pos,ioOffset:this._io.byteOffset},this.top=this._io.readS2le(),this._debug.top.end=this._io.pos,this._debug.right={start:this._io.pos,ioOffset:this._io.byteOffset},this.right=this._io.readS2le(),this._debug.right.end=this._io.pos,this._debug.bottom={start:this._io.pos,ioOffset:this._io.byteOffset},this.bottom=this._io.readS2le(),this._debug.bottom.end=this._io.pos},t})();e.StrfBody=(function(){function t(i,s,h){this._io=i,this._parent=s,this._root=h,this._debug={},this._read()}return t.prototype._read=function(){},t})();var b=e.StrhBody=(function(){function t(i,s,h){this._io=i,this._parent=s,this._root=h,this._debug={},this._read()}return t.prototype._read=function(){this._debug.fccType={start:this._io.pos,ioOffset:this._io.byteOffset,enumName:"Avi.StreamType"},this.fccType=this._io.readU4le(),this._debug.fccType.end=this._io.pos,this._debug.fccHandler={start:this._io.pos,ioOffset:this._io.byteOffset,enumName:"Avi.HandlerType"},this.fccHandler=this._io.readU4le(),this._debug.fccHandler.end=this._io.pos,this._debug.flags={start:this._io.pos,ioOffset:this._io.byteOffset},this.flags=this._io.readU4le(),this._debug.flags.end=this._io.pos,this._debug.priority={start:this._io.pos,ioOffset:this._io.byteOffset},this.priority=this._io.readU2le(),this._debug.priority.end=this._io.pos,this._debug.language={start:this._io.pos,ioOffset:this._io.byteOffset},this.language=this._io.readU2le(),this._debug.language.end=this._io.pos,this._debug.initialFrames={start:this._io.pos,ioOffset:this._io.byteOffset},this.initialFrames=this._io.readU4le(),this._debug.initialFrames.end=this._io.pos,this._debug.scale={start:this._io.pos,ioOffset:this._io.byteOffset},this.scale=this._io.readU4le(),this._debug.scale.end=this._io.pos,this._debug.rate={start:this._io.pos,ioOffset:this._io.byteOffset},this.rate=this._io.readU4le(),this._debug.rate.end=this._io.pos,this._debug.start={start:this._io.pos,ioOffset:this._io.byteOffset},this.start=this._io.readU4le(),this._debug.start.end=this._io.pos,this._debug.length={start:this._io.pos,ioOffset:this._io.byteOffset},this.length=this._io.readU4le(),this._debug.length.end=this._io.pos,this._debug.suggestedBufferSize={start:this._io.pos,ioOffset:this._io.byteOffset},this.suggestedBufferSize=this._io.readU4le(),this._debug.suggestedBufferSize.end=this._io.pos,this._debug.quality={start:this._io.pos,ioOffset:this._io.byteOffset},this.quality=this._io.readU4le(),this._debug.quality.end=this._io.pos,this._debug.sampleSize={start:this._io.pos,ioOffset:this._io.byteOffset},this.sampleSize=this._io.readU4le(),this._debug.sampleSize.end=this._io.pos,this._debug.frame={start:this._io.pos,ioOffset:this._io.byteOffset},this.frame=new p(this._io,this,this._root),this._debug.frame.end=this._io.pos},t})();return e})();r.Avi=d})}});const O=l(),v={id:"avi",title:"Microsoft AVI file",ksy:{meta:{id:"avi",title:"Microsoft AVI file","file-extension":"avi",xref:{justsolve:"AVI",loc:"fdd000059",mime:"video/x-msvideo",pronom:"fmt/5",wikidata:"Q209054"},tags:["windows"],license:"CC0-1.0","ks-version":.7,endian:"le"},"doc-ref":"https://learn.microsoft.com/en-us/previous-versions/ms779636(v=vs.85)",seq:[{id:"magic1",contents:"RIFF"},{id:"file_size",type:"u4"},{id:"magic2",contents:"AVI "},{id:"data",type:"blocks",size:"file_size - 4"}],types:{blocks:{seq:[{id:"entries",type:"block",repeat:"eos"}]},block:{seq:[{id:"four_cc",type:"u4",enum:"chunk_type"},{id:"block_size",type:"u4"},{id:"data",size:"block_size",type:{"switch-on":"four_cc",cases:{"chunk_type::list":"list_body","chunk_type::avih":"avih_body","chunk_type::strh":"strh_body"}}}]},list_body:{seq:[{id:"list_type",type:"u4",enum:"chunk_type"},{id:"data",type:"blocks"}]},avih_body:{doc:"Main header of an AVI file, defined as AVIMAINHEADER structure","doc-ref":"https://learn.microsoft.com/en-us/previous-versions/ms779632(v=vs.85)",seq:[{id:"micro_sec_per_frame",type:"u4"},{id:"max_bytes_per_sec",type:"u4"},{id:"padding_granularity",type:"u4"},{id:"flags",type:"u4"},{id:"total_frames",type:"u4"},{id:"initial_frames",type:"u4"},{id:"streams",type:"u4"},{id:"suggested_buffer_size",type:"u4"},{id:"width",type:"u4"},{id:"height",type:"u4"},{id:"reserved",size:16}]},strh_body:{doc:"Stream header (one header per stream), defined as AVISTREAMHEADER structure","doc-ref":"https://learn.microsoft.com/en-us/previous-versions/ms779638(v=vs.85)",seq:[{id:"fcc_type",type:"u4",enum:"stream_type",doc:"Type of the data contained in the stream"},{id:"fcc_handler",type:"u4",enum:"handler_type",doc:"Type of preferred data handler for the stream (specifies codec for audio / video streams)"},{id:"flags",type:"u4"},{id:"priority",type:"u2"},{id:"language",type:"u2"},{id:"initial_frames",type:"u4"},{id:"scale",type:"u4"},{id:"rate",type:"u4"},{id:"start",type:"u4"},{id:"length",type:"u4"},{id:"suggested_buffer_size",type:"u4"},{id:"quality",type:"u4"},{id:"sample_size",type:"u4"},{id:"frame",type:"rect"}]},strf_body:{doc:"Stream format description"},rect:{seq:[{id:"left",type:"s2"},{id:"top",type:"s2"},{id:"right",type:"s2"},{id:"bottom",type:"s2"}]}},enums:{chunk_type:{829973609:"idx1",1263424842:"junk",1330007625:"info",1413894985:"isft",1414744396:"list",1718776947:"strf",1751742049:"avih",1752331379:"strh",1769369453:"movi",1819436136:"hdrl",1819440243:"strl"},stream_type:{1935960429:"mids",1935960438:"vids",1935963489:"auds",1937012852:"txts"},handler_type:{85:"mp3",8192:"ac3",8193:"dts",1684633187:"cvid",1684633208:"xvid"}}}};export{O as default,v as spec};
