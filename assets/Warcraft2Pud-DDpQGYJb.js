import{k as A}from"./index-DQZRlv-R.js";var f=Object.getOwnPropertyNames,l=(n,r)=>function(){return r||(0,n[f(n)[0]])((r={exports:{}}).exports,r),r.exports},T=l({"<stdin>"(n){(function(r,s){typeof define=="function"&&define.amd?define(["exports","kaitai-struct/KaitaiStream"],s):typeof n=="object"&&n!==null&&typeof n.nodeType!="number"?s(n,A.KaitaiStream):s(r.Warcraft2Pud||(r.Warcraft2Pud={}),r.KaitaiStream)})(typeof self<"u"?self:n,function(r,s){var d=(function(){o.Controller=Object.freeze({COMPUTER1:1,PASSIVE_COMPUTER:2,NOBODY:3,COMPUTER4:4,HUMAN:5,RESCUE_PASSIVE:6,RESCUE_ACTIVE:7,1:"COMPUTER1",2:"PASSIVE_COMPUTER",3:"NOBODY",4:"COMPUTER4",5:"HUMAN",6:"RESCUE_PASSIVE",7:"RESCUE_ACTIVE"}),o.TerrainType=Object.freeze({FOREST:0,WINTER:1,WASTELAND:2,SWAMP:3,0:"FOREST",1:"WINTER",2:"WASTELAND",3:"SWAMP"}),o.UnitType=Object.freeze({INFANTRY:0,GRUNT:1,PEASANT:2,PEON:3,BALLISTA:4,CATAPULT:5,KNIGHT:6,OGRE:7,ARCHER:8,AXETHROWER:9,MAGE:10,DEATH_KNIGHT:11,PALADIN:12,OGRE_MAGE:13,DWARVES:14,GOBLIN_SAPPER:15,ATTACK_PEASANT:16,ATTACK_PEON:17,RANGER:18,BERSERKER:19,ALLERIA:20,TERON_GOREFIEND:21,KURDAN_AND_SKY_REE:22,DENTARG:23,KHADGAR:24,GROM_HELLSCREAM:25,HUMAN_TANKER:26,ORC_TANKER:27,HUMAN_TRANSPORT:28,ORC_TRANSPORT:29,ELVEN_DESTROYER:30,TROLL_DESTROYER:31,BATTLESHIP:32,JUGGERNAUGHT:33,DEATHWING:35,GNOMISH_SUBMARINE:38,GIANT_TURTLE:39,GNOMISH_FLYING_MACHINE:40,GOBLIN_ZEPPLIN:41,GRYPHON_RIDER:42,DRAGON:43,TURALYON:44,EYE_OF_KILROGG:45,DANATH:46,KHORGATH_BLADEFIST:47,CHO_GALL:49,LOTHAR:50,GUL_DAN:51,UTHER_LIGHTBRINGER:52,ZULJIN:53,SKELETON:55,DAEMON:56,CRITTER:57,FARM:58,PIG_FARM:59,HUMAN_BARRACKS:60,ORC_BARRACKS:61,CHURCH:62,ALTAR_OF_STORMS:63,HUMAN_SCOUT_TOWER:64,ORC_SCOUT_TOWER:65,STABLES:66,OGRE_MOUND:67,GNOMISH_INVENTOR:68,GOBLIN_ALCHEMIST:69,GRYPHON_AVIARY:70,DRAGON_ROOST:71,HUMAN_SHIPYARD:72,ORC_SHIPYARD:73,TOWN_HALL:74,GREAT_HALL:75,ELVEN_LUMBER_MILL:76,TROLL_LUMBER_MILL:77,HUMAN_FOUNDRY:78,ORC_FOUNDRY:79,MAGE_TOWER:80,TEMPLE_OF_THE_DAMNED:81,HUMAN_BLACKSMITH:82,ORC_BLACKSMITH:83,HUMAN_REFINERY:84,ORC_REFINERY:85,HUMAN_OIL_WELL:86,ORC_OIL_WELL:87,KEEP:88,STRONGHOLD:89,CASTLE:90,FORTRESS:91,GOLD_MINE:92,OIL_PATCH:93,HUMAN_START:94,ORC_START:95,HUMAN_GUARD_TOWER:96,ORC_GUARD_TOWER:97,HUMAN_CANNON_TOWER:98,ORC_CANNON_TOWER:99,CIRCLE_OF_POWER:100,DARK_PORTAL:101,RUNESTONE:102,HUMAN_WALL:103,ORC_WALL:104,0:"INFANTRY",1:"GRUNT",2:"PEASANT",3:"PEON",4:"BALLISTA",5:"CATAPULT",6:"KNIGHT",7:"OGRE",8:"ARCHER",9:"AXETHROWER",10:"MAGE",11:"DEATH_KNIGHT",12:"PALADIN",13:"OGRE_MAGE",14:"DWARVES",15:"GOBLIN_SAPPER",16:"ATTACK_PEASANT",17:"ATTACK_PEON",18:"RANGER",19:"BERSERKER",20:"ALLERIA",21:"TERON_GOREFIEND",22:"KURDAN_AND_SKY_REE",23:"DENTARG",24:"KHADGAR",25:"GROM_HELLSCREAM",26:"HUMAN_TANKER",27:"ORC_TANKER",28:"HUMAN_TRANSPORT",29:"ORC_TRANSPORT",30:"ELVEN_DESTROYER",31:"TROLL_DESTROYER",32:"BATTLESHIP",33:"JUGGERNAUGHT",35:"DEATHWING",38:"GNOMISH_SUBMARINE",39:"GIANT_TURTLE",40:"GNOMISH_FLYING_MACHINE",41:"GOBLIN_ZEPPLIN",42:"GRYPHON_RIDER",43:"DRAGON",44:"TURALYON",45:"EYE_OF_KILROGG",46:"DANATH",47:"KHORGATH_BLADEFIST",49:"CHO_GALL",50:"LOTHAR",51:"GUL_DAN",52:"UTHER_LIGHTBRINGER",53:"ZULJIN",55:"SKELETON",56:"DAEMON",57:"CRITTER",58:"FARM",59:"PIG_FARM",60:"HUMAN_BARRACKS",61:"ORC_BARRACKS",62:"CHURCH",63:"ALTAR_OF_STORMS",64:"HUMAN_SCOUT_TOWER",65:"ORC_SCOUT_TOWER",66:"STABLES",67:"OGRE_MOUND",68:"GNOMISH_INVENTOR",69:"GOBLIN_ALCHEMIST",70:"GRYPHON_AVIARY",71:"DRAGON_ROOST",72:"HUMAN_SHIPYARD",73:"ORC_SHIPYARD",74:"TOWN_HALL",75:"GREAT_HALL",76:"ELVEN_LUMBER_MILL",77:"TROLL_LUMBER_MILL",78:"HUMAN_FOUNDRY",79:"ORC_FOUNDRY",80:"MAGE_TOWER",81:"TEMPLE_OF_THE_DAMNED",82:"HUMAN_BLACKSMITH",83:"ORC_BLACKSMITH",84:"HUMAN_REFINERY",85:"ORC_REFINERY",86:"HUMAN_OIL_WELL",87:"ORC_OIL_WELL",88:"KEEP",89:"STRONGHOLD",90:"CASTLE",91:"FORTRESS",92:"GOLD_MINE",93:"OIL_PATCH",94:"HUMAN_START",95:"ORC_START",96:"HUMAN_GUARD_TOWER",97:"ORC_GUARD_TOWER",98:"HUMAN_CANNON_TOWER",99:"ORC_CANNON_TOWER",100:"CIRCLE_OF_POWER",101:"DARK_PORTAL",102:"RUNESTONE",103:"HUMAN_WALL",104:"ORC_WALL"});function o(e,t,i){this._io=e,this._parent=t,this._root=i||this,this._debug={},this._read()}o.prototype._read=function(){for(this._debug.sections={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.sections.arr=[],this.sections=[];!this._io.isEof();)this._debug.sections.arr[this.sections.length]={start:this._io.pos,ioOffset:this._io.byteOffset},this.sections.push(new u(this._io,this,this._root)),this._debug.sections.arr[this.sections.length-1].end=this._io.pos;this._debug.sections.end=this._io.pos};var u=o.Section=(function(){function e(t,i,_){this._io=t,this._parent=i,this._root=_,this._debug={},this._read()}return e.prototype._read=function(){switch(this._debug.name={start:this._io.pos,ioOffset:this._io.byteOffset},this.name=s.bytesToStr(this._io.readBytes(4),"ASCII"),this._debug.name.end=this._io.pos,this._debug.size={start:this._io.pos,ioOffset:this._io.byteOffset},this.size=this._io.readU4le(),this._debug.size.end=this._io.pos,this._debug.body={start:this._io.pos,ioOffset:this._io.byteOffset},this.name){case"DIM ":this._raw_body=this._io.readBytes(this.size);var t=new s(this._raw_body);this.body=new c(t,this,this._root);break;case"ERA ":this._raw_body=this._io.readBytes(this.size);var t=new s(this._raw_body);this.body=new h(t,this,this._root);break;case"ERAX":this._raw_body=this._io.readBytes(this.size);var t=new s(this._raw_body);this.body=new h(t,this,this._root);break;case"OWNR":this._raw_body=this._io.readBytes(this.size);var t=new s(this._raw_body);this.body=new R(t,this,this._root);break;case"SGLD":this._raw_body=this._io.readBytes(this.size);var t=new s(this._raw_body);this.body=new a(t,this,this._root);break;case"SLBR":this._raw_body=this._io.readBytes(this.size);var t=new s(this._raw_body);this.body=new a(t,this,this._root);break;case"SOIL":this._raw_body=this._io.readBytes(this.size);var t=new s(this._raw_body);this.body=new a(t,this,this._root);break;case"TYPE":this._raw_body=this._io.readBytes(this.size);var t=new s(this._raw_body);this.body=new O(t,this,this._root);break;case"UNIT":this._raw_body=this._io.readBytes(this.size);var t=new s(this._raw_body);this.body=new p(t,this,this._root);break;case"VER ":this._raw_body=this._io.readBytes(this.size);var t=new s(this._raw_body);this.body=new y(t,this,this._root);break;default:this.body=this._io.readBytes(this.size);break}this._debug.body.end=this._io.pos},e})(),c=o.SectionDim=(function(){function e(t,i,_){this._io=t,this._parent=i,this._root=_,this._debug={},this._read()}return e.prototype._read=function(){this._debug.x={start:this._io.pos,ioOffset:this._io.byteOffset},this.x=this._io.readU2le(),this._debug.x.end=this._io.pos,this._debug.y={start:this._io.pos,ioOffset:this._io.byteOffset},this.y=this._io.readU2le(),this._debug.y.end=this._io.pos},e})(),h=o.SectionEra=(function(){function e(t,i,_){this._io=t,this._parent=i,this._root=_,this._debug={},this._read()}return e.prototype._read=function(){this._debug.terrain={start:this._io.pos,ioOffset:this._io.byteOffset,enumName:"Warcraft2Pud.TerrainType"},this.terrain=this._io.readU2le(),this._debug.terrain.end=this._io.pos},e})(),R=o.SectionOwnr=(function(){function e(t,i,_){this._io=t,this._parent=i,this._root=_,this._debug={},this._read()}return e.prototype._read=function(){for(this._debug.controllerByPlayer={start:this._io.pos,ioOffset:this._io.byteOffset,enumName:"Warcraft2Pud.Controller"},this._debug.controllerByPlayer.arr=[],this.controllerByPlayer=[];!this._io.isEof();)this._debug.controllerByPlayer.arr[this.controllerByPlayer.length]={start:this._io.pos,ioOffset:this._io.byteOffset,enumName:"Warcraft2Pud.Controller"},this.controllerByPlayer.push(this._io.readU1()),this._debug.controllerByPlayer.arr[this.controllerByPlayer.length-1].end=this._io.pos;this._debug.controllerByPlayer.end=this._io.pos},e})(),a=o.SectionStartingResource=(function(){function e(t,i,_){this._io=t,this._parent=i,this._root=_,this._debug={},this._read()}return e.prototype._read=function(){for(this._debug.resourcesByPlayer={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.resourcesByPlayer.arr=[],this.resourcesByPlayer=[];!this._io.isEof();)this._debug.resourcesByPlayer.arr[this.resourcesByPlayer.length]={start:this._io.pos,ioOffset:this._io.byteOffset},this.resourcesByPlayer.push(this._io.readU2le()),this._debug.resourcesByPlayer.arr[this.resourcesByPlayer.length-1].end=this._io.pos;this._debug.resourcesByPlayer.end=this._io.pos},e})(),O=o.SectionType=(function(){function e(t,i,_){this._io=t,this._parent=i,this._root=_,this._debug={},this._read()}return e.prototype._read=function(){if(this._debug.magic={start:this._io.pos,ioOffset:this._io.byteOffset},this.magic=this._io.readBytes(10),this._debug.magic.end=this._io.pos,s.byteArrayCompare(this.magic,new Uint8Array([87,65,82,50,32,77,65,80,0,0]))!=0){var t=new s.ValidationNotEqualError(new Uint8Array([87,65,82,50,32,77,65,80,0,0]),this.magic,this._io,"/types/section_type/seq/0");throw this._debug.magic.validationError=t,t}this._debug.unused={start:this._io.pos,ioOffset:this._io.byteOffset},this.unused=this._io.readBytes(2),this._debug.unused.end=this._io.pos,this._debug.idTag={start:this._io.pos,ioOffset:this._io.byteOffset},this.idTag=this._io.readU4le(),this._debug.idTag.end=this._io.pos},e})(),p=o.SectionUnit=(function(){function e(t,i,_){this._io=t,this._parent=i,this._root=_,this._debug={},this._read()}return e.prototype._read=function(){for(this._debug.units={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.units.arr=[],this.units=[];!this._io.isEof();)this._debug.units.arr[this.units.length]={start:this._io.pos,ioOffset:this._io.byteOffset},this.units.push(new E(this._io,this,this._root)),this._debug.units.arr[this.units.length-1].end=this._io.pos;this._debug.units.end=this._io.pos},e})(),y=o.SectionVer=(function(){function e(t,i,_){this._io=t,this._parent=i,this._root=_,this._debug={},this._read()}return e.prototype._read=function(){this._debug.version={start:this._io.pos,ioOffset:this._io.byteOffset},this.version=this._io.readU2le(),this._debug.version.end=this._io.pos},e})(),E=o.Unit=(function(){function e(t,i,_){this._io=t,this._parent=i,this._root=_,this._debug={},this._read()}return e.prototype._read=function(){this._debug.x={start:this._io.pos,ioOffset:this._io.byteOffset},this.x=this._io.readU2le(),this._debug.x.end=this._io.pos,this._debug.y={start:this._io.pos,ioOffset:this._io.byteOffset},this.y=this._io.readU2le(),this._debug.y.end=this._io.pos,this._debug.uType={start:this._io.pos,ioOffset:this._io.byteOffset,enumName:"Warcraft2Pud.UnitType"},this.uType=this._io.readU1(),this._debug.uType.end=this._io.pos,this._debug.owner={start:this._io.pos,ioOffset:this._io.byteOffset},this.owner=this._io.readU1(),this._debug.owner.end=this._io.pos,this._debug.options={start:this._io.pos,ioOffset:this._io.byteOffset},this.options=this._io.readU2le(),this._debug.options.end=this._io.pos},Object.defineProperty(e.prototype,"resource",{get:function(){return this._m_resource!==void 0?this._m_resource:((this.uType==o.UnitType.GOLD_MINE||this.uType==o.UnitType.HUMAN_OIL_WELL||this.uType==o.UnitType.ORC_OIL_WELL||this.uType==o.UnitType.OIL_PATCH)&&(this._debug._m_resource={},this._m_resource=this.options*2500),this._m_resource)}}),e})();return o})();r.Warcraft2Pud=d})}});const b=T(),g={id:"warcraft_2_pud",title:"Warcraft II map files",ksy:{meta:{id:"warcraft_2_pud",title:"Warcraft II map files",application:"Warcraft II engine","file-extension":"pud",xref:{justsolve:"Warcraft_II_PUD",wikidata:"Q28009492"},license:"CC0-1.0","ks-version":.6,endian:"le"},doc:`Warcraft II game engine uses this format for map files. External
maps can be edited by official Warcraft II map editor and saved in
.pud files. Maps supplied with the game (i.e. single player
campaign) follow the same format, but are instead embedded inside
the game container files.

There are two major versions: 0x11 (original one) and 0x13 (roughly
corresponds to v1.33 of the game engine, although some of the
features got limited support in v1.3).

File consists of a sequence of typed sections.
`,"doc-ref":"http://cade.datamax.bg/war2x/pudspec.html",seq:[{id:"sections",type:"section",repeat:"eos"}],types:{section:{seq:[{id:"name",type:"str",size:4,encoding:"ASCII"},{id:"size",type:"u4"},{id:"body",size:"size",type:{"switch-on":"name",cases:{'"TYPE"':"section_type",'"VER "':"section_ver",'"OWNR"':"section_ownr",'"ERA "':"section_era",'"ERAX"':"section_era",'"DIM "':"section_dim",'"SGLD"':"section_starting_resource",'"SLBR"':"section_starting_resource",'"SOIL"':"section_starting_resource",'"UNIT"':"section_unit"}}}]},section_type:{doc:`Section that confirms that this file is a "map file" by certain
magic string and supplies a tag that could be used in
multiplayer to check that all player use the same version of the
map.
`,seq:[{id:"magic",contents:["WAR2 MAP",0,0]},{id:"unused",size:2,doc:"unused (always set to $0a and $ff by editor, but can be anything for the game)"},{id:"id_tag",type:"u4",doc:"id tag (for consistency check in multiplayer)"}]},section_ver:{doc:"Section that specifies format version.",seq:[{id:"version",type:"u2"}]},section_ownr:{doc:"Section that specifies who controls each player.",seq:[{id:"controller_by_player",type:"u1",enum:"controller",repeat:"eos"}]},section_era:{doc:"Section that specifies terrain type for this map.",seq:[{id:"terrain",type:"u2",enum:"terrain_type"}]},section_dim:{seq:[{id:"x",type:"u2"},{id:"y",type:"u2"}]},section_starting_resource:{seq:[{id:"resources_by_player",type:"u2",repeat:"eos"}]},section_unit:{seq:[{id:"units",type:"unit",repeat:"eos"}]},unit:{seq:[{id:"x",type:"u2"},{id:"y",type:"u2"},{id:"u_type",type:"u1",enum:"unit_type"},{id:"owner",type:"u1"},{id:"options",type:"u2",doc:"if gold mine or oil well, contains 2500 * this, otherwise 0 passive 1 active"}],instances:{resource:{value:"options * 2500",if:`u_type == unit_type::gold_mine or u_type == unit_type::human_oil_well or u_type == unit_type::orc_oil_well or u_type == unit_type::oil_patch
`}}}},enums:{controller:{1:"computer1",2:"passive_computer",3:"nobody",4:"computer4",5:"human",6:"rescue_passive",7:"rescue_active"},terrain_type:{0:"forest",1:"winter",2:"wasteland",3:"swamp"},unit_type:{0:"infantry",1:"grunt",2:"peasant",3:"peon",4:"ballista",5:"catapult",6:"knight",7:"ogre",8:"archer",9:"axethrower",10:"mage",11:"death_knight",12:"paladin",13:"ogre_mage",14:"dwarves",15:"goblin_sapper",16:"attack_peasant",17:"attack_peon",18:"ranger",19:"berserker",20:"alleria",21:"teron_gorefiend",22:"kurdan_and_sky_ree",23:"dentarg",24:"khadgar",25:"grom_hellscream",26:"human_tanker",27:"orc_tanker",28:"human_transport",29:"orc_transport",30:"elven_destroyer",31:"troll_destroyer",32:"battleship",33:"juggernaught",35:"deathwing",38:"gnomish_submarine",39:"giant_turtle",40:"gnomish_flying_machine",41:"goblin_zepplin",42:"gryphon_rider",43:"dragon",44:"turalyon",45:"eye_of_kilrogg",46:"danath",47:"khorgath_bladefist",49:"cho_gall",50:"lothar",51:"gul_dan",52:"uther_lightbringer",53:"zuljin",55:"skeleton",56:"daemon",57:"critter",58:"farm",59:"pig_farm",60:"human_barracks",61:"orc_barracks",62:"church",63:"altar_of_storms",64:"human_scout_tower",65:"orc_scout_tower",66:"stables",67:"ogre_mound",68:"gnomish_inventor",69:"goblin_alchemist",70:"gryphon_aviary",71:"dragon_roost",72:"human_shipyard",73:"orc_shipyard",74:"town_hall",75:"great_hall",76:"elven_lumber_mill",77:"troll_lumber_mill",78:"human_foundry",79:"orc_foundry",80:"mage_tower",81:"temple_of_the_damned",82:"human_blacksmith",83:"orc_blacksmith",84:"human_refinery",85:"orc_refinery",86:"human_oil_well",87:"orc_oil_well",88:"keep",89:"stronghold",90:"castle",91:"fortress",92:"gold_mine",93:"oil_patch",94:"human_start",95:"orc_start",96:"human_guard_tower",97:"orc_guard_tower",98:"human_cannon_tower",99:"orc_cannon_tower",100:"circle_of_power",101:"dark_portal",102:"runestone",103:"human_wall",104:"orc_wall"}}}};export{b as default,g as spec};
