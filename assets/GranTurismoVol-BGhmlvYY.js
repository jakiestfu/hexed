import{k as d}from"./index-ik_lyK6M.js";var a=Object.getOwnPropertyNames,u=(o,e)=>function(){return e||(0,o[a(o)[0]])((e={exports:{}}).exports,e),e.exports},p=u({"<stdin>"(o){(function(e,s){typeof define=="function"&&define.amd?define(["exports","kaitai-struct/KaitaiStream"],s):typeof o=="object"&&o!==null&&typeof o.nodeType!="number"?s(o,d.KaitaiStream):s(e.GranTurismoVol||(e.GranTurismoVol={}),e.KaitaiStream)})(typeof self<"u"?self:o,function(e,s){var f=(function(){function r(t,i,_){this._io=t,this._parent=i,this._root=_||this,this._debug={},this._read()}r.prototype._read=function(){if(this._debug.magic={start:this._io.pos,ioOffset:this._io.byteOffset},this.magic=this._io.readBytes(8),this._debug.magic.end=this._io.pos,s.byteArrayCompare(this.magic,new Uint8Array([71,84,70,83,0,0,0,0]))!=0){var t=new s.ValidationNotEqualError(new Uint8Array([71,84,70,83,0,0,0,0]),this.magic,this._io,"/seq/0");throw this._debug.magic.validationError=t,t}if(this._debug.numFiles={start:this._io.pos,ioOffset:this._io.byteOffset},this.numFiles=this._io.readU2le(),this._debug.numFiles.end=this._io.pos,this._debug.numEntries={start:this._io.pos,ioOffset:this._io.byteOffset},this.numEntries=this._io.readU2le(),this._debug.numEntries.end=this._io.pos,this._debug.reserved={start:this._io.pos,ioOffset:this._io.byteOffset},this.reserved=this._io.readBytes(4),this._debug.reserved.end=this._io.pos,s.byteArrayCompare(this.reserved,new Uint8Array([0,0,0,0]))!=0){var t=new s.ValidationNotEqualError(new Uint8Array([0,0,0,0]),this.reserved,this._io,"/seq/3");throw this._debug.reserved.validationError=t,t}this._debug.offsets={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.offsets.arr=[],this.offsets=[];for(var i=0;i<this.numFiles;i++)this._debug.offsets.arr[i]={start:this._io.pos,ioOffset:this._io.byteOffset},this.offsets.push(this._io.readU4le()),this._debug.offsets.arr[i].end=this._io.pos;this._debug.offsets.end=this._io.pos};var h=r.FileInfo=(function(){function t(i,_,n){this._io=i,this._parent=_,this._root=n,this._debug={},this._read()}return t.prototype._read=function(){this._debug.timestamp={start:this._io.pos,ioOffset:this._io.byteOffset},this.timestamp=this._io.readU4le(),this._debug.timestamp.end=this._io.pos,this._debug.offsetIdx={start:this._io.pos,ioOffset:this._io.byteOffset},this.offsetIdx=this._io.readU2le(),this._debug.offsetIdx.end=this._io.pos,this._debug.flags={start:this._io.pos,ioOffset:this._io.byteOffset},this.flags=this._io.readU1(),this._debug.flags.end=this._io.pos,this._debug.name={start:this._io.pos,ioOffset:this._io.byteOffset},this.name=s.bytesToStr(s.bytesTerminate(s.bytesStripRight(this._io.readBytes(25),0),0,!1),"ASCII"),this._debug.name.end=this._io.pos},Object.defineProperty(t.prototype,"body",{get:function(){if(this._m_body!==void 0)return this._m_body;if(!this.isDir){var i=this._io.pos;this._io.seek(this._root.offsets[this.offsetIdx]&4294965248),this._debug._m_body={start:this._io.pos,ioOffset:this._io.byteOffset},this._m_body=this._io.readBytes(this.size),this._debug._m_body.end=this._io.pos,this._io.seek(i)}return this._m_body}}),Object.defineProperty(t.prototype,"isDir",{get:function(){return this._m_isDir!==void 0?this._m_isDir:(this._debug._m_isDir={},this._m_isDir=(this.flags&1)!=0,this._m_isDir)}}),Object.defineProperty(t.prototype,"isLastEntry",{get:function(){return this._m_isLastEntry!==void 0?this._m_isLastEntry:(this._debug._m_isLastEntry={},this._m_isLastEntry=(this.flags&128)!=0,this._m_isLastEntry)}}),Object.defineProperty(t.prototype,"size",{get:function(){return this._m_size!==void 0?this._m_size:(this._debug._m_size={},this._m_size=(this._root.offsets[this.offsetIdx+1]&4294965248)-this._root.offsets[this.offsetIdx],this._m_size)}}),t})();return Object.defineProperty(r.prototype,"files",{get:function(){if(this._m_files!==void 0)return this._m_files;var t=this._io.pos;this._io.seek(this.ofsDir&4294965248),this._debug._m_files={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug._m_files.arr=[],this._m_files=[];for(var i=0;i<this._root.numEntries;i++)this._debug._m_files.arr[i]={start:this._io.pos,ioOffset:this._io.byteOffset},this._m_files.push(new h(this._io,this,this._root)),this._debug._m_files.arr[i].end=this._io.pos;return this._debug._m_files.end=this._io.pos,this._io.seek(t),this._m_files}}),Object.defineProperty(r.prototype,"ofsDir",{get:function(){return this._m_ofsDir!==void 0?this._m_ofsDir:(this._debug._m_ofsDir={},this._m_ofsDir=this.offsets[1],this._m_ofsDir)}}),r})();e.GranTurismoVol=f})}});const y=p(),l={id:"gran_turismo_vol",title:"Gran Turismo File System (GTFS)",ksy:{meta:{id:"gran_turismo_vol",title:"Gran Turismo File System (GTFS)","file-extension":"vol",xref:{wikidata:"Q32096599"},license:"CC0-1.0",endian:"le"},seq:[{id:"magic",contents:["GTFS",0,0,0,0]},{id:"num_files",type:"u2"},{id:"num_entries",type:"u2"},{id:"reserved",contents:[0,0,0,0]},{id:"offsets",type:"u4",repeat:"expr","repeat-expr":"num_files"}],instances:{ofs_dir:{value:"offsets[1]"},files:{pos:"ofs_dir & 0xFFFFF800",type:"file_info",repeat:"expr","repeat-expr":"_root.num_entries"}},types:{file_info:{seq:[{id:"timestamp",type:"u4"},{id:"offset_idx",type:"u2"},{id:"flags",type:"u1"},{id:"name",type:"str",encoding:"ASCII",size:25,"pad-right":0,terminator:0}],instances:{size:{value:"(_root.offsets[offset_idx + 1] & 0xFFFFF800) - _root.offsets[offset_idx]"},body:{pos:"_root.offsets[offset_idx] & 0xFFFFF800",size:"size",if:"not is_dir"},is_dir:{value:"flags & 1 != 0"},is_last_entry:{value:"flags & 0x80 != 0"}}}}}};export{y as default,l as spec};
