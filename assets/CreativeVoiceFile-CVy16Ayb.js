import{k as f}from"./index-COA_x_BK.js";var y=Object.getOwnPropertyNames,m=(r,a)=>function(){return a||(0,r[y(r)[0]])((a={exports:{}}).exports,a),a.exports},k=m({"<stdin>"(r){(function(a,o){typeof define=="function"&&define.amd?define(["exports","kaitai-struct/KaitaiStream"],o):typeof r=="object"&&r!==null&&typeof r.nodeType!="number"?o(r,f.KaitaiStream):o(a.CreativeVoiceFile||(a.CreativeVoiceFile={}),a.KaitaiStream)})(typeof self<"u"?self:r,function(a,o){var d=(function(){i.BlockTypes=Object.freeze({TERMINATOR:0,SOUND_DATA:1,SOUND_DATA_CONT:2,SILENCE:3,MARKER:4,TEXT:5,REPEAT_START:6,REPEAT_END:7,EXTRA_INFO:8,SOUND_DATA_NEW:9,0:"TERMINATOR",1:"SOUND_DATA",2:"SOUND_DATA_CONT",3:"SILENCE",4:"MARKER",5:"TEXT",6:"REPEAT_START",7:"REPEAT_END",8:"EXTRA_INFO",9:"SOUND_DATA_NEW"}),i.Codecs=Object.freeze({PCM_8BIT_UNSIGNED:0,ADPCM_4BIT:1,ADPCM_2_6BIT:2,ADPCM_2_BIT:3,PCM_16BIT_SIGNED:4,ALAW:6,ULAW:7,ADPCM_4_TO_16BIT:512,0:"PCM_8BIT_UNSIGNED",1:"ADPCM_4BIT",2:"ADPCM_2_6BIT",3:"ADPCM_2_BIT",4:"PCM_16BIT_SIGNED",6:"ALAW",7:"ULAW",512:"ADPCM_4_TO_16BIT"});function i(e,t,s){this._io=e,this._parent=t,this._root=s||this,this._debug={},this._read()}i.prototype._read=function(){if(this._debug.magic={start:this._io.pos,ioOffset:this._io.byteOffset},this.magic=this._io.readBytes(20),this._debug.magic.end=this._io.pos,o.byteArrayCompare(this.magic,new Uint8Array([67,114,101,97,116,105,118,101,32,86,111,105,99,101,32,70,105,108,101,26]))!=0){var e=new o.ValidationNotEqualError(new Uint8Array([67,114,101,97,116,105,118,101,32,86,111,105,99,101,32,70,105,108,101,26]),this.magic,this._io,"/seq/0");throw this._debug.magic.validationError=e,e}for(this._debug.headerSize={start:this._io.pos,ioOffset:this._io.byteOffset},this.headerSize=this._io.readU2le(),this._debug.headerSize.end=this._io.pos,this._debug.version={start:this._io.pos,ioOffset:this._io.byteOffset},this.version=this._io.readU2le(),this._debug.version.end=this._io.pos,this._debug.checksum={start:this._io.pos,ioOffset:this._io.byteOffset},this.checksum=this._io.readU2le(),this._debug.checksum.end=this._io.pos,this._debug.blocks={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.blocks.arr=[],this.blocks=[];!this._io.isEof();)this._debug.blocks.arr[this.blocks.length]={start:this._io.pos,ioOffset:this._io.byteOffset},this.blocks.push(new n(this._io,this,this._root)),this._debug.blocks.arr[this.blocks.length-1].end=this._io.pos;this._debug.blocks.end=this._io.pos};var n=i.Block=(function(){function e(t,s,_){this._io=t,this._parent=s,this._root=_,this._debug={},this._read()}return e.prototype._read=function(){if(this._debug.blockType={start:this._io.pos,ioOffset:this._io.byteOffset,enumName:"CreativeVoiceFile.BlockTypes"},this.blockType=this._io.readU1(),this._debug.blockType.end=this._io.pos,this.blockType!=i.BlockTypes.TERMINATOR&&(this._debug.bodySize1={start:this._io.pos,ioOffset:this._io.byteOffset},this.bodySize1=this._io.readU2le(),this._debug.bodySize1.end=this._io.pos),this.blockType!=i.BlockTypes.TERMINATOR&&(this._debug.bodySize2={start:this._io.pos,ioOffset:this._io.byteOffset},this.bodySize2=this._io.readU1(),this._debug.bodySize2.end=this._io.pos),this.blockType!=i.BlockTypes.TERMINATOR){switch(this._debug.body={start:this._io.pos,ioOffset:this._io.byteOffset},this.blockType){case i.BlockTypes.EXTRA_INFO:this._raw_body=this._io.readBytes(this.bodySize);var t=new o(this._raw_body);this.body=new h(t,this,this._root);break;case i.BlockTypes.MARKER:this._raw_body=this._io.readBytes(this.bodySize);var t=new o(this._raw_body);this.body=new c(t,this,this._root);break;case i.BlockTypes.REPEAT_START:this._raw_body=this._io.readBytes(this.bodySize);var t=new o(this._raw_body);this.body=new u(t,this,this._root);break;case i.BlockTypes.SILENCE:this._raw_body=this._io.readBytes(this.bodySize);var t=new o(this._raw_body);this.body=new p(t,this,this._root);break;case i.BlockTypes.SOUND_DATA:this._raw_body=this._io.readBytes(this.bodySize);var t=new o(this._raw_body);this.body=new l(t,this,this._root);break;case i.BlockTypes.SOUND_DATA_NEW:this._raw_body=this._io.readBytes(this.bodySize);var t=new o(this._raw_body);this.body=new b(t,this,this._root);break;default:this.body=this._io.readBytes(this.bodySize);break}this._debug.body.end=this._io.pos}},Object.defineProperty(e.prototype,"bodySize",{get:function(){return this._m_bodySize!==void 0?this._m_bodySize:(this.blockType!=i.BlockTypes.TERMINATOR&&(this._debug._m_bodySize={},this._m_bodySize=this.bodySize1+(this.bodySize2<<16)),this._m_bodySize)}}),e})(),h=i.BlockExtraInfo=(function(){function e(t,s,_){this._io=t,this._parent=s,this._root=_,this._debug={},this._read()}return e.prototype._read=function(){this._debug.freqDiv={start:this._io.pos,ioOffset:this._io.byteOffset},this.freqDiv=this._io.readU2le(),this._debug.freqDiv.end=this._io.pos,this._debug.codec={start:this._io.pos,ioOffset:this._io.byteOffset,enumName:"CreativeVoiceFile.Codecs"},this.codec=this._io.readU1(),this._debug.codec.end=this._io.pos,this._debug.numChannels1={start:this._io.pos,ioOffset:this._io.byteOffset},this.numChannels1=this._io.readU1(),this._debug.numChannels1.end=this._io.pos},Object.defineProperty(e.prototype,"numChannels",{get:function(){return this._m_numChannels!==void 0?this._m_numChannels:(this._debug._m_numChannels={},this._m_numChannels=this.numChannels1+1,this._m_numChannels)}}),Object.defineProperty(e.prototype,"sampleRate",{get:function(){return this._m_sampleRate!==void 0?this._m_sampleRate:(this._debug._m_sampleRate={},this._m_sampleRate=256e6/(this.numChannels*(65536-this.freqDiv)),this._m_sampleRate)}}),e})(),c=i.BlockMarker=(function(){function e(t,s,_){this._io=t,this._parent=s,this._root=_,this._debug={},this._read()}return e.prototype._read=function(){this._debug.markerId={start:this._io.pos,ioOffset:this._io.byteOffset},this.markerId=this._io.readU2le(),this._debug.markerId.end=this._io.pos},e})(),u=i.BlockRepeatStart=(function(){function e(t,s,_){this._io=t,this._parent=s,this._root=_,this._debug={},this._read()}return e.prototype._read=function(){this._debug.repeatCount1={start:this._io.pos,ioOffset:this._io.byteOffset},this.repeatCount1=this._io.readU2le(),this._debug.repeatCount1.end=this._io.pos},e})(),p=i.BlockSilence=(function(){function e(t,s,_){this._io=t,this._parent=s,this._root=_,this._debug={},this._read()}return e.prototype._read=function(){this._debug.durationSamples={start:this._io.pos,ioOffset:this._io.byteOffset},this.durationSamples=this._io.readU2le(),this._debug.durationSamples.end=this._io.pos,this._debug.freqDiv={start:this._io.pos,ioOffset:this._io.byteOffset},this.freqDiv=this._io.readU1(),this._debug.freqDiv.end=this._io.pos},Object.defineProperty(e.prototype,"durationSec",{get:function(){return this._m_durationSec!==void 0?this._m_durationSec:(this._debug._m_durationSec={},this._m_durationSec=this.durationSamples/this.sampleRate,this._m_durationSec)}}),Object.defineProperty(e.prototype,"sampleRate",{get:function(){return this._m_sampleRate!==void 0?this._m_sampleRate:(this._debug._m_sampleRate={},this._m_sampleRate=1e6/(256-this.freqDiv),this._m_sampleRate)}}),e})(),l=i.BlockSoundData=(function(){function e(t,s,_){this._io=t,this._parent=s,this._root=_,this._debug={},this._read()}return e.prototype._read=function(){this._debug.freqDiv={start:this._io.pos,ioOffset:this._io.byteOffset},this.freqDiv=this._io.readU1(),this._debug.freqDiv.end=this._io.pos,this._debug.codec={start:this._io.pos,ioOffset:this._io.byteOffset,enumName:"CreativeVoiceFile.Codecs"},this.codec=this._io.readU1(),this._debug.codec.end=this._io.pos,this._debug.wave={start:this._io.pos,ioOffset:this._io.byteOffset},this.wave=this._io.readBytesFull(),this._debug.wave.end=this._io.pos},Object.defineProperty(e.prototype,"sampleRate",{get:function(){return this._m_sampleRate!==void 0?this._m_sampleRate:(this._debug._m_sampleRate={},this._m_sampleRate=1e6/(256-this.freqDiv),this._m_sampleRate)}}),e})(),b=i.BlockSoundDataNew=(function(){function e(t,s,_){this._io=t,this._parent=s,this._root=_,this._debug={},this._read()}return e.prototype._read=function(){this._debug.sampleRate={start:this._io.pos,ioOffset:this._io.byteOffset},this.sampleRate=this._io.readU4le(),this._debug.sampleRate.end=this._io.pos,this._debug.bitsPerSample={start:this._io.pos,ioOffset:this._io.byteOffset},this.bitsPerSample=this._io.readU1(),this._debug.bitsPerSample.end=this._io.pos,this._debug.numChannels={start:this._io.pos,ioOffset:this._io.byteOffset},this.numChannels=this._io.readU1(),this._debug.numChannels.end=this._io.pos,this._debug.codec={start:this._io.pos,ioOffset:this._io.byteOffset,enumName:"CreativeVoiceFile.Codecs"},this.codec=this._io.readU2le(),this._debug.codec.end=this._io.pos,this._debug.reserved={start:this._io.pos,ioOffset:this._io.byteOffset},this.reserved=this._io.readBytes(4),this._debug.reserved.end=this._io.pos,this._debug.wave={start:this._io.pos,ioOffset:this._io.byteOffset},this.wave=this._io.readBytesFull(),this._debug.wave.end=this._io.pos},e})();return i})();a.CreativeVoiceFile=d})}});const g=k(),O={id:"creative_voice_file",title:"Creative Voice File",ksy:{meta:{id:"creative_voice_file",title:"Creative Voice File","file-extension":"voc",xref:{justsolve:"Creative_Voice_File",mime:"audio/x-voc",wikidata:"Q27967410"},license:"CC0-1.0",endian:"le"},doc:`Creative Voice File is a container file format for digital audio
wave data. Initial revisions were able to support only unsigned
8-bit PCM and ADPCM data, later versions were revised to add support
for 16-bit PCM and a-law / u-law formats.

This format was actively used in 1990s, around the advent of
Creative's sound cards (Sound Blaster family). It was a popular
choice for a digital sound container in lots of games and multimedia
software due to simplicity and availability of Creative's recording
/ editing tools.
`,"doc-ref":"https://wiki.multimedia.cx/index.php?title=Creative_Voice",seq:[{id:"magic",contents:["Creative Voice File",26]},{id:"header_size",type:"u2",doc:"Total size of this main header (usually 0x001A)"},{id:"version",type:"u2"},{id:"checksum",type:"u2",doc:"Checksum: this must be equal to ~version + 0x1234"},{id:"blocks",type:"block",repeat:"eos",doc:"Series of blocks that contain the actual audio data"}],types:{block:{seq:[{id:"block_type",type:"u1",enum:"block_types",doc:"Byte that determines type of block content"},{id:"body_size1",type:"u2",if:"block_type != block_types::terminator"},{id:"body_size2",type:"u1",if:"block_type != block_types::terminator"},{id:"body",size:"body_size",type:{"switch-on":"block_type",cases:{"block_types::sound_data":"block_sound_data","block_types::silence":"block_silence","block_types::marker":"block_marker","block_types::repeat_start":"block_repeat_start","block_types::extra_info":"block_extra_info","block_types::sound_data_new":"block_sound_data_new"}},if:"block_type != block_types::terminator",doc:"Block body, type depends on block type byte"}],instances:{body_size:{value:"body_size1 + (body_size2 << 16)",if:"block_type != block_types::terminator",doc:`body_size is a 24-bit little-endian integer, so we're
emulating that by adding two standard-sized integers
(body_size1 and body_size2).
`}}},block_sound_data:{"doc-ref":"https://wiki.multimedia.cx/index.php?title=Creative_Voice#Block_type_0x01:_Sound_data",seq:[{id:"freq_div",type:"u1",doc:"Frequency divisor, used to determine sample rate"},{id:"codec",type:"u1",enum:"codecs"},{id:"wave","size-eos":!0}],instances:{sample_rate:{value:"1000000.0 / (256 - freq_div)"}}},block_silence:{"doc-ref":"https://wiki.multimedia.cx/index.php?title=Creative_Voice#Block_type_0x03:_Silence",seq:[{id:"duration_samples",type:"u2",doc:"Duration of silence, in samples"},{id:"freq_div",type:"u1",doc:"Frequency divisor, used to determine sample rate"}],instances:{sample_rate:{value:"1000000.0 / (256 - freq_div)"},duration_sec:{value:"duration_samples / sample_rate",doc:"Duration of silence, in seconds"}}},block_marker:{"doc-ref":"https://wiki.multimedia.cx/index.php?title=Creative_Voice#Block_type_0x04:_Marker",seq:[{id:"marker_id",type:"u2",doc:"Marker ID"}]},block_repeat_start:{"doc-ref":"https://wiki.multimedia.cx/index.php?title=Creative_Voice#Block_type_0x06:_Repeat_start",seq:[{id:"repeat_count_1",type:"u2",doc:"Number of repetitions minus 1; 0xffff means infinite repetitions"}]},block_extra_info:{"doc-ref":"https://wiki.multimedia.cx/index.php?title=Creative_Voice#Block_type_0x08:_Extra_info",seq:[{id:"freq_div",type:"u2",doc:"Frequency divisor"},{id:"codec",type:"u1",enum:"codecs"},{id:"num_channels_1",type:"u1",doc:"Number of channels minus 1 (0 = mono, 1 = stereo)"}],instances:{num_channels:{value:"num_channels_1 + 1",doc:"Number of channels (1 = mono, 2 = stereo)"},sample_rate:{value:"256000000.0 / (num_channels * (65536 - freq_div))"}}},block_sound_data_new:{"doc-ref":"https://wiki.multimedia.cx/index.php?title=Creative_Voice#Block_type_0x09:_Sound_data_.28New_format.29",seq:[{id:"sample_rate",type:"u4"},{id:"bits_per_sample",type:"u1"},{id:"num_channels",type:"u1"},{id:"codec",type:"u2",enum:"codecs"},{id:"reserved",size:4},{id:"wave","size-eos":!0}]}},enums:{block_types:{0:"terminator",1:"sound_data",2:"sound_data_cont",3:"silence",4:"marker",5:"text",6:"repeat_start",7:"repeat_end",8:"extra_info",9:"sound_data_new"},codecs:{0:"pcm_8bit_unsigned",1:"adpcm_4bit",2:"adpcm_2_6bit",3:"adpcm_2_bit",4:"pcm_16bit_signed",6:"alaw",7:"ulaw",512:"adpcm_4_to_16bit"}}}};export{g as default,O as spec};
