import{k}from"./index-CMEpbKl5.js";var C=Object.getOwnPropertyNames,T=(a,h)=>function(){return h||(0,a[C(a)[0]])((h={exports:{}}).exports,h),h.exports},I=T({"<stdin>"(a){(function(h,r){typeof define=="function"&&define.amd?define(["exports","kaitai-struct/KaitaiStream"],r):typeof a=="object"&&a!==null&&typeof a.nodeType!="number"?r(a,k.KaitaiStream):r(h.Gif||(h.Gif={}),h.KaitaiStream)})(typeof self<"u"?self:a,function(h,r){var d=(function(){o.BlockType=Object.freeze({EXTENSION:33,LOCAL_IMAGE_DESCRIPTOR:44,END_OF_FILE:59,33:"EXTENSION",44:"LOCAL_IMAGE_DESCRIPTOR",59:"END_OF_FILE"}),o.ExtensionLabel=Object.freeze({GRAPHIC_CONTROL:249,COMMENT:254,APPLICATION:255,249:"GRAPHIC_CONTROL",254:"COMMENT",255:"APPLICATION"});function o(t,i,e){this._io=t,this._parent=i,this._root=e||this,this._debug={},this._read()}o.prototype._read=function(){if(this._debug.hdr={start:this._io.pos,ioOffset:this._io.byteOffset},this.hdr=new y(this._io,this,this._root),this._debug.hdr.end=this._io.pos,this._debug.logicalScreenDescriptor={start:this._io.pos,ioOffset:this._io.byteOffset},this.logicalScreenDescriptor=new w(this._io,this,this._root),this._debug.logicalScreenDescriptor.end=this._io.pos,this.logicalScreenDescriptor.hasColorTable){this._debug.globalColorTable={start:this._io.pos,ioOffset:this._io.byteOffset},this._raw_globalColorTable=this._io.readBytes(this.logicalScreenDescriptor.colorTableSize*3);var t=new r(this._raw_globalColorTable);this.globalColorTable=new n(t,this,this._root),this._debug.globalColorTable.end=this._io.pos}this._debug.blocks={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.blocks.arr=[],this.blocks=[];do{this._debug.blocks.arr[this.blocks.length]={start:this._io.pos,ioOffset:this._io.byteOffset};var i=new p(this._io,this,this._root);this.blocks.push(i),this._debug.blocks.arr[this.blocks.length-1].end=this._io.pos}while(!(this._io.isEof()||i.blockType==o.BlockType.END_OF_FILE));this._debug.blocks.end=this._io.pos};var b=o.ApplicationId=(function(){function t(i,e,s){this._io=i,this._parent=e,this._root=s,this._debug={},this._read()}return t.prototype._read=function(){if(this._debug.lenBytes={start:this._io.pos,ioOffset:this._io.byteOffset},this.lenBytes=this._io.readU1(),this._debug.lenBytes.end=this._io.pos,this.lenBytes!=11){var i=new r.ValidationNotEqualError(11,this.lenBytes,this._io,"/types/application_id/seq/0");throw this._debug.lenBytes.validationError=i,i}this._debug.applicationIdentifier={start:this._io.pos,ioOffset:this._io.byteOffset},this.applicationIdentifier=r.bytesToStr(this._io.readBytes(8),"ASCII"),this._debug.applicationIdentifier.end=this._io.pos,this._debug.applicationAuthCode={start:this._io.pos,ioOffset:this._io.byteOffset},this.applicationAuthCode=this._io.readBytes(3),this._debug.applicationAuthCode.end=this._io.pos},t})(),p=o.Block=(function(){function t(i,e,s){this._io=i,this._parent=e,this._root=s,this._debug={},this._read()}return t.prototype._read=function(){switch(this._debug.blockType={start:this._io.pos,ioOffset:this._io.byteOffset,enumName:"Gif.BlockType"},this.blockType=this._io.readU1(),this._debug.blockType.end=this._io.pos,this._debug.body={start:this._io.pos,ioOffset:this._io.byteOffset},this.blockType){case o.BlockType.EXTENSION:this.body=new g(this._io,this,this._root);break;case o.BlockType.LOCAL_IMAGE_DESCRIPTOR:this.body=new m(this._io,this,this._root);break}this._debug.body.end=this._io.pos},t})(),n=o.ColorTable=(function(){function t(i,e,s){this._io=i,this._parent=e,this._root=s,this._debug={},this._read()}return t.prototype._read=function(){for(this._debug.entries={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.entries.arr=[],this.entries=[];!this._io.isEof();)this._debug.entries.arr[this.entries.length]={start:this._io.pos,ioOffset:this._io.byteOffset},this.entries.push(new c(this._io,this,this._root)),this._debug.entries.arr[this.entries.length-1].end=this._io.pos;this._debug.entries.end=this._io.pos},t})(),c=o.ColorTableEntry=(function(){function t(i,e,s){this._io=i,this._parent=e,this._root=s,this._debug={},this._read()}return t.prototype._read=function(){this._debug.red={start:this._io.pos,ioOffset:this._io.byteOffset},this.red=this._io.readU1(),this._debug.red.end=this._io.pos,this._debug.green={start:this._io.pos,ioOffset:this._io.byteOffset},this.green=this._io.readU1(),this._debug.green.end=this._io.pos,this._debug.blue={start:this._io.pos,ioOffset:this._io.byteOffset},this.blue=this._io.readU1(),this._debug.blue.end=this._io.pos},t})(),f=o.ExtApplication=(function(){function t(i,e,s){this._io=i,this._parent=e,this._root=s,this._debug={},this._read()}return t.prototype._read=function(){this._debug.applicationId={start:this._io.pos,ioOffset:this._io.byteOffset},this.applicationId=new b(this._io,this,this._root),this._debug.applicationId.end=this._io.pos,this._debug.subblocks={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.subblocks.arr=[],this.subblocks=[];do{this._debug.subblocks.arr[this.subblocks.length]={start:this._io.pos,ioOffset:this._io.byteOffset};var i=new l(this._io,this,this._root);this.subblocks.push(i),this._debug.subblocks.arr[this.subblocks.length-1].end=this._io.pos}while(i.lenBytes!=0);this._debug.subblocks.end=this._io.pos},t})(),u=o.ExtGraphicControl=(function(){function t(i,e,s){this._io=i,this._parent=e,this._root=s,this._debug={},this._read()}return t.prototype._read=function(){if(this._debug.blockSize={start:this._io.pos,ioOffset:this._io.byteOffset},this.blockSize=this._io.readBytes(1),this._debug.blockSize.end=this._io.pos,r.byteArrayCompare(this.blockSize,new Uint8Array([4]))!=0){var i=new r.ValidationNotEqualError(new Uint8Array([4]),this.blockSize,this._io,"/types/ext_graphic_control/seq/0");throw this._debug.blockSize.validationError=i,i}if(this._debug.flags={start:this._io.pos,ioOffset:this._io.byteOffset},this.flags=this._io.readU1(),this._debug.flags.end=this._io.pos,this._debug.delayTime={start:this._io.pos,ioOffset:this._io.byteOffset},this.delayTime=this._io.readU2le(),this._debug.delayTime.end=this._io.pos,this._debug.transparentIdx={start:this._io.pos,ioOffset:this._io.byteOffset},this.transparentIdx=this._io.readU1(),this._debug.transparentIdx.end=this._io.pos,this._debug.terminator={start:this._io.pos,ioOffset:this._io.byteOffset},this.terminator=this._io.readBytes(1),this._debug.terminator.end=this._io.pos,r.byteArrayCompare(this.terminator,new Uint8Array([0]))!=0){var i=new r.ValidationNotEqualError(new Uint8Array([0]),this.terminator,this._io,"/types/ext_graphic_control/seq/4");throw this._debug.terminator.validationError=i,i}},Object.defineProperty(t.prototype,"transparentColorFlag",{get:function(){return this._m_transparentColorFlag!==void 0?this._m_transparentColorFlag:(this._debug._m_transparentColorFlag={},this._m_transparentColorFlag=(this.flags&1)!=0,this._m_transparentColorFlag)}}),Object.defineProperty(t.prototype,"userInputFlag",{get:function(){return this._m_userInputFlag!==void 0?this._m_userInputFlag:(this._debug._m_userInputFlag={},this._m_userInputFlag=(this.flags&2)!=0,this._m_userInputFlag)}}),t})(),g=o.Extension=(function(){function t(i,e,s){this._io=i,this._parent=e,this._root=s,this._debug={},this._read()}return t.prototype._read=function(){switch(this._debug.label={start:this._io.pos,ioOffset:this._io.byteOffset,enumName:"Gif.ExtensionLabel"},this.label=this._io.readU1(),this._debug.label.end=this._io.pos,this._debug.body={start:this._io.pos,ioOffset:this._io.byteOffset},this.label){case o.ExtensionLabel.APPLICATION:this.body=new f(this._io,this,this._root);break;case o.ExtensionLabel.COMMENT:this.body=new _(this._io,this,this._root);break;case o.ExtensionLabel.GRAPHIC_CONTROL:this.body=new u(this._io,this,this._root);break;default:this.body=new _(this._io,this,this._root);break}this._debug.body.end=this._io.pos},t})(),y=o.Header=(function(){function t(i,e,s){this._io=i,this._parent=e,this._root=s,this._debug={},this._read()}return t.prototype._read=function(){if(this._debug.magic={start:this._io.pos,ioOffset:this._io.byteOffset},this.magic=this._io.readBytes(3),this._debug.magic.end=this._io.pos,r.byteArrayCompare(this.magic,new Uint8Array([71,73,70]))!=0){var i=new r.ValidationNotEqualError(new Uint8Array([71,73,70]),this.magic,this._io,"/types/header/seq/0");throw this._debug.magic.validationError=i,i}this._debug.version={start:this._io.pos,ioOffset:this._io.byteOffset},this.version=r.bytesToStr(this._io.readBytes(3),"ASCII"),this._debug.version.end=this._io.pos},t})(),O=o.ImageData=(function(){function t(i,e,s){this._io=i,this._parent=e,this._root=s,this._debug={},this._read()}return t.prototype._read=function(){this._debug.lzwMinCodeSize={start:this._io.pos,ioOffset:this._io.byteOffset},this.lzwMinCodeSize=this._io.readU1(),this._debug.lzwMinCodeSize.end=this._io.pos,this._debug.subblocks={start:this._io.pos,ioOffset:this._io.byteOffset},this.subblocks=new _(this._io,this,this._root),this._debug.subblocks.end=this._io.pos},t})(),m=o.LocalImageDescriptor=(function(){function t(i,e,s){this._io=i,this._parent=e,this._root=s,this._debug={},this._read()}return t.prototype._read=function(){if(this._debug.left={start:this._io.pos,ioOffset:this._io.byteOffset},this.left=this._io.readU2le(),this._debug.left.end=this._io.pos,this._debug.top={start:this._io.pos,ioOffset:this._io.byteOffset},this.top=this._io.readU2le(),this._debug.top.end=this._io.pos,this._debug.width={start:this._io.pos,ioOffset:this._io.byteOffset},this.width=this._io.readU2le(),this._debug.width.end=this._io.pos,this._debug.height={start:this._io.pos,ioOffset:this._io.byteOffset},this.height=this._io.readU2le(),this._debug.height.end=this._io.pos,this._debug.flags={start:this._io.pos,ioOffset:this._io.byteOffset},this.flags=this._io.readU1(),this._debug.flags.end=this._io.pos,this.hasColorTable){this._debug.localColorTable={start:this._io.pos,ioOffset:this._io.byteOffset},this._raw_localColorTable=this._io.readBytes(this.colorTableSize*3);var i=new r(this._raw_localColorTable);this.localColorTable=new n(i,this,this._root),this._debug.localColorTable.end=this._io.pos}this._debug.imageData={start:this._io.pos,ioOffset:this._io.byteOffset},this.imageData=new O(this._io,this,this._root),this._debug.imageData.end=this._io.pos},Object.defineProperty(t.prototype,"colorTableSize",{get:function(){return this._m_colorTableSize!==void 0?this._m_colorTableSize:(this._debug._m_colorTableSize={},this._m_colorTableSize=2<<(this.flags&7),this._m_colorTableSize)}}),Object.defineProperty(t.prototype,"hasColorTable",{get:function(){return this._m_hasColorTable!==void 0?this._m_hasColorTable:(this._debug._m_hasColorTable={},this._m_hasColorTable=(this.flags&128)!=0,this._m_hasColorTable)}}),Object.defineProperty(t.prototype,"hasInterlace",{get:function(){return this._m_hasInterlace!==void 0?this._m_hasInterlace:(this._debug._m_hasInterlace={},this._m_hasInterlace=(this.flags&64)!=0,this._m_hasInterlace)}}),Object.defineProperty(t.prototype,"hasSortedColorTable",{get:function(){return this._m_hasSortedColorTable!==void 0?this._m_hasSortedColorTable:(this._debug._m_hasSortedColorTable={},this._m_hasSortedColorTable=(this.flags&32)!=0,this._m_hasSortedColorTable)}}),t})(),w=o.LogicalScreenDescriptorStruct=(function(){function t(i,e,s){this._io=i,this._parent=e,this._root=s,this._debug={},this._read()}return t.prototype._read=function(){this._debug.screenWidth={start:this._io.pos,ioOffset:this._io.byteOffset},this.screenWidth=this._io.readU2le(),this._debug.screenWidth.end=this._io.pos,this._debug.screenHeight={start:this._io.pos,ioOffset:this._io.byteOffset},this.screenHeight=this._io.readU2le(),this._debug.screenHeight.end=this._io.pos,this._debug.flags={start:this._io.pos,ioOffset:this._io.byteOffset},this.flags=this._io.readU1(),this._debug.flags.end=this._io.pos,this._debug.bgColorIndex={start:this._io.pos,ioOffset:this._io.byteOffset},this.bgColorIndex=this._io.readU1(),this._debug.bgColorIndex.end=this._io.pos,this._debug.pixelAspectRatio={start:this._io.pos,ioOffset:this._io.byteOffset},this.pixelAspectRatio=this._io.readU1(),this._debug.pixelAspectRatio.end=this._io.pos},Object.defineProperty(t.prototype,"colorTableSize",{get:function(){return this._m_colorTableSize!==void 0?this._m_colorTableSize:(this._debug._m_colorTableSize={},this._m_colorTableSize=2<<(this.flags&7),this._m_colorTableSize)}}),Object.defineProperty(t.prototype,"hasColorTable",{get:function(){return this._m_hasColorTable!==void 0?this._m_hasColorTable:(this._debug._m_hasColorTable={},this._m_hasColorTable=(this.flags&128)!=0,this._m_hasColorTable)}}),t})(),l=o.Subblock=(function(){function t(i,e,s){this._io=i,this._parent=e,this._root=s,this._debug={},this._read()}return t.prototype._read=function(){this._debug.lenBytes={start:this._io.pos,ioOffset:this._io.byteOffset},this.lenBytes=this._io.readU1(),this._debug.lenBytes.end=this._io.pos,this._debug.bytes={start:this._io.pos,ioOffset:this._io.byteOffset},this.bytes=this._io.readBytes(this.lenBytes),this._debug.bytes.end=this._io.pos},t})(),_=o.Subblocks=(function(){function t(i,e,s){this._io=i,this._parent=e,this._root=s,this._debug={},this._read()}return t.prototype._read=function(){this._debug.entries={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.entries.arr=[],this.entries=[];do{this._debug.entries.arr[this.entries.length]={start:this._io.pos,ioOffset:this._io.byteOffset};var i=new l(this._io,this,this._root);this.entries.push(i),this._debug.entries.arr[this.entries.length-1].end=this._io.pos}while(i.lenBytes!=0);this._debug.entries.end=this._io.pos},t})();return o})();h.Gif=d})}});const S=I(),x={id:"gif",title:"GIF (Graphics Interchange Format) image file",ksy:{meta:{id:"gif",title:"GIF (Graphics Interchange Format) image file","file-extension":"gif",xref:{forensicswiki:"gif",justsolve:"GIF",loc:"fdd000133",mime:"image/gif",pronom:["fmt/3","fmt/4"],wikidata:"Q2192"},license:"CC0-1.0",endian:"le"},doc:`GIF (Graphics Interchange Format) is an image file format, developed
in 1987. It became popular in 1990s as one of the main image formats
used in World Wide Web.

GIF format allows encoding of palette-based images up to 256 colors
(each of the colors can be chosen from a 24-bit RGB
colorspace). Image data stream uses LZW (Lempel-Ziv-Welch) lossless
compression.

Over the years, several version of the format were published and
several extensions to it were made, namely, a popular Netscape
extension that allows to store several images in one file, switching
between them, which produces crude form of animation.

Structurally, format consists of several mandatory headers and then
a stream of blocks follows. Blocks can carry additional
metainformation or image data.
`,seq:[{id:"hdr",type:"header"},{id:"logical_screen_descriptor",type:"logical_screen_descriptor_struct"},{id:"global_color_table",type:"color_table",if:"logical_screen_descriptor.has_color_table",size:"logical_screen_descriptor.color_table_size * 3","doc-ref":"https://www.w3.org/Graphics/GIF/spec-gif89a.txt - section 18"},{id:"blocks",type:"block",repeat:"until","repeat-until":"_io.eof or _.block_type == block_type::end_of_file"}],types:{header:{"doc-ref":"https://www.w3.org/Graphics/GIF/spec-gif89a.txt - section 17",seq:[{id:"magic",contents:"GIF"},{id:"version",type:"str",size:3,encoding:"ASCII"}]},logical_screen_descriptor_struct:{"doc-ref":"https://www.w3.org/Graphics/GIF/spec-gif89a.txt - section 18",seq:[{id:"screen_width",type:"u2"},{id:"screen_height",type:"u2"},{id:"flags",type:"u1"},{id:"bg_color_index",type:"u1"},{id:"pixel_aspect_ratio",type:"u1"}],instances:{has_color_table:{value:"(flags & 0b10000000) != 0"},color_table_size:{value:"2 << (flags & 7)"}}},color_table:{"doc-ref":"https://www.w3.org/Graphics/GIF/spec-gif89a.txt - section 19",seq:[{id:"entries",type:"color_table_entry",repeat:"eos"}]},color_table_entry:{seq:[{id:"red",type:"u1"},{id:"green",type:"u1"},{id:"blue",type:"u1"}]},block:{"-webide-representation":"{block_type}",seq:[{id:"block_type",type:"u1",enum:"block_type"},{id:"body",type:{"switch-on":"block_type",cases:{"block_type::extension":"extension","block_type::local_image_descriptor":"local_image_descriptor"}}}]},local_image_descriptor:{seq:[{id:"left",type:"u2"},{id:"top",type:"u2"},{id:"width",type:"u2"},{id:"height",type:"u2"},{id:"flags",type:"u1"},{id:"local_color_table",type:"color_table",if:"has_color_table",size:"color_table_size * 3"},{id:"image_data",type:"image_data"}],instances:{has_color_table:{value:"(flags & 0b10000000) != 0"},has_interlace:{value:"(flags & 0b01000000) != 0"},has_sorted_color_table:{value:"(flags & 0b00100000) != 0"},color_table_size:{value:"2 << (flags & 7)"}}},image_data:{"doc-ref":"https://www.w3.org/Graphics/GIF/spec-gif89a.txt - section 22",seq:[{id:"lzw_min_code_size",type:"u1"},{id:"subblocks",type:"subblocks"}]},extension:{seq:[{id:"label",type:"u1",enum:"extension_label"},{id:"body",type:{"switch-on":"label",cases:{"extension_label::application":"ext_application","extension_label::comment":"subblocks","extension_label::graphic_control":"ext_graphic_control",_:"subblocks"}}}]},ext_application:{seq:[{id:"application_id",type:"application_id"},{id:"subblocks",type:"subblock",repeat:"until","repeat-until":"_.len_bytes == 0"}]},ext_graphic_control:{"doc-ref":"https://www.w3.org/Graphics/GIF/spec-gif89a.txt - section 23",seq:[{id:"block_size",contents:[4]},{id:"flags",type:"u1"},{id:"delay_time",type:"u2"},{id:"transparent_idx",type:"u1"},{id:"terminator",contents:[0]}],instances:{transparent_color_flag:{value:"(flags & 0b00000001) != 0"},user_input_flag:{value:"(flags & 0b00000010) != 0"}}},subblocks:{seq:[{id:"entries",type:"subblock",repeat:"until","repeat-until":"_.len_bytes == 0"}]},subblock:{seq:[{id:"len_bytes",type:"u1"},{id:"bytes",size:"len_bytes"}]},application_id:{seq:[{id:"len_bytes",type:"u1",valid:11},{id:"application_identifier",type:"str",encoding:"ASCII",size:8},{id:"application_auth_code",size:3}]}},enums:{block_type:{33:"extension",44:"local_image_descriptor",59:"end_of_file"},extension_label:{249:"graphic_control",254:"comment",255:"application"}}}};export{S as default,x as spec};
