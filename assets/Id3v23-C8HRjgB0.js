import{k as c}from"./index-CMEpbKl5.js";var v=Object.getOwnPropertyNames,O=(_,h)=>function(){return h||(0,_[v(_)[0]])((h={exports:{}}).exports,h),h.exports},m=O({"<stdin>"(_){(function(h,r){typeof define=="function"&&define.amd?define(["exports","kaitai-struct/KaitaiStream"],r):typeof _=="object"&&_!==null&&typeof _.nodeType!="number"?r(_,c.KaitaiStream):r(h.Id3v23||(h.Id3v23={}),h.KaitaiStream)})(typeof self<"u"?self:_,function(h,r){var g=(function(){function a(t,e,i){this._io=t,this._parent=e,this._root=i||this,this._debug={},this._read()}a.prototype._read=function(){this._debug.tag={start:this._io.pos,ioOffset:this._io.byteOffset},this.tag=new l(this._io,this,this._root),this._debug.tag.end=this._io.pos};var u=a.Frame=(function(){function t(i,s,o){this._io=i,this._parent=s,this._root=o,this._debug={},this._read()}t.prototype._read=function(){this._debug.id={start:this._io.pos,ioOffset:this._io.byteOffset},this.id=r.bytesToStr(this._io.readBytes(4),"ASCII"),this._debug.id.end=this._io.pos,this._debug.size={start:this._io.pos,ioOffset:this._io.byteOffset},this.size=this._io.readU4be(),this._debug.size.end=this._io.pos,this._debug.flags={start:this._io.pos,ioOffset:this._io.byteOffset},this.flags=new e(this._io,this,this._root),this._debug.flags.end=this._io.pos,this._debug.data={start:this._io.pos,ioOffset:this._io.byteOffset},this.data=this._io.readBytes(this.size),this._debug.data.end=this._io.pos};var e=t.Flags=(function(){function i(s,o,d){this._io=s,this._parent=o,this._root=d,this._debug={},this._read()}return i.prototype._read=function(){this._debug.flagDiscardAlterTag={start:this._io.pos,ioOffset:this._io.byteOffset},this.flagDiscardAlterTag=this._io.readBitsIntBe(1)!=0,this._debug.flagDiscardAlterTag.end=this._io.pos,this._debug.flagDiscardAlterFile={start:this._io.pos,ioOffset:this._io.byteOffset},this.flagDiscardAlterFile=this._io.readBitsIntBe(1)!=0,this._debug.flagDiscardAlterFile.end=this._io.pos,this._debug.flagReadOnly={start:this._io.pos,ioOffset:this._io.byteOffset},this.flagReadOnly=this._io.readBitsIntBe(1)!=0,this._debug.flagReadOnly.end=this._io.pos,this._debug.reserved1={start:this._io.pos,ioOffset:this._io.byteOffset},this.reserved1=this._io.readBitsIntBe(5),this._debug.reserved1.end=this._io.pos,this._debug.flagCompressed={start:this._io.pos,ioOffset:this._io.byteOffset},this.flagCompressed=this._io.readBitsIntBe(1)!=0,this._debug.flagCompressed.end=this._io.pos,this._debug.flagEncrypted={start:this._io.pos,ioOffset:this._io.byteOffset},this.flagEncrypted=this._io.readBitsIntBe(1)!=0,this._debug.flagEncrypted.end=this._io.pos,this._debug.flagGrouping={start:this._io.pos,ioOffset:this._io.byteOffset},this.flagGrouping=this._io.readBitsIntBe(1)!=0,this._debug.flagGrouping.end=this._io.pos,this._debug.reserved2={start:this._io.pos,ioOffset:this._io.byteOffset},this.reserved2=this._io.readBitsIntBe(5),this._debug.reserved2.end=this._io.pos},i})();return Object.defineProperty(t.prototype,"isInvalid",{get:function(){return this._m_isInvalid!==void 0?this._m_isInvalid:(this._debug._m_isInvalid={},this._m_isInvalid=this.id=="\0\0\0\0",this._m_isInvalid)}}),t})(),p=a.Header=(function(){function t(i,s,o){this._io=i,this._parent=s,this._root=o,this._debug={},this._read()}t.prototype._read=function(){if(this._debug.magic={start:this._io.pos,ioOffset:this._io.byteOffset},this.magic=this._io.readBytes(3),this._debug.magic.end=this._io.pos,r.byteArrayCompare(this.magic,new Uint8Array([73,68,51]))!=0){var i=new r.ValidationNotEqualError(new Uint8Array([73,68,51]),this.magic,this._io,"/types/header/seq/0");throw this._debug.magic.validationError=i,i}this._debug.versionMajor={start:this._io.pos,ioOffset:this._io.byteOffset},this.versionMajor=this._io.readU1(),this._debug.versionMajor.end=this._io.pos,this._debug.versionRevision={start:this._io.pos,ioOffset:this._io.byteOffset},this.versionRevision=this._io.readU1(),this._debug.versionRevision.end=this._io.pos,this._debug.flags={start:this._io.pos,ioOffset:this._io.byteOffset},this.flags=new e(this._io,this,this._root),this._debug.flags.end=this._io.pos,this._debug.size={start:this._io.pos,ioOffset:this._io.byteOffset},this.size=new y(this._io,this,this._root),this._debug.size.end=this._io.pos};var e=t.Flags=(function(){function i(s,o,d){this._io=s,this._parent=o,this._root=d,this._debug={},this._read()}return i.prototype._read=function(){this._debug.flagUnsynchronization={start:this._io.pos,ioOffset:this._io.byteOffset},this.flagUnsynchronization=this._io.readBitsIntBe(1)!=0,this._debug.flagUnsynchronization.end=this._io.pos,this._debug.flagHeaderex={start:this._io.pos,ioOffset:this._io.byteOffset},this.flagHeaderex=this._io.readBitsIntBe(1)!=0,this._debug.flagHeaderex.end=this._io.pos,this._debug.flagExperimental={start:this._io.pos,ioOffset:this._io.byteOffset},this.flagExperimental=this._io.readBitsIntBe(1)!=0,this._debug.flagExperimental.end=this._io.pos,this._debug.reserved={start:this._io.pos,ioOffset:this._io.byteOffset},this.reserved=this._io.readBitsIntBe(5),this._debug.reserved.end=this._io.pos},i})();return t})(),b=a.HeaderEx=(function(){function t(i,s,o){this._io=i,this._parent=s,this._root=o,this._debug={},this._read()}t.prototype._read=function(){this._debug.size={start:this._io.pos,ioOffset:this._io.byteOffset},this.size=this._io.readU4be(),this._debug.size.end=this._io.pos,this._debug.flagsEx={start:this._io.pos,ioOffset:this._io.byteOffset},this.flagsEx=new e(this._io,this,this._root),this._debug.flagsEx.end=this._io.pos,this._debug.paddingSize={start:this._io.pos,ioOffset:this._io.byteOffset},this.paddingSize=this._io.readU4be(),this._debug.paddingSize.end=this._io.pos,this.flagsEx.flagCrc&&(this._debug.crc={start:this._io.pos,ioOffset:this._io.byteOffset},this.crc=this._io.readU4be(),this._debug.crc.end=this._io.pos)};var e=t.FlagsEx=(function(){function i(s,o,d){this._io=s,this._parent=o,this._root=d,this._debug={},this._read()}return i.prototype._read=function(){this._debug.flagCrc={start:this._io.pos,ioOffset:this._io.byteOffset},this.flagCrc=this._io.readBitsIntBe(1)!=0,this._debug.flagCrc.end=this._io.pos,this._debug.reserved={start:this._io.pos,ioOffset:this._io.byteOffset},this.reserved=this._io.readBitsIntBe(15),this._debug.reserved.end=this._io.pos},i})();return t})(),l=a.Tag=(function(){function t(e,i,s){this._io=e,this._parent=i,this._root=s,this._debug={},this._read()}return t.prototype._read=function(){this._debug.header={start:this._io.pos,ioOffset:this._io.byteOffset},this.header=new p(this._io,this,this._root),this._debug.header.end=this._io.pos,this.header.flags.flagHeaderex&&(this._debug.headerEx={start:this._io.pos,ioOffset:this._io.byteOffset},this.headerEx=new b(this._io,this,this._root),this._debug.headerEx.end=this._io.pos),this._debug.frames={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.frames.arr=[],this.frames=[];do{this._debug.frames.arr[this.frames.length]={start:this._io.pos,ioOffset:this._io.byteOffset};var e=new u(this._io,this,this._root);this.frames.push(e),this._debug.frames.arr[this.frames.length-1].end=this._io.pos}while(!(this._io.pos+e.size>this.header.size.value||e.isInvalid));this._debug.frames.end=this._io.pos,this.header.flags.flagHeaderex&&(this._debug.padding={start:this._io.pos,ioOffset:this._io.byteOffset},this.padding=this._io.readBytes(this.headerEx.paddingSize-this._io.pos),this._debug.padding.end=this._io.pos)},t})(),f=a.U1beSynchsafe=(function(){function t(e,i,s){this._io=e,this._parent=i,this._root=s,this._debug={},this._read()}return t.prototype._read=function(){this._debug.padding={start:this._io.pos,ioOffset:this._io.byteOffset},this.padding=this._io.readBitsIntBe(1)!=0,this._debug.padding.end=this._io.pos,this._debug.value={start:this._io.pos,ioOffset:this._io.byteOffset},this.value=this._io.readBitsIntBe(7),this._debug.value.end=this._io.pos},t})(),n=a.U2beSynchsafe=(function(){function t(e,i,s){this._io=e,this._parent=i,this._root=s,this._debug={},this._read()}return t.prototype._read=function(){this._debug.byte0={start:this._io.pos,ioOffset:this._io.byteOffset},this.byte0=new f(this._io,this,this._root),this._debug.byte0.end=this._io.pos,this._debug.byte1={start:this._io.pos,ioOffset:this._io.byteOffset},this.byte1=new f(this._io,this,this._root),this._debug.byte1.end=this._io.pos},Object.defineProperty(t.prototype,"value",{get:function(){return this._m_value!==void 0?this._m_value:(this._debug._m_value={},this._m_value=this.byte0.value<<7|this.byte1.value,this._m_value)}}),t})(),y=a.U4beSynchsafe=(function(){function t(e,i,s){this._io=e,this._parent=i,this._root=s,this._debug={},this._read()}return t.prototype._read=function(){this._debug.short0={start:this._io.pos,ioOffset:this._io.byteOffset},this.short0=new n(this._io,this,this._root),this._debug.short0.end=this._io.pos,this._debug.short1={start:this._io.pos,ioOffset:this._io.byteOffset},this.short1=new n(this._io,this,this._root),this._debug.short1.end=this._io.pos},Object.defineProperty(t.prototype,"value",{get:function(){return this._m_value!==void 0?this._m_value:(this._debug._m_value={},this._m_value=this.short0.value<<14|this.short1.value,this._m_value)}}),t})();return a})();h.Id3v23=g})}});const x=m(),B={id:"id3v2_3",title:"ID3v2.3 tag for .mp3 files",ksy:{meta:{id:"id3v2_3",title:"ID3v2.3 tag for .mp3 files","file-extension":"mp3",xref:{forensicswiki:"id3",justsolve:"ID3",loc:"fdd000108",wikidata:"Q1054220"},license:"CC0-1.0",endian:"be"},"doc-ref":"https://id3.org/id3v2.3.0",seq:[{id:"tag",type:"tag"}],types:{tag:{"doc-ref":"Section 3. ID3v2 overview",seq:[{id:"header",type:"header"},{id:"header_ex",type:"header_ex",if:"header.flags.flag_headerex"},{id:"frames",type:"frame",repeat:"until","repeat-until":"_io.pos + _.size > header.size.value or _.is_invalid"},{id:"padding",if:"header.flags.flag_headerex",size:"header_ex.padding_size - _io.pos"}]},header:{doc:"ID3v2 fixed header","doc-ref":"Section 3.1. ID3v2 header",seq:[{id:"magic",contents:"ID3"},{id:"version_major",type:"u1"},{id:"version_revision",type:"u1"},{id:"flags",type:"flags"},{id:"size",type:"u4be_synchsafe"}],types:{flags:{seq:[{id:"flag_unsynchronization",type:"b1"},{id:"flag_headerex",type:"b1"},{id:"flag_experimental",type:"b1"},{id:"reserved",type:"b5"}]}}},header_ex:{doc:"ID3v2 extended header","doc-ref":"Section 3.2. ID3v2 extended header",seq:[{id:"size",type:"u4"},{id:"flags_ex",type:"flags_ex"},{id:"padding_size",type:"u4"},{id:"crc",type:"u4",if:"flags_ex.flag_crc"}],types:{flags_ex:{seq:[{id:"flag_crc",type:"b1"},{id:"reserved",type:"b15"}]}}},frame:{"doc-ref":"Section 3.3. ID3v2 frame overview",seq:[{id:"id",type:"str",size:4,encoding:"ASCII"},{id:"size",type:"u4"},{id:"flags",type:"flags"},{id:"data",size:"size"}],instances:{is_invalid:{value:"id == '\0\0\0\0'"}},types:{flags:{seq:[{id:"flag_discard_alter_tag",type:"b1"},{id:"flag_discard_alter_file",type:"b1"},{id:"flag_read_only",type:"b1"},{id:"reserved1",type:"b5"},{id:"flag_compressed",type:"b1"},{id:"flag_encrypted",type:"b1"},{id:"flag_grouping",type:"b1"},{id:"reserved2",type:"b5"}]}}},u1be_synchsafe:{seq:[{id:"padding",type:"b1"},{id:"value",type:"b7"}]},u2be_synchsafe:{seq:[{id:"byte0",type:"u1be_synchsafe"},{id:"byte1",type:"u1be_synchsafe"}],instances:{value:{value:"(byte0.value << 7) | byte1.value"}}},u4be_synchsafe:{seq:[{id:"short0",type:"u2be_synchsafe"},{id:"short1",type:"u2be_synchsafe"}],instances:{value:{value:"(short0.value << 14) | short1.value"}}}}}};export{x as default,B as spec};
