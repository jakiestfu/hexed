import{k as p}from"./index-C9sUxlHS.js";var y=Object.getOwnPropertyNames,c=(a,e)=>function(){return e||(0,a[y(a)[0]])((e={exports:{}}).exports,e),e.exports},l=c({"<stdin>"(a){(function(e,s){typeof define=="function"&&define.amd?define(["exports","kaitai-struct/KaitaiStream"],s):typeof a=="object"&&a!==null&&typeof a.nodeType!="number"?s(a,p.KaitaiStream):s(e.GltfBinary||(e.GltfBinary={}),e.KaitaiStream)})(typeof self<"u"?self:a,function(e,s){var r=(function(){o.ChunkType=Object.freeze({BIN:5130562,JSON:1313821514,5130562:"BIN",1313821514:"JSON"});function o(i,t,n){this._io=i,this._parent=t,this._root=n||this,this._debug={},this._read()}o.prototype._read=function(){for(this._debug.header={start:this._io.pos,ioOffset:this._io.byteOffset},this.header=new u(this._io,this,this._root),this._debug.header.end=this._io.pos,this._debug.chunks={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.chunks.arr=[],this.chunks=[];!this._io.isEof();)this._debug.chunks.arr[this.chunks.length]={start:this._io.pos,ioOffset:this._io.byteOffset},this.chunks.push(new _(this._io,this,this._root)),this._debug.chunks.arr[this.chunks.length-1].end=this._io.pos;this._debug.chunks.end=this._io.pos};var d=o.Bin=(function(){function i(t,n,h){this._io=t,this._parent=n,this._root=h,this._debug={},this._read()}return i.prototype._read=function(){this._debug.data={start:this._io.pos,ioOffset:this._io.byteOffset},this.data=this._io.readBytesFull(),this._debug.data.end=this._io.pos},i})(),_=o.Chunk=(function(){function i(t,n,h){this._io=t,this._parent=n,this._root=h,this._debug={},this._read()}return i.prototype._read=function(){switch(this._debug.lenData={start:this._io.pos,ioOffset:this._io.byteOffset},this.lenData=this._io.readU4le(),this._debug.lenData.end=this._io.pos,this._debug.type={start:this._io.pos,ioOffset:this._io.byteOffset,enumName:"GltfBinary.ChunkType"},this.type=this._io.readU4le(),this._debug.type.end=this._io.pos,this._debug.data={start:this._io.pos,ioOffset:this._io.byteOffset},this.type){case o.ChunkType.BIN:this._raw_data=this._io.readBytes(this.lenData);var t=new s(this._raw_data);this.data=new d(t,this,this._root);break;case o.ChunkType.JSON:this._raw_data=this._io.readBytes(this.lenData);var t=new s(this._raw_data);this.data=new f(t,this,this._root);break;default:this.data=this._io.readBytes(this.lenData);break}this._debug.data.end=this._io.pos},i})(),u=o.Header=(function(){function i(t,n,h){this._io=t,this._parent=n,this._root=h,this._debug={},this._read()}return i.prototype._read=function(){if(this._debug.magic={start:this._io.pos,ioOffset:this._io.byteOffset},this.magic=this._io.readBytes(4),this._debug.magic.end=this._io.pos,s.byteArrayCompare(this.magic,new Uint8Array([103,108,84,70]))!=0){var t=new s.ValidationNotEqualError(new Uint8Array([103,108,84,70]),this.magic,this._io,"/types/header/seq/0");throw this._debug.magic.validationError=t,t}this._debug.version={start:this._io.pos,ioOffset:this._io.byteOffset},this.version=this._io.readU4le(),this._debug.version.end=this._io.pos,this._debug.length={start:this._io.pos,ioOffset:this._io.byteOffset},this.length=this._io.readU4le(),this._debug.length.end=this._io.pos},i})(),f=o.Json=(function(){function i(t,n,h){this._io=t,this._parent=n,this._root=h,this._debug={},this._read()}return i.prototype._read=function(){this._debug.data={start:this._io.pos,ioOffset:this._io.byteOffset},this.data=s.bytesToStr(this._io.readBytesFull(),"UTF-8"),this._debug.data.end=this._io.pos},i})();return o})();e.GltfBinary=r})}});const g=l(),k={id:"gltf_binary",title:"GL Transmission Format, binary container",ksy:{meta:{id:"gltf_binary",title:"GL Transmission Format, binary container","file-extension":"glb",xref:{justsolve:"GlTF",mime:"model/gltf-binary",wikidata:"Q28135989"},license:"MIT",endian:"le"},doc:`glTF is a format for distribution of 3D models optimized for being used in software
`,"doc-ref":"https://github.com/KhronosGroup/glTF/tree/2354846/specification/2.0#binary-gltf-layout",seq:[{id:"header",type:"header"},{id:"chunks",type:"chunk",repeat:"eos"}],types:{header:{seq:[{id:"magic",contents:"glTF"},{id:"version",type:"u4",doc:`Indicates the version of the Binary glTF container format.
For this specification, should be set to 2.
`},{id:"length",type:"u4",doc:"Total length of the Binary glTF, including Header and all Chunks, in bytes."}]},chunk:{seq:[{id:"len_data",type:"u4"},{id:"type",type:"u4",enum:"chunk_type"},{id:"data",size:"len_data",type:{"switch-on":"type",cases:{"chunk_type::json":"json","chunk_type::bin":"bin"}}}]},json:{seq:[{id:"data","size-eos":!0,type:"str",encoding:"UTF-8",doc:`This is where GLB deviates from being an elegant format.
To parse the rest of the file, you have to parse the JSON first.
`}]},bin:{seq:[{id:"data","size-eos":!0}]}},enums:{chunk_type:{5130562:"bin",1313821514:"json"}}}};export{g as default,k as spec};
