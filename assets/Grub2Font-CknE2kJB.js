import{k as x}from"./index-COmSdSC_.js";var v=Object.getOwnPropertyNames,A=(_,r)=>function(){return r||(0,_[v(_)[0]])((r={exports:{}}).exports,r),r.exports},B=A({"<stdin>"(_){(function(r,o){typeof define=="function"&&define.amd?define(["exports","kaitai-struct/KaitaiStream"],o):typeof _=="object"&&_!==null&&typeof _.nodeType!="number"?o(_,x.KaitaiStream):o(r.Grub2Font||(r.Grub2Font={}),r.KaitaiStream)})(typeof self<"u"?self:_,function(r,o){var f=(function(){function n(i,t,s){this._io=i,this._parent=t,this._root=s||this,this._debug={},this._read()}n.prototype._read=function(){if(this._debug.magic={start:this._io.pos,ioOffset:this._io.byteOffset},this.magic=this._io.readBytes(12),this._debug.magic.end=this._io.pos,o.byteArrayCompare(this.magic,new Uint8Array([70,73,76,69,0,0,0,4,80,70,70,50]))!=0){var i=new o.ValidationNotEqualError(new Uint8Array([70,73,76,69,0,0,0,4,80,70,70,50]),this.magic,this._io,"/seq/0");throw this._debug.magic.validationError=i,i}this._debug.sections={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.sections.arr=[],this.sections=[];do{this._debug.sections.arr[this.sections.length]={start:this._io.pos,ioOffset:this._io.byteOffset};var t=new w(this._io,this,this._root);this.sections.push(t),this._debug.sections.arr[this.sections.length-1].end=this._io.pos}while(t.sectionType!="DATA");this._debug.sections.end=this._io.pos};var c=n.AsceSection=(function(){function i(t,s,e){this._io=t,this._parent=s,this._root=e,this._debug={},this._read()}return i.prototype._read=function(){this._debug.ascentInPixels={start:this._io.pos,ioOffset:this._io.byteOffset},this.ascentInPixels=this._io.readU2be(),this._debug.ascentInPixels.end=this._io.pos},i})(),b=n.ChixSection=(function(){function i(e,h,a){this._io=e,this._parent=h,this._root=a,this._debug={},this._read()}i.prototype._read=function(){for(this._debug.characters={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.characters.arr=[],this.characters=[];!this._io.isEof();)this._debug.characters.arr[this.characters.length]={start:this._io.pos,ioOffset:this._io.byteOffset},this.characters.push(new t(this._io,this,this._root)),this._debug.characters.arr[this.characters.length-1].end=this._io.pos;this._debug.characters.end=this._io.pos};var t=i.Character=(function(){function e(h,a,d){this._io=h,this._parent=a,this._root=d,this._debug={},this._read()}return e.prototype._read=function(){this._debug.codePoint={start:this._io.pos,ioOffset:this._io.byteOffset},this.codePoint=this._io.readU4be(),this._debug.codePoint.end=this._io.pos,this._debug.flags={start:this._io.pos,ioOffset:this._io.byteOffset},this.flags=this._io.readU1(),this._debug.flags.end=this._io.pos,this._debug.ofsDefinition={start:this._io.pos,ioOffset:this._io.byteOffset},this.ofsDefinition=this._io.readU4be(),this._debug.ofsDefinition.end=this._io.pos},Object.defineProperty(e.prototype,"definition",{get:function(){if(this._m_definition!==void 0)return this._m_definition;var h=this._root._io,a=h.pos;return h.seek(this.ofsDefinition),this._debug._m_definition={start:h.pos,ioOffset:h.byteOffset},this._m_definition=new s(h,this,this._root),this._debug._m_definition.end=h.pos,h.seek(a),this._m_definition}}),e})(),s=i.CharacterDefinition=(function(){function e(h,a,d){this._io=h,this._parent=a,this._root=d,this._debug={},this._read()}return e.prototype._read=function(){this._debug.width={start:this._io.pos,ioOffset:this._io.byteOffset},this.width=this._io.readU2be(),this._debug.width.end=this._io.pos,this._debug.height={start:this._io.pos,ioOffset:this._io.byteOffset},this.height=this._io.readU2be(),this._debug.height.end=this._io.pos,this._debug.xOffset={start:this._io.pos,ioOffset:this._io.byteOffset},this.xOffset=this._io.readS2be(),this._debug.xOffset.end=this._io.pos,this._debug.yOffset={start:this._io.pos,ioOffset:this._io.byteOffset},this.yOffset=this._io.readS2be(),this._debug.yOffset.end=this._io.pos,this._debug.deviceWidth={start:this._io.pos,ioOffset:this._io.byteOffset},this.deviceWidth=this._io.readS2be(),this._debug.deviceWidth.end=this._io.pos,this._debug.bitmapData={start:this._io.pos,ioOffset:this._io.byteOffset},this.bitmapData=this._io.readBytes(Math.floor((this.width*this.height+7)/8)),this._debug.bitmapData.end=this._io.pos},e})();return i})(),u=n.DescSection=(function(){function i(t,s,e){this._io=t,this._parent=s,this._root=e,this._debug={},this._read()}return i.prototype._read=function(){this._debug.descentInPixels={start:this._io.pos,ioOffset:this._io.byteOffset},this.descentInPixels=this._io.readU2be(),this._debug.descentInPixels.end=this._io.pos},i})(),p=n.FamiSection=(function(){function i(t,s,e){this._io=t,this._parent=s,this._root=e,this._debug={},this._read()}return i.prototype._read=function(){this._debug.fontFamilyName={start:this._io.pos,ioOffset:this._io.byteOffset},this.fontFamilyName=o.bytesToStr(this._io.readBytesTerm(0,!1,!0,!0),"ASCII"),this._debug.fontFamilyName.end=this._io.pos},i})(),y=n.MaxhSection=(function(){function i(t,s,e){this._io=t,this._parent=s,this._root=e,this._debug={},this._read()}return i.prototype._read=function(){this._debug.maximumCharacterHeight={start:this._io.pos,ioOffset:this._io.byteOffset},this.maximumCharacterHeight=this._io.readU2be(),this._debug.maximumCharacterHeight.end=this._io.pos},i})(),g=n.MaxwSection=(function(){function i(t,s,e){this._io=t,this._parent=s,this._root=e,this._debug={},this._read()}return i.prototype._read=function(){this._debug.maximumCharacterWidth={start:this._io.pos,ioOffset:this._io.byteOffset},this.maximumCharacterWidth=this._io.readU2be(),this._debug.maximumCharacterWidth.end=this._io.pos},i})(),l=n.NameSection=(function(){function i(t,s,e){this._io=t,this._parent=s,this._root=e,this._debug={},this._read()}return i.prototype._read=function(){this._debug.fontName={start:this._io.pos,ioOffset:this._io.byteOffset},this.fontName=o.bytesToStr(this._io.readBytesTerm(0,!1,!0,!0),"ASCII"),this._debug.fontName.end=this._io.pos},i})(),m=n.PtszSection=(function(){function i(t,s,e){this._io=t,this._parent=s,this._root=e,this._debug={},this._read()}return i.prototype._read=function(){this._debug.fontPointSize={start:this._io.pos,ioOffset:this._io.byteOffset},this.fontPointSize=this._io.readU2be(),this._debug.fontPointSize.end=this._io.pos},i})(),w=n.Section=(function(){function i(t,s,e){this._io=t,this._parent=s,this._root=e,this._debug={},this._read()}return i.prototype._read=function(){if(this._debug.sectionType={start:this._io.pos,ioOffset:this._io.byteOffset},this.sectionType=o.bytesToStr(this._io.readBytes(4),"ASCII"),this._debug.sectionType.end=this._io.pos,this._debug.lenBody={start:this._io.pos,ioOffset:this._io.byteOffset},this.lenBody=this._io.readU4be(),this._debug.lenBody.end=this._io.pos,this.sectionType!="DATA"){switch(this._debug.body={start:this._io.pos,ioOffset:this._io.byteOffset},this.sectionType){case"ASCE":this._raw_body=this._io.readBytes(this.lenBody);var t=new o(this._raw_body);this.body=new c(t,this,this._root);break;case"CHIX":this._raw_body=this._io.readBytes(this.lenBody);var t=new o(this._raw_body);this.body=new b(t,this,this._root);break;case"DESC":this._raw_body=this._io.readBytes(this.lenBody);var t=new o(this._raw_body);this.body=new u(t,this,this._root);break;case"FAMI":this._raw_body=this._io.readBytes(this.lenBody);var t=new o(this._raw_body);this.body=new p(t,this,this._root);break;case"MAXH":this._raw_body=this._io.readBytes(this.lenBody);var t=new o(this._raw_body);this.body=new y(t,this,this._root);break;case"MAXW":this._raw_body=this._io.readBytes(this.lenBody);var t=new o(this._raw_body);this.body=new g(t,this,this._root);break;case"NAME":this._raw_body=this._io.readBytes(this.lenBody);var t=new o(this._raw_body);this.body=new l(t,this,this._root);break;case"PTSZ":this._raw_body=this._io.readBytes(this.lenBody);var t=new o(this._raw_body);this.body=new m(t,this,this._root);break;case"SLAN":this._raw_body=this._io.readBytes(this.lenBody);var t=new o(this._raw_body);this.body=new O(t,this,this._root);break;case"WEIG":this._raw_body=this._io.readBytes(this.lenBody);var t=new o(this._raw_body);this.body=new S(t,this,this._root);break;default:this.body=this._io.readBytes(this.lenBody);break}this._debug.body.end=this._io.pos}},i})(),O=n.SlanSection=(function(){function i(t,s,e){this._io=t,this._parent=s,this._root=e,this._debug={},this._read()}return i.prototype._read=function(){this._debug.fontSlant={start:this._io.pos,ioOffset:this._io.byteOffset},this.fontSlant=o.bytesToStr(this._io.readBytesTerm(0,!1,!0,!0),"ASCII"),this._debug.fontSlant.end=this._io.pos},i})(),S=n.WeigSection=(function(){function i(t,s,e){this._io=t,this._parent=s,this._root=e,this._debug={},this._read()}return i.prototype._read=function(){this._debug.fontWeight={start:this._io.pos,ioOffset:this._io.byteOffset},this.fontWeight=o.bytesToStr(this._io.readBytesTerm(0,!1,!0,!0),"ASCII"),this._debug.fontWeight.end=this._io.pos},i})();return n})();r.Grub2Font=f})}});const I=B(),T={id:"grub2_font",title:"GRUB 2 font",ksy:{meta:{id:"grub2_font",title:"GRUB 2 font",application:"GRUB 2","file-extension":"pf2",xref:{justsolve:"PFF2",wikidata:"Q29650337"},tags:["font"],license:"CC0-1.0",encoding:"ASCII",endian:"be"},doc:`Bitmap font format for the GRUB 2 bootloader.
`,"doc-ref":"https://grub.gibibit.com/New_font_format",seq:[{id:"magic",contents:["FILE",0,0,0,4,"PFF2"],size:12},{id:"sections",type:"section",repeat:"until","repeat-until":'_.section_type == "DATA"',doc:`The "DATA" section acts as a terminator. The documentation says:
"A marker that indicates the remainder of the file is data accessed
via the character index (CHIX) section. When reading this font file,
the rest of the file can be ignored when scanning the sections."
`}],types:{section:{seq:[{id:"section_type",size:4,type:"str"},{id:"len_body",type:"u4",doc:'Should be set to `0xFFFF_FFFF` for `section_type != "DATA"`'},{id:"body",size:"len_body",type:{"switch-on":"section_type",cases:{'"NAME"':"name_section",'"FAMI"':"fami_section",'"WEIG"':"weig_section",'"SLAN"':"slan_section",'"PTSZ"':"ptsz_section",'"MAXW"':"maxw_section",'"MAXH"':"maxh_section",'"ASCE"':"asce_section",'"DESC"':"desc_section",'"CHIX"':"chix_section"}},if:'section_type != "DATA"'}]},name_section:{seq:[{id:"font_name",type:"strz"}]},fami_section:{seq:[{id:"font_family_name",type:"strz"}]},weig_section:{seq:[{id:"font_weight",type:"strz"}]},slan_section:{seq:[{id:"font_slant",type:"strz"}]},ptsz_section:{seq:[{id:"font_point_size",type:"u2"}]},maxw_section:{seq:[{id:"maximum_character_width",type:"u2"}]},maxh_section:{seq:[{id:"maximum_character_height",type:"u2"}]},asce_section:{seq:[{id:"ascent_in_pixels",type:"u2"}]},desc_section:{seq:[{id:"descent_in_pixels",type:"u2"}]},chix_section:{seq:[{id:"characters",type:"character",repeat:"eos"}],types:{character:{seq:[{id:"code_point",type:"u4",doc:"Unicode code point"},{id:"flags",type:"u1"},{id:"ofs_definition",type:"u4"}],instances:{definition:{io:"_root._io",pos:"ofs_definition",type:"character_definition"}}},character_definition:{seq:[{id:"width",type:"u2"},{id:"height",type:"u2"},{id:"x_offset",type:"s2"},{id:"y_offset",type:"s2"},{id:"device_width",type:"s2"},{id:"bitmap_data",size:"(width * height + 7) / 8",doc:`A two-dimensional bitmap, one bit per pixel. It is organized as
row-major, top-down, left-to-right. The most significant bit of
each byte corresponds to the leftmost or uppermost pixel from all
bits of the byte. If a bit is set (1, \`true\`), the pixel is set to
the font color, if a bit is clear (0, \`false\`), the pixel is
transparent.

Rows are **not** padded to byte boundaries (i.e., a
single byte may contain bits belonging to multiple rows). The last
byte of the bitmap _is_ padded with zero bits at all unused least
significant bit positions so that the bitmap ends on a byte
boundary.
`}]}}}}}};export{I as default,T as spec};
