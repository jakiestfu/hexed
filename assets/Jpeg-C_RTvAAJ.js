import{k as l}from"./index-C9sUxlHS.js";var y=Object.getOwnPropertyNames,O=(r,a)=>function(){return a||(0,r[y(r)[0]])((a={exports:{}}).exports,a),a.exports},P=O({"<stdin>"(r){(function(a,o){typeof define=="function"&&define.amd?define(["exports","kaitai-struct/KaitaiStream","./Exif"],o):typeof r=="object"&&r!==null&&typeof r.nodeType!="number"?o(r,l.KaitaiStream,require("./Exif")):o(a.Jpeg||(a.Jpeg={}),a.KaitaiStream,a.Exif||(a.Exif={}))})(typeof self<"u"?self:r,function(a,o,p){var d=(function(){s.ComponentId=Object.freeze({Y:1,CB:2,CR:3,I:4,Q:5,1:"Y",2:"CB",3:"CR",4:"I",5:"Q"});function s(e,i,t){this._io=e,this._parent=i,this._root=t||this,this._debug={},this._read()}s.prototype._read=function(){for(this._debug.segments={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.segments.arr=[],this.segments=[];!this._io.isEof();)this._debug.segments.arr[this.segments.length]={start:this._io.pos,ioOffset:this._io.byteOffset},this.segments.push(new f(this._io,this,this._root)),this._debug.segments.arr[this.segments.length-1].end=this._io.pos;this._debug.segments.end=this._io.pos};var m=s.ExifInJpeg=(function(){function e(i,t,n){this._io=i,this._parent=t,this._root=n,this._debug={},this._read()}return e.prototype._read=function(){if(this._debug.extraZero={start:this._io.pos,ioOffset:this._io.byteOffset},this.extraZero=this._io.readBytes(1),this._debug.extraZero.end=this._io.pos,o.byteArrayCompare(this.extraZero,new Uint8Array([0]))!=0){var i=new o.ValidationNotEqualError(new Uint8Array([0]),this.extraZero,this._io,"/types/exif_in_jpeg/seq/0");throw this._debug.extraZero.validationError=i,i}this._debug.data={start:this._io.pos,ioOffset:this._io.byteOffset},this._raw_data=this._io.readBytesFull();var t=new o(this._raw_data);this.data=new p.Exif(t,null,null),this._debug.data.end=this._io.pos},e})(),f=s.Segment=(function(){e.MarkerEnum=Object.freeze({TEM:1,SOF0:192,SOF1:193,SOF2:194,SOF3:195,DHT:196,SOF5:197,SOF6:198,SOF7:199,SOI:216,EOI:217,SOS:218,DQT:219,DNL:220,DRI:221,DHP:222,APP0:224,APP1:225,APP2:226,APP3:227,APP4:228,APP5:229,APP6:230,APP7:231,APP8:232,APP9:233,APP10:234,APP11:235,APP12:236,APP13:237,APP14:238,APP15:239,COM:254,1:"TEM",192:"SOF0",193:"SOF1",194:"SOF2",195:"SOF3",196:"DHT",197:"SOF5",198:"SOF6",199:"SOF7",216:"SOI",217:"EOI",218:"SOS",219:"DQT",220:"DNL",221:"DRI",222:"DHP",224:"APP0",225:"APP1",226:"APP2",227:"APP3",228:"APP4",229:"APP5",230:"APP6",231:"APP7",232:"APP8",233:"APP9",234:"APP10",235:"APP11",236:"APP12",237:"APP13",238:"APP14",239:"APP15",254:"COM"});function e(i,t,n){this._io=i,this._parent=t,this._root=n,this._debug={},this._read()}return e.prototype._read=function(){if(this._debug.magic={start:this._io.pos,ioOffset:this._io.byteOffset},this.magic=this._io.readBytes(1),this._debug.magic.end=this._io.pos,o.byteArrayCompare(this.magic,new Uint8Array([255]))!=0){var i=new o.ValidationNotEqualError(new Uint8Array([255]),this.magic,this._io,"/types/segment/seq/0");throw this._debug.magic.validationError=i,i}if(this._debug.marker={start:this._io.pos,ioOffset:this._io.byteOffset,enumName:"Jpeg.Segment.MarkerEnum"},this.marker=this._io.readU1(),this._debug.marker.end=this._io.pos,this.marker!=s.Segment.MarkerEnum.SOI&&this.marker!=s.Segment.MarkerEnum.EOI&&(this._debug.length={start:this._io.pos,ioOffset:this._io.byteOffset},this.length=this._io.readU2be(),this._debug.length.end=this._io.pos),this.marker!=s.Segment.MarkerEnum.SOI&&this.marker!=s.Segment.MarkerEnum.EOI){switch(this._debug.data={start:this._io.pos,ioOffset:this._io.byteOffset},this.marker){case s.Segment.MarkerEnum.APP0:this._raw_data=this._io.readBytes(this.length-2);var t=new o(this._raw_data);this.data=new u(t,this,this._root);break;case s.Segment.MarkerEnum.APP1:this._raw_data=this._io.readBytes(this.length-2);var t=new o(this._raw_data);this.data=new g(t,this,this._root);break;case s.Segment.MarkerEnum.SOF0:this._raw_data=this._io.readBytes(this.length-2);var t=new o(this._raw_data);this.data=new b(t,this,this._root);break;case s.Segment.MarkerEnum.SOS:this._raw_data=this._io.readBytes(this.length-2);var t=new o(this._raw_data);this.data=new c(t,this,this._root);break;default:this.data=this._io.readBytes(this.length-2);break}this._debug.data.end=this._io.pos}this.marker==s.Segment.MarkerEnum.SOS&&(this._debug.imageData={start:this._io.pos,ioOffset:this._io.byteOffset},this.imageData=this._io.readBytesFull(),this._debug.imageData.end=this._io.pos)},e})(),u=s.SegmentApp0=(function(){e.DensityUnit=Object.freeze({NO_UNITS:0,PIXELS_PER_INCH:1,PIXELS_PER_CM:2,0:"NO_UNITS",1:"PIXELS_PER_INCH",2:"PIXELS_PER_CM"});function e(i,t,n){this._io=i,this._parent=t,this._root=n,this._debug={},this._read()}return e.prototype._read=function(){this._debug.magic={start:this._io.pos,ioOffset:this._io.byteOffset},this.magic=o.bytesToStr(this._io.readBytes(5),"ASCII"),this._debug.magic.end=this._io.pos,this._debug.versionMajor={start:this._io.pos,ioOffset:this._io.byteOffset},this.versionMajor=this._io.readU1(),this._debug.versionMajor.end=this._io.pos,this._debug.versionMinor={start:this._io.pos,ioOffset:this._io.byteOffset},this.versionMinor=this._io.readU1(),this._debug.versionMinor.end=this._io.pos,this._debug.densityUnits={start:this._io.pos,ioOffset:this._io.byteOffset,enumName:"Jpeg.SegmentApp0.DensityUnit"},this.densityUnits=this._io.readU1(),this._debug.densityUnits.end=this._io.pos,this._debug.densityX={start:this._io.pos,ioOffset:this._io.byteOffset},this.densityX=this._io.readU2be(),this._debug.densityX.end=this._io.pos,this._debug.densityY={start:this._io.pos,ioOffset:this._io.byteOffset},this.densityY=this._io.readU2be(),this._debug.densityY.end=this._io.pos,this._debug.thumbnailX={start:this._io.pos,ioOffset:this._io.byteOffset},this.thumbnailX=this._io.readU1(),this._debug.thumbnailX.end=this._io.pos,this._debug.thumbnailY={start:this._io.pos,ioOffset:this._io.byteOffset},this.thumbnailY=this._io.readU1(),this._debug.thumbnailY.end=this._io.pos,this._debug.thumbnail={start:this._io.pos,ioOffset:this._io.byteOffset},this.thumbnail=this._io.readBytes(this.thumbnailX*this.thumbnailY*3),this._debug.thumbnail.end=this._io.pos},e})(),g=s.SegmentApp1=(function(){function e(i,t,n){this._io=i,this._parent=t,this._root=n,this._debug={},this._read()}return e.prototype._read=function(){switch(this._debug.magic={start:this._io.pos,ioOffset:this._io.byteOffset},this.magic=o.bytesToStr(this._io.readBytesTerm(0,!1,!0,!0),"ASCII"),this._debug.magic.end=this._io.pos,this._debug.body={start:this._io.pos,ioOffset:this._io.byteOffset},this.magic){case"Exif":this.body=new m(this._io,this,this._root);break}this._debug.body.end=this._io.pos},e})(),b=s.SegmentSof0=(function(){function e(t,n,h){this._io=t,this._parent=n,this._root=h,this._debug={},this._read()}e.prototype._read=function(){this._debug.bitsPerSample={start:this._io.pos,ioOffset:this._io.byteOffset},this.bitsPerSample=this._io.readU1(),this._debug.bitsPerSample.end=this._io.pos,this._debug.imageHeight={start:this._io.pos,ioOffset:this._io.byteOffset},this.imageHeight=this._io.readU2be(),this._debug.imageHeight.end=this._io.pos,this._debug.imageWidth={start:this._io.pos,ioOffset:this._io.byteOffset},this.imageWidth=this._io.readU2be(),this._debug.imageWidth.end=this._io.pos,this._debug.numComponents={start:this._io.pos,ioOffset:this._io.byteOffset},this.numComponents=this._io.readU1(),this._debug.numComponents.end=this._io.pos,this._debug.components={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.components.arr=[],this.components=[];for(var t=0;t<this.numComponents;t++)this._debug.components.arr[t]={start:this._io.pos,ioOffset:this._io.byteOffset},this.components.push(new i(this._io,this,this._root)),this._debug.components.arr[t].end=this._io.pos;this._debug.components.end=this._io.pos};var i=e.Component=(function(){function t(n,h,_){this._io=n,this._parent=h,this._root=_,this._debug={},this._read()}return t.prototype._read=function(){this._debug.id={start:this._io.pos,ioOffset:this._io.byteOffset,enumName:"Jpeg.ComponentId"},this.id=this._io.readU1(),this._debug.id.end=this._io.pos,this._debug.samplingFactors={start:this._io.pos,ioOffset:this._io.byteOffset},this.samplingFactors=this._io.readU1(),this._debug.samplingFactors.end=this._io.pos,this._debug.quantizationTableId={start:this._io.pos,ioOffset:this._io.byteOffset},this.quantizationTableId=this._io.readU1(),this._debug.quantizationTableId.end=this._io.pos},Object.defineProperty(t.prototype,"samplingX",{get:function(){return this._m_samplingX!==void 0?this._m_samplingX:(this._debug._m_samplingX={},this._m_samplingX=(this.samplingFactors&240)>>>4,this._m_samplingX)}}),Object.defineProperty(t.prototype,"samplingY",{get:function(){return this._m_samplingY!==void 0?this._m_samplingY:(this._debug._m_samplingY={},this._m_samplingY=this.samplingFactors&15,this._m_samplingY)}}),t})();return e})(),c=s.SegmentSos=(function(){function e(t,n,h){this._io=t,this._parent=n,this._root=h,this._debug={},this._read()}e.prototype._read=function(){this._debug.numComponents={start:this._io.pos,ioOffset:this._io.byteOffset},this.numComponents=this._io.readU1(),this._debug.numComponents.end=this._io.pos,this._debug.components={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.components.arr=[],this.components=[];for(var t=0;t<this.numComponents;t++)this._debug.components.arr[t]={start:this._io.pos,ioOffset:this._io.byteOffset},this.components.push(new i(this._io,this,this._root)),this._debug.components.arr[t].end=this._io.pos;this._debug.components.end=this._io.pos,this._debug.startSpectralSelection={start:this._io.pos,ioOffset:this._io.byteOffset},this.startSpectralSelection=this._io.readU1(),this._debug.startSpectralSelection.end=this._io.pos,this._debug.endSpectral={start:this._io.pos,ioOffset:this._io.byteOffset},this.endSpectral=this._io.readU1(),this._debug.endSpectral.end=this._io.pos,this._debug.apprBitPos={start:this._io.pos,ioOffset:this._io.byteOffset},this.apprBitPos=this._io.readU1(),this._debug.apprBitPos.end=this._io.pos};var i=e.Component=(function(){function t(n,h,_){this._io=n,this._parent=h,this._root=_,this._debug={},this._read()}return t.prototype._read=function(){this._debug.id={start:this._io.pos,ioOffset:this._io.byteOffset,enumName:"Jpeg.ComponentId"},this.id=this._io.readU1(),this._debug.id.end=this._io.pos,this._debug.huffmanTable={start:this._io.pos,ioOffset:this._io.byteOffset},this.huffmanTable=this._io.readU1(),this._debug.huffmanTable.end=this._io.pos},t})();return e})();return s})();a.Jpeg=d})}});const w=P(),k={id:"jpeg",title:"JPEG (Joint Photographic Experts Group) File Interchange Format",ksy:{meta:{id:"jpeg",title:"JPEG (Joint Photographic Experts Group) File Interchange Format","file-extension":["jpg","jpeg","jpe","jif","jfif","jfi"],xref:{ecma:"TR/98",forensicswiki:"jpeg",justsolve:"JFIF",loc:"fdd000017",mime:"image/jpeg",pronom:["fmt/42","fmt/43","fmt/44"],wikidata:"Q26329975"},license:"CC0-1.0",imports:["exif"],endian:"be"},doc:`JPEG File Interchange Format, or JFIF, or, more colloquially known
as just "JPEG" or "JPG", is a popular 2D bitmap image file format,
offering lossy compression which works reasonably well with
photographic images.

Format is organized as a container format, serving multiple
"segments", each starting with a magic and a marker. JFIF standard
dictates order and mandatory appearance of segments:

* SOI
* APP0 (with JFIF magic)
* APP0 (with JFXX magic, optional)
* everything else
* SOS
* JPEG-compressed stream
* EOI
`,seq:[{id:"segments",type:"segment",repeat:"eos"}],types:{segment:{seq:[{id:"magic",contents:[255]},{id:"marker",type:"u1",enum:"marker_enum"},{id:"length",type:"u2",if:"marker != marker_enum::soi and marker != marker_enum::eoi"},{id:"data",size:"length - 2",if:"marker != marker_enum::soi and marker != marker_enum::eoi",type:{"switch-on":"marker",cases:{"marker_enum::app0":"segment_app0","marker_enum::app1":"segment_app1","marker_enum::sof0":"segment_sof0","marker_enum::sos":"segment_sos"}}},{id:"image_data","size-eos":!0,if:"marker == marker_enum::sos"}],enums:{marker_enum:{1:"tem",192:"sof0",193:"sof1",194:"sof2",195:"sof3",196:"dht",197:"sof5",198:"sof6",199:"sof7",216:"soi",217:"eoi",218:"sos",219:"dqt",220:"dnl",221:"dri",222:"dhp",224:"app0",225:"app1",226:"app2",227:"app3",228:"app4",229:"app5",230:"app6",231:"app7",232:"app8",233:"app9",234:"app10",235:"app11",236:"app12",237:"app13",238:"app14",239:"app15",254:"com"}}},segment_app0:{seq:[{id:"magic",type:"str",encoding:"ASCII",size:5},{id:"version_major",type:"u1"},{id:"version_minor",type:"u1"},{id:"density_units",type:"u1",enum:"density_unit"},{id:"density_x",type:"u2",doc:"Horizontal pixel density. Must not be zero."},{id:"density_y",type:"u2",doc:"Vertical pixel density. Must not be zero."},{id:"thumbnail_x",type:"u1",doc:"Horizontal pixel count of the following embedded RGB thumbnail. May be zero."},{id:"thumbnail_y",type:"u1",doc:"Vertical pixel count of the following embedded RGB thumbnail. May be zero."},{id:"thumbnail",size:"thumbnail_x * thumbnail_y * 3",doc:"Uncompressed 24 bit RGB (8 bits per color channel) raster thumbnail data in the order R0, G0, B0, ... Rn, Gn, Bn"}],enums:{density_unit:{0:"no_units",1:"pixels_per_inch",2:"pixels_per_cm"}}},segment_app1:{seq:[{id:"magic",type:"strz",encoding:"ASCII"},{id:"body",type:{"switch-on":"magic",cases:{'"Exif"':"exif_in_jpeg"}}}]},segment_sof0:{seq:[{id:"bits_per_sample",type:"u1"},{id:"image_height",type:"u2"},{id:"image_width",type:"u2"},{id:"num_components",type:"u1"},{id:"components",type:"component",repeat:"expr","repeat-expr":"num_components"}],types:{component:{seq:[{id:"id",type:"u1",enum:"component_id",doc:"Component selector"},{id:"sampling_factors",type:"u1"},{id:"quantization_table_id",type:"u1"}],instances:{sampling_x:{value:"(sampling_factors & 0xf0) >> 4"},sampling_y:{value:"sampling_factors & 0xf"}}}}},segment_sos:{seq:[{id:"num_components",type:"u1",doc:"Number of components in scan"},{id:"components",type:"component",repeat:"expr","repeat-expr":"num_components",doc:"Scan components specification"},{id:"start_spectral_selection",type:"u1",doc:"Start of spectral selection or predictor selection"},{id:"end_spectral",type:"u1",doc:"End of spectral selection"},{id:"appr_bit_pos",type:"u1",doc:"Successive approximation bit position high + Successive approximation bit position low or point transform"}],types:{component:{seq:[{id:"id",type:"u1",enum:"component_id",doc:"Scan component selector"},{id:"huffman_table",type:"u1"}]}}},exif_in_jpeg:{seq:[{id:"extra_zero",contents:[0]},{id:"data","size-eos":!0,type:"exif"}]}},enums:{component_id:{1:"y",2:"cb",3:"cr",4:"i",5:"q"}}}};export{w as default,k as spec};
