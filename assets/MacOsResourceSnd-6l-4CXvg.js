import{k as b}from"./index-CMEpbKl5.js";var y=Object.getOwnPropertyNames,g=(d,n)=>function(){return n||(0,d[y(d)[0]])((n={exports:{}}).exports,n),n.exports},l=g({"<stdin>"(d){(function(n,a){typeof define=="function"&&define.amd?define(["exports","kaitai-struct/KaitaiStream"],a):typeof d=="object"&&d!==null&&typeof d.nodeType!="number"?a(d,b.KaitaiStream):a(n.MacOsResourceSnd||(n.MacOsResourceSnd={}),n.KaitaiStream)})(typeof self<"u"?self:d,function(n,a){var r=(function(){t.CmdType=Object.freeze({NULL_CMD:0,QUIET_CMD:3,FLUSH_CMD:4,RE_INIT_CMD:5,WAIT_CMD:10,PAUSE_CMD:11,RESUME_CMD:12,CALL_BACK_CMD:13,SYNC_CMD:14,EMPTY_CMD:15,AVAILABLE_CMD:24,VERSION_CMD:25,TOTAL_LOAD_CMD:26,LOAD_CMD:27,FREQ_DURATION_CMD:40,REST_CMD:41,FREQ_CMD:42,AMP_CMD:43,TIMBRE_CMD:44,GET_AMP_CMD:45,VOLUME_CMD:46,GET_VOLUME_CMD:47,WAVE_TABLE_CMD:60,PHASE_CMD:61,SOUND_CMD:80,BUFFER_CMD:81,RATE_CMD:82,GET_RATE_CMD:85,0:"NULL_CMD",3:"QUIET_CMD",4:"FLUSH_CMD",5:"RE_INIT_CMD",10:"WAIT_CMD",11:"PAUSE_CMD",12:"RESUME_CMD",13:"CALL_BACK_CMD",14:"SYNC_CMD",15:"EMPTY_CMD",24:"AVAILABLE_CMD",25:"VERSION_CMD",26:"TOTAL_LOAD_CMD",27:"LOAD_CMD",40:"FREQ_DURATION_CMD",41:"REST_CMD",42:"FREQ_CMD",43:"AMP_CMD",44:"TIMBRE_CMD",45:"GET_AMP_CMD",46:"VOLUME_CMD",47:"GET_VOLUME_CMD",60:"WAVE_TABLE_CMD",61:"PHASE_CMD",80:"SOUND_CMD",81:"BUFFER_CMD",82:"RATE_CMD",85:"GET_RATE_CMD"}),t.CompressionTypeEnum=Object.freeze({VARIABLE_COMPRESSION:-2,FIXED_COMPRESSION:-1,NOT_COMPRESSED:0,TWO_TO_ONE:1,EIGHT_TO_THREE:2,THREE_TO_ONE:3,SIX_TO_ONE:4,"-2":"VARIABLE_COMPRESSION","-1":"FIXED_COMPRESSION",0:"NOT_COMPRESSED",1:"TWO_TO_ONE",2:"EIGHT_TO_THREE",3:"THREE_TO_ONE",4:"SIX_TO_ONE"}),t.DataType=Object.freeze({SQUARE_WAVE_SYNTH:1,WAVE_TABLE_SYNTH:3,SAMPLED_SYNTH:5,1:"SQUARE_WAVE_SYNTH",3:"WAVE_TABLE_SYNTH",5:"SAMPLED_SYNTH"}),t.InitOption=Object.freeze({CHAN_LEFT:2,CHAN_RIGHT:3,NO_INTERP:4,NO_DROP:8,MONO:128,STEREO:192,MACE3:768,MACE6:1024,2:"CHAN_LEFT",3:"CHAN_RIGHT",4:"NO_INTERP",8:"NO_DROP",128:"MONO",192:"STEREO",768:"MACE3",1024:"MACE6"}),t.SoundHeaderType=Object.freeze({STANDARD:0,COMPRESSED:254,EXTENDED:255,0:"STANDARD",254:"COMPRESSED",255:"EXTENDED"}),t.WaveInitOption=Object.freeze({CHANNEL0:4,CHANNEL1:5,CHANNEL2:6,CHANNEL3:7,4:"CHANNEL0",5:"CHANNEL1",6:"CHANNEL2",7:"CHANNEL3"});function t(e,i,s){this._io=e,this._parent=i,this._root=s||this,this._debug={},this._read()}t.prototype._read=function(){if(this._debug.format={start:this._io.pos,ioOffset:this._io.byteOffset},this.format=this._io.readU2be(),this._debug.format.end=this._io.pos,this.format==1&&(this._debug.numDataFormats={start:this._io.pos,ioOffset:this._io.byteOffset},this.numDataFormats=this._io.readU2be(),this._debug.numDataFormats.end=this._io.pos),this.format==1){this._debug.dataFormats={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.dataFormats.arr=[],this.dataFormats=[];for(var e=0;e<this.numDataFormats;e++)this._debug.dataFormats.arr[e]={start:this._io.pos,ioOffset:this._io.byteOffset},this.dataFormats.push(new h(this._io,this,this._root)),this._debug.dataFormats.arr[e].end=this._io.pos;this._debug.dataFormats.end=this._io.pos}this.format==2&&(this._debug.referenceCount={start:this._io.pos,ioOffset:this._io.byteOffset},this.referenceCount=this._io.readU2be(),this._debug.referenceCount.end=this._io.pos),this._debug.numSoundCommands={start:this._io.pos,ioOffset:this._io.byteOffset},this.numSoundCommands=this._io.readU2be(),this._debug.numSoundCommands.end=this._io.pos,this._debug.soundCommands={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.soundCommands.arr=[],this.soundCommands=[];for(var e=0;e<this.numSoundCommands;e++)this._debug.soundCommands.arr[e]={start:this._io.pos,ioOffset:this._io.byteOffset},this.soundCommands.push(new m(this._io,this,this._root)),this._debug.soundCommands.arr[e].end=this._io.pos;this._debug.soundCommands.end=this._io.pos};var _=t.Compressed=(function(){function e(i,s,o){this._io=i,this._parent=s,this._root=o,this._debug={},this._read()}return e.prototype._read=function(){this._debug.format={start:this._io.pos,ioOffset:this._io.byteOffset},this.format=a.bytesToStr(this._io.readBytes(4),"ASCII"),this._debug.format.end=this._io.pos,this._debug.reserved={start:this._io.pos,ioOffset:this._io.byteOffset},this.reserved=this._io.readBytes(4),this._debug.reserved.end=this._io.pos,this._debug.stateVarsPtr={start:this._io.pos,ioOffset:this._io.byteOffset},this.stateVarsPtr=this._io.readU4be(),this._debug.stateVarsPtr.end=this._io.pos,this._debug.leftOverSamplesPtr={start:this._io.pos,ioOffset:this._io.byteOffset},this.leftOverSamplesPtr=this._io.readU4be(),this._debug.leftOverSamplesPtr.end=this._io.pos,this._debug.compressionId={start:this._io.pos,ioOffset:this._io.byteOffset},this.compressionId=this._io.readS2be(),this._debug.compressionId.end=this._io.pos,this._debug.packetSize={start:this._io.pos,ioOffset:this._io.byteOffset},this.packetSize=this._io.readU2be(),this._debug.packetSize.end=this._io.pos,this._debug.synthesizerId={start:this._io.pos,ioOffset:this._io.byteOffset},this.synthesizerId=this._io.readU2be(),this._debug.synthesizerId.end=this._io.pos},Object.defineProperty(e.prototype,"compressionType",{get:function(){return this._m_compressionType!==void 0?this._m_compressionType:(this._debug._m_compressionType={enumName:"MacOsResourceSnd.CompressionTypeEnum"},this._m_compressionType=this.compressionId,this._m_compressionType)}}),e})(),h=t.DataFormat=(function(){function e(i,s,o){this._io=i,this._parent=s,this._root=o,this._debug={},this._read()}return e.prototype._read=function(){this._debug.id={start:this._io.pos,ioOffset:this._io.byteOffset,enumName:"MacOsResourceSnd.DataType"},this.id=this._io.readU2be(),this._debug.id.end=this._io.pos,this._debug.options={start:this._io.pos,ioOffset:this._io.byteOffset},this.options=this._io.readU4be(),this._debug.options.end=this._io.pos},Object.defineProperty(e.prototype,"compInit",{get:function(){return this._m_compInit!==void 0?this._m_compInit:(this._debug._m_compInit={enumName:"MacOsResourceSnd.InitOption"},this._m_compInit=this.options&this.initCompMask,this._m_compInit)}}),Object.defineProperty(e.prototype,"initCompMask",{get:function(){return this._m_initCompMask!==void 0?this._m_initCompMask:(this._debug._m_initCompMask={},this._m_initCompMask=65280,this._m_initCompMask)}}),Object.defineProperty(e.prototype,"initPanMask",{get:function(){return this._m_initPanMask!==void 0?this._m_initPanMask:(this._debug._m_initPanMask={},this._m_initPanMask=3,this._m_initPanMask)}}),Object.defineProperty(e.prototype,"initStereoMask",{get:function(){return this._m_initStereoMask!==void 0?this._m_initStereoMask:(this._debug._m_initStereoMask={},this._m_initStereoMask=192,this._m_initStereoMask)}}),Object.defineProperty(e.prototype,"panInit",{get:function(){return this._m_panInit!==void 0?this._m_panInit:(this._debug._m_panInit={enumName:"MacOsResourceSnd.InitOption"},this._m_panInit=this.options&this.initPanMask,this._m_panInit)}}),Object.defineProperty(e.prototype,"stereoInit",{get:function(){return this._m_stereoInit!==void 0?this._m_stereoInit:(this._debug._m_stereoInit={enumName:"MacOsResourceSnd.InitOption"},this._m_stereoInit=this.options&this.initStereoMask,this._m_stereoInit)}}),Object.defineProperty(e.prototype,"waveInit",{get:function(){return this._m_waveInit!==void 0?this._m_waveInit:(this.id==t.DataType.WAVE_TABLE_SYNTH&&(this._debug._m_waveInit={enumName:"MacOsResourceSnd.WaveInitOption"},this._m_waveInit=this.options&this.waveInitChannelMask),this._m_waveInit)}}),Object.defineProperty(e.prototype,"waveInitChannelMask",{get:function(){return this._m_waveInitChannelMask!==void 0?this._m_waveInitChannelMask:(this._debug._m_waveInitChannelMask={},this._m_waveInitChannelMask=7,this._m_waveInitChannelMask)}}),e})(),p=t.Extended=(function(){function e(i,s,o){this._io=i,this._parent=s,this._root=o,this._debug={},this._read()}return e.prototype._read=function(){this._debug.instrumentChunkPtr={start:this._io.pos,ioOffset:this._io.byteOffset},this.instrumentChunkPtr=this._io.readU4be(),this._debug.instrumentChunkPtr.end=this._io.pos,this._debug.aesRecordingPtr={start:this._io.pos,ioOffset:this._io.byteOffset},this.aesRecordingPtr=this._io.readU4be(),this._debug.aesRecordingPtr.end=this._io.pos},e})(),u=t.ExtendedOrCompressed=(function(){function e(i,s,o){this._io=i,this._parent=s,this._root=o,this._debug={},this._read()}return e.prototype._read=function(){this._debug.numFrames={start:this._io.pos,ioOffset:this._io.byteOffset},this.numFrames=this._io.readU4be(),this._debug.numFrames.end=this._io.pos,this._debug.aiffSampleRate={start:this._io.pos,ioOffset:this._io.byteOffset},this.aiffSampleRate=this._io.readBytes(10),this._debug.aiffSampleRate.end=this._io.pos,this._debug.markerChunk={start:this._io.pos,ioOffset:this._io.byteOffset},this.markerChunk=this._io.readU4be(),this._debug.markerChunk.end=this._io.pos,this._parent.soundHeaderType==t.SoundHeaderType.EXTENDED&&(this._debug.extended={start:this._io.pos,ioOffset:this._io.byteOffset},this.extended=new p(this._io,this,this._root),this._debug.extended.end=this._io.pos),this._parent.soundHeaderType==t.SoundHeaderType.COMPRESSED&&(this._debug.compressed={start:this._io.pos,ioOffset:this._io.byteOffset},this.compressed=new _(this._io,this,this._root),this._debug.compressed.end=this._io.pos),this._debug.bitsPerSample={start:this._io.pos,ioOffset:this._io.byteOffset},this.bitsPerSample=this._io.readU2be(),this._debug.bitsPerSample.end=this._io.pos,this._parent.soundHeaderType==t.SoundHeaderType.EXTENDED&&(this._debug.reserved={start:this._io.pos,ioOffset:this._io.byteOffset},this.reserved=this._io.readBytes(14),this._debug.reserved.end=this._io.pos)},e})(),m=t.SoundCommand=(function(){function e(i,s,o){this._io=i,this._parent=s,this._root=o,this._debug={},this._read()}return e.prototype._read=function(){this._debug.isDataOffset={start:this._io.pos,ioOffset:this._io.byteOffset},this.isDataOffset=this._io.readBitsIntBe(1)!=0,this._debug.isDataOffset.end=this._io.pos,this._debug.cmd={start:this._io.pos,ioOffset:this._io.byteOffset,enumName:"MacOsResourceSnd.CmdType"},this.cmd=this._io.readBitsIntBe(15),this._debug.cmd.end=this._io.pos,this._io.alignToByte(),this._debug.param1={start:this._io.pos,ioOffset:this._io.byteOffset},this.param1=this._io.readU2be(),this._debug.param1.end=this._io.pos,this._debug.param2={start:this._io.pos,ioOffset:this._io.byteOffset},this.param2=this._io.readU4be(),this._debug.param2.end=this._io.pos},Object.defineProperty(e.prototype,"soundHeader",{get:function(){if(this._m_soundHeader!==void 0)return this._m_soundHeader;if(this.isDataOffset&&this.cmd==t.CmdType.BUFFER_CMD){var i=this._io.pos;this._io.seek(this.param2),this._debug._m_soundHeader={start:this._io.pos,ioOffset:this._io.byteOffset},this._m_soundHeader=new f(this._io,this,this._root),this._debug._m_soundHeader.end=this._io.pos,this._io.seek(i)}return this._m_soundHeader}}),e})(),f=t.SoundHeader=(function(){function e(i,s,o){this._io=i,this._parent=s,this._root=o,this._debug={},this._read()}return e.prototype._read=function(){this.startOfs<0&&(this._debug._unnamed0={start:this._io.pos,ioOffset:this._io.byteOffset},this._unnamed0=this._io.readBytes(0),this._debug._unnamed0.end=this._io.pos),this._debug.samplePtr={start:this._io.pos,ioOffset:this._io.byteOffset},this.samplePtr=this._io.readU4be(),this._debug.samplePtr.end=this._io.pos,this.soundHeaderType==t.SoundHeaderType.STANDARD&&(this._debug.numSamples={start:this._io.pos,ioOffset:this._io.byteOffset},this.numSamples=this._io.readU4be(),this._debug.numSamples.end=this._io.pos),(this.soundHeaderType==t.SoundHeaderType.EXTENDED||this.soundHeaderType==t.SoundHeaderType.COMPRESSED)&&(this._debug.numChannels={start:this._io.pos,ioOffset:this._io.byteOffset},this.numChannels=this._io.readU4be(),this._debug.numChannels.end=this._io.pos),this._debug.sampleRate={start:this._io.pos,ioOffset:this._io.byteOffset},this.sampleRate=new c(this._io,this,this._root),this._debug.sampleRate.end=this._io.pos,this._debug.loopStart={start:this._io.pos,ioOffset:this._io.byteOffset},this.loopStart=this._io.readU4be(),this._debug.loopStart.end=this._io.pos,this._debug.loopEnd={start:this._io.pos,ioOffset:this._io.byteOffset},this.loopEnd=this._io.readU4be(),this._debug.loopEnd.end=this._io.pos,this._debug.encode={start:this._io.pos,ioOffset:this._io.byteOffset,enumName:"MacOsResourceSnd.SoundHeaderType"},this.encode=this._io.readU1(),this._debug.encode.end=this._io.pos,this._debug.midiNote={start:this._io.pos,ioOffset:this._io.byteOffset},this.midiNote=this._io.readU1(),this._debug.midiNote.end=this._io.pos,(this.soundHeaderType==t.SoundHeaderType.EXTENDED||this.soundHeaderType==t.SoundHeaderType.COMPRESSED)&&(this._debug.extendedOrCompressed={start:this._io.pos,ioOffset:this._io.byteOffset},this.extendedOrCompressed=new u(this._io,this,this._root),this._debug.extendedOrCompressed.end=this._io.pos),this.samplePtr==0&&(this._debug.sampleArea={start:this._io.pos,ioOffset:this._io.byteOffset},this.sampleArea=this._io.readBytes(this.soundHeaderType==t.SoundHeaderType.STANDARD?this.numSamples:this.soundHeaderType==t.SoundHeaderType.EXTENDED?Math.floor(this.extendedOrCompressed.numFrames*this.numChannels*this.extendedOrCompressed.bitsPerSample/8):this._io.size-this._io.pos),this._debug.sampleArea.end=this._io.pos)},Object.defineProperty(e.prototype,"baseFreqeuncy",{get:function(){return this._m_baseFreqeuncy!==void 0?this._m_baseFreqeuncy:(this.midiNote>=0&&this.midiNote<128&&(this._debug._m_baseFreqeuncy={},this._m_baseFreqeuncy=this._root.midiNoteToFrequency[this.midiNote]),this._m_baseFreqeuncy)}}),Object.defineProperty(e.prototype,"soundHeaderType",{get:function(){if(this._m_soundHeaderType!==void 0)return this._m_soundHeaderType;var i=this._io.pos;return this._io.seek(this.startOfs+20),this._debug._m_soundHeaderType={start:this._io.pos,ioOffset:this._io.byteOffset,enumName:"MacOsResourceSnd.SoundHeaderType"},this._m_soundHeaderType=this._io.readU1(),this._debug._m_soundHeaderType.end=this._io.pos,this._io.seek(i),this._m_soundHeaderType}}),Object.defineProperty(e.prototype,"startOfs",{get:function(){return this._m_startOfs!==void 0?this._m_startOfs:(this._debug._m_startOfs={},this._m_startOfs=this._io.pos,this._m_startOfs)}}),e})(),c=t.UnsignedFixedPoint=(function(){function e(i,s,o){this._io=i,this._parent=s,this._root=o,this._debug={},this._read()}return e.prototype._read=function(){this._debug.integerPart={start:this._io.pos,ioOffset:this._io.byteOffset},this.integerPart=this._io.readU2be(),this._debug.integerPart.end=this._io.pos,this._debug.fractionPart={start:this._io.pos,ioOffset:this._io.byteOffset},this.fractionPart=this._io.readU2be(),this._debug.fractionPart.end=this._io.pos},Object.defineProperty(e.prototype,"value",{get:function(){return this._m_value!==void 0?this._m_value:(this._debug._m_value={},this._m_value=this.integerPart+this.fractionPart/65535,this._m_value)}}),e})();return Object.defineProperty(t.prototype,"midiNoteToFrequency",{get:function(){return this._m_midiNoteToFrequency!==void 0?this._m_midiNoteToFrequency:(this._debug._m_midiNoteToFrequency={},this._m_midiNoteToFrequency=[8.18,8.66,9.18,9.72,10.3,10.91,11.56,12.25,12.98,13.75,14.57,15.43,16.35,17.32,18.35,19.45,20.6,21.83,23.12,24.5,25.96,27.5,29.14,30.87,32.7,34.65,36.71,38.89,41.2,43.65,46.25,49,51.91,55,58.27,61.74,65.41,69.3,73.42,77.78,82.41,87.31,92.5,98,103.83,110,116.54,123.47,130.81,138.59,146.83,155.56,164.81,174.61,185,196,207.65,220,233.08,246.94,261.63,277.18,293.66,311.13,329.63,349.23,369.99,392,415.3,440,466.16,493.88,523.25,554.37,587.33,622.25,659.26,698.46,739.99,783.99,830.61,880,932.33,987.77,1046.5,1108.73,1174.66,1244.51,1318.51,1396.91,1479.98,1567.98,1661.22,1760,1864.66,1975.53,2093,2217.46,2349.32,2489.02,2637.02,2793.83,2959.96,3135.96,3322.44,3520,3729.31,3951.07,4186.01,4434.92,4698.64,4978.03,5274.04,5587.65,5919.91,6271.93,6644.88,7040,7458.62,7902.13,8372.02,8869.84,9397.27,9956.06,10548.08,11175.3,11839.82,12543.85],this._m_midiNoteToFrequency)}}),t})();n.MacOsResourceSnd=r})}});const C=l(),M={id:"mac_os_resource_snd",title:"Classic MacOS Sound Resource",ksy:{meta:{id:"mac_os_resource_snd",title:"Classic MacOS Sound Resource",application:"Sound Manager",xref:{"mac-os-resource-type":"snd ",wikidata:"Q7564684"},license:"MIT",endian:"be"},doc:`Sound resources were introduced in Classic MacOS with the Sound Manager program.
They can contain sound commands to generate sounds with given frequencies as well as sampled sound data.
They are mostly found in resource forks, but can occasionally appear standalone or embedded in other files.
`,"doc-ref":"https://developer.apple.com/library/archive/documentation/mac/pdf/Sound/Sound_Manager.pdf",seq:[{id:"format",type:"u2"},{id:"num_data_formats","-orig-id":"number_of_data_formats",type:"u2",if:"format == 1"},{id:"data_formats",type:"data_format",repeat:"expr","repeat-expr":"num_data_formats",if:"format == 1"},{id:"reference_count",type:"u2",if:"format == 2"},{id:"num_sound_commands","-orig-id":"number_of_sound_commands",type:"u2"},{id:"sound_commands",type:"sound_command",repeat:"expr","repeat-expr":"num_sound_commands"}],instances:{midi_note_to_frequency:{value:`[
  8.18, 8.66, 9.18, 9.72, 10.30, 10.91, 11.56, 12.25,
  12.98, 13.75, 14.57, 15.43, 16.35, 17.32, 18.35, 19.45,
  20.60, 21.83, 23.12, 24.50, 25.96, 27.50, 29.14, 30.87,
  32.70, 34.65, 36.71, 38.89, 41.20, 43.65, 46.25, 49.00,
  51.91, 55.00, 58.27, 61.74, 65.41, 69.30, 73.42, 77.78,
  82.41, 87.31, 92.50, 98.00, 103.83, 110.00, 116.54, 123.47,
  130.81, 138.59, 146.83, 155.56, 164.81, 174.61, 185.00, 196.00,
  207.65, 220.00, 233.08, 246.94, 261.63, 277.18, 293.66, 311.13,
  329.63, 349.23, 369.99, 392.00, 415.30, 440.00, 466.16, 493.88,
  523.25, 554.37, 587.33, 622.25, 659.26, 698.46, 739.99, 783.99,
  830.61, 880.00, 932.33, 987.77, 1046.50, 1108.73, 1174.66, 1244.51,
  1318.51, 1396.91, 1479.98, 1567.98, 1661.22, 1760.00, 1864.66, 1975.53,
  2093.00, 2217.46, 2349.32, 2489.02, 2637.02, 2793.83, 2959.96, 3135.96,
  3322.44, 3520.00, 3729.31, 3951.07, 4186.01, 4434.92, 4698.64, 4978.03,
  5274.04, 5587.65, 5919.91, 6271.93, 6644.88, 7040.00, 7458.62, 7902.13,
  8372.02, 8869.84, 9397.27, 9956.06, 10548.08, 11175.30, 11839.82, 12543.85
]
`,doc:`Lookup table to convert a MIDI note into a frequency in Hz
The lookup table represents the formula (2 ** ((midi_note - 69) / 12)) * 440
`,"doc-ref":"https://en.wikipedia.org/wiki/MIDI_tuning_standard"}},types:{data_format:{seq:[{id:"id",type:"u2",enum:"data_type"},{id:"options",type:"u4",doc:"contains initialisation options for the SndNewChannel function"}],instances:{wave_init_channel_mask:{value:7,doc:"wave table only, Sound Manager 2.0 and earlier"},wave_init:{value:"options & wave_init_channel_mask",enum:"wave_init_option",if:"id == data_type::wave_table_synth"},init_pan_mask:{"-orig-id":"initPanMask",value:3,doc:"mask for right/left pan values"},pan_init:{value:"options & init_pan_mask",enum:"init_option"},init_stereo_mask:{"-orig-id":"initStereoMask",value:192,doc:"mask for mono/stereo values"},stereo_init:{value:"options & init_stereo_mask",enum:"init_option"},init_comp_mask:{"-orig-id":"initCompMask",value:65280,doc:"mask for compression IDs"},comp_init:{value:"options & init_comp_mask",enum:"init_option"}}},sound_command:{seq:[{id:"is_data_offset",type:"b1"},{id:"cmd",type:"b15",enum:"cmd_type"},{id:"param1",type:"u2"},{id:"param2",type:"u4"}],instances:{sound_header:{pos:"param2",type:"sound_header",if:"is_data_offset and cmd == cmd_type::buffer_cmd"}}},sound_header:{seq:[{size:0,if:"start_ofs < 0"},{id:"sample_ptr","-orig-id":"samplePtr",type:"u4",doc:"pointer to samples (or 0 if samples follow data structure)"},{id:"num_samples","-orig-id":"length",type:"u4",doc:"number of samples",if:"sound_header_type == sound_header_type::standard"},{id:"num_channels","-orig-id":"numChannels",type:"u4",doc:"number of channels in sample",if:"sound_header_type == sound_header_type::extended or sound_header_type == sound_header_type::compressed"},{id:"sample_rate","-orig-id":"sampleRate",type:"unsigned_fixed_point",doc:"The rate at which the sample was originally recorded."},{id:"loop_start","-orig-id":"loopStart",type:"u4",doc:"loop point beginning"},{id:"loop_end","-orig-id":"loopEnd",type:"u4",doc:"loop point ending"},{id:"encode",type:"u1",enum:"sound_header_type",doc:"sample's encoding option"},{id:"midi_note",type:"u1",doc:"base frequency of sample, expressed as MIDI note values, 60 is middle C","-orig-id":"baseFrequency"},{id:"extended_or_compressed",type:"extended_or_compressed",if:"sound_header_type == sound_header_type::extended or sound_header_type == sound_header_type::compressed"},{id:"sample_area","-orig-id":"sampleArea",size:`sound_header_type == sound_header_type::standard ? num_samples :
sound_header_type == sound_header_type::extended ? extended_or_compressed.num_frames * num_channels * extended_or_compressed.bits_per_sample / 8 :
_io.size - _io.pos
`,doc:"sampled-sound data",if:"sample_ptr == 0"}],instances:{start_ofs:{value:"_io.pos"},base_freqeuncy:{value:"_root.midi_note_to_frequency[midi_note]",if:"midi_note >= 0 and midi_note < 128",doc:`base frequency of sample in Hz
Calculated with the formula (2 ** ((midi_note - 69) / 12)) * 440
`,"doc-ref":"https://en.wikipedia.org/wiki/MIDI_tuning_standard"},sound_header_type:{pos:"start_ofs + 20",type:"u1",enum:"sound_header_type"}}},extended_or_compressed:{seq:[{id:"num_frames",type:"u4"},{id:"aiff_sample_rate",size:10,doc:"rate of original sample (Extended80)"},{id:"marker_chunk","-orig-id":"markerChunk",type:"u4",doc:"reserved"},{id:"extended",type:"extended",if:"_parent.sound_header_type == sound_header_type::extended"},{id:"compressed",type:"compressed",if:"_parent.sound_header_type == sound_header_type::compressed"},{id:"bits_per_sample","-orig-id":"sampleSize",type:"u2",doc:"number of bits per sample"},{id:"reserved","-orig-id":"futureUse1, futureUse2, futureUse3, futureUse4",size:14,doc:"reserved",if:"_parent.sound_header_type == sound_header_type::extended"}]},extended:{seq:[{id:"instrument_chunk_ptr","-orig-id":"instrumentChunks",type:"u4",doc:"pointer to instrument info"},{id:"aes_recording_ptr","-orig-id":"AESRecording",type:"u4",doc:"pointer to audio info"}]},compressed:{seq:[{id:"format",size:4,type:"str",encoding:"ASCII",doc:"data format type"},{id:"reserved","-orig-id":"futureUse2",size:4},{id:"state_vars_ptr","-orig-id":"stateVars",type:"u4",doc:"pointer to StateBlock"},{id:"left_over_samples_ptr","-orig-id":"leftOverSamples",type:"u4",doc:"pointer to LeftOverBlock"},{id:"compression_id","-orig-id":"compressionID",type:"s2",doc:"ID of compression algorithm"},{id:"packet_size","-orig-id":"packetSize",type:"u2",doc:"number of bits per packet"},{id:"synthesizer_id","-orig-id":"snthID",type:"u2",doc:`Latest Sound Manager documentation specifies this field as:
This field is unused. You should set it to 0.
Inside Macintosh (Volume VI, 1991) specifies it as:
Indicates the resource ID number of the 'snth' resource that was used to compress the packets contained in the compressed sound header.
`,"doc-ref":"https://vintageapple.org/inside_o/pdf/Inside_Macintosh_Volume_VI_1991.pdf Page 22-49, absolute page number 1169 in the PDF"}],instances:{compression_type:{value:"compression_id",enum:"compression_type_enum"}}},unsigned_fixed_point:{seq:[{id:"integer_part",type:"u2"},{id:"fraction_part",type:"u2"}],instances:{value:{value:"integer_part + fraction_part/65535.0"}}}},enums:{data_type:{1:"square_wave_synth",3:"wave_table_synth",5:"sampled_synth"},wave_init_option:{4:{id:"channel0","-orig-id":"waveInitChannel0",doc:"Play sounds through the first wave-table channel"},5:{id:"channel1","-orig-id":"waveInitChannel1",doc:"Play sounds through the second wave-table channel"},6:{id:"channel2","-orig-id":"waveInitChannel2",doc:"Play sounds through the third wave-table channel"},7:{id:"channel3","-orig-id":"waveInitChannel3",doc:"Play sounds through the fourth wave-table channel"}},init_option:{2:{id:"chan_left","-orig-id":"initChanLeft",doc:"left stereo channel"},3:{id:"chan_right","-orig-id":"initChanRight",doc:"right stereo channel"},4:{id:"no_interp","-orig-id":"initNoInterp",doc:"no linear interpolation"},8:{id:"no_drop","-orig-id":"initNoDrop",doc:"no drop-sample conversion"},128:{id:"mono","-orig-id":"initMono",doc:"monophonic channel"},192:{id:"stereo","-orig-id":"initStereo",doc:"stereo channel"},768:{id:"mace3","-orig-id":"initMACE3",doc:"MACE 3:1"},1024:{id:"mace6","-orig-id":"initMACE6",doc:"MACE 6:1"}},cmd_type:{0:{id:"null_cmd","-orig-id":"nullCmd",doc:"do nothing"},3:{id:"quiet_cmd","-orig-id":"quietCmd",doc:"stop a sound that is playing"},4:{id:"flush_cmd","-orig-id":"flushCmd",doc:"flush a sound channel"},5:{id:"re_init_cmd","-orig-id":"reInitCmd",doc:"reinitialize a sound channel"},10:{id:"wait_cmd","-orig-id":"waitCmd",doc:"suspend processing in a channel"},11:{id:"pause_cmd","-orig-id":"pauseCmd",doc:"pause processing in a channel"},12:{id:"resume_cmd","-orig-id":"resumeCmd",doc:"resume processing in a channel"},13:{id:"call_back_cmd","-orig-id":"callBackCmd",doc:"execute a callback procedure"},14:{id:"sync_cmd","-orig-id":"syncCmd",doc:"synchronize channels"},15:{id:"empty_cmd","-orig-id":"emptyCmd",doc:`If no other commands are pending in the sound channel after a
resumeCmd command, the Sound Manager sends an emptyCmd command.
The emptyCmd command is sent only by the Sound Manager and
should not be issued by your application.
`},24:{id:"available_cmd","-orig-id":"availableCmd",doc:"see if initialization options are supported"},25:{id:"version_cmd","-orig-id":"versionCmd",doc:"determine version"},26:{id:"total_load_cmd","-orig-id":"totalLoadCmd",doc:"report total CPU load"},27:{id:"load_cmd","-orig-id":"loadCmd",doc:"report CPU load for a new channel"},40:{id:"freq_duration_cmd","-orig-id":"freqDurationCmd",doc:"play a note for a duration"},41:{id:"rest_cmd","-orig-id":"restCmd",doc:"rest a channel for a duration"},42:{id:"freq_cmd","-orig-id":"freqCmd",doc:"change the pitch of a sound"},43:{id:"amp_cmd","-orig-id":"ampCmd",doc:"change the amplitude of a sound"},44:{id:"timbre_cmd","-orig-id":"timbreCmd",doc:"change the timbre of a sound"},45:{id:"get_amp_cmd","-orig-id":"getAmpCmd",doc:"get the amplitude of a sound"},46:{id:"volume_cmd","-orig-id":"volumeCmd",doc:"set volume"},47:{id:"get_volume_cmd","-orig-id":"getVolumeCmd",doc:"get volume"},60:{id:"wave_table_cmd","-orig-id":"waveTableCmd",doc:"install a wave table as a voice"},61:{id:"phase_cmd","-orig-id":"phaseCmd",doc:"Not documented"},80:{id:"sound_cmd","-orig-id":"soundCmd",doc:"install a sampled sound as a voice"},81:{id:"buffer_cmd","-orig-id":"bufferCmd",doc:"play a sampled sound"},82:{id:"rate_cmd","-orig-id":"rateCmd",doc:"set the pitch of a sampled sound"},85:{id:"get_rate_cmd","-orig-id":"getRateCmd",doc:"get the pitch of a sampled sound"}},sound_header_type:{0:"standard",254:"compressed",255:"extended"},compression_type_enum:{0:"not_compressed",1:"two_to_one",2:"eight_to_three",3:"three_to_one",4:"six_to_one","-2":"variable_compression","-1":"fixed_compression"}}}};export{C as default,M as spec};
