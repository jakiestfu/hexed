import{k as u}from"./index-CMEpbKl5.js";var l=Object.getOwnPropertyNames,c=(n,o)=>function(){return o||(0,n[l(n)[0]])((o={exports:{}}).exports,o),o.exports},b=c({"<stdin>"(n){(function(o,_){typeof define=="function"&&define.amd?define(["exports","kaitai-struct/KaitaiStream"],_):typeof n=="object"&&n!==null&&typeof n.nodeType!="number"?_(n,u.KaitaiStream):_(o.Fallout2Dat||(o.Fallout2Dat={}),o.KaitaiStream)})(typeof self<"u"?self:n,function(o,_){var f=(function(){i.Compression=Object.freeze({NONE:0,ZLIB:1,0:"NONE",1:"ZLIB"});function i(e,t,s){this._io=e,this._parent=t,this._root=s||this,this._debug={},this._read()}i.prototype._read=function(){};var h=i.File=(function(){function e(t,s,r){this._io=t,this._parent=s,this._root=r,this._debug={},this._read()}return e.prototype._read=function(){this._debug.name={start:this._io.pos,ioOffset:this._io.byteOffset},this.name=new p(this._io,this,this._root),this._debug.name.end=this._io.pos,this._debug.flags={start:this._io.pos,ioOffset:this._io.byteOffset,enumName:"Fallout2Dat.Compression"},this.flags=this._io.readU1(),this._debug.flags.end=this._io.pos,this._debug.sizeUnpacked={start:this._io.pos,ioOffset:this._io.byteOffset},this.sizeUnpacked=this._io.readU4le(),this._debug.sizeUnpacked.end=this._io.pos,this._debug.sizePacked={start:this._io.pos,ioOffset:this._io.byteOffset},this.sizePacked=this._io.readU4le(),this._debug.sizePacked.end=this._io.pos,this._debug.offset={start:this._io.pos,ioOffset:this._io.byteOffset},this.offset=this._io.readU4le(),this._debug.offset.end=this._io.pos},Object.defineProperty(e.prototype,"contents",{get:function(){return this._m_contents!==void 0?this._m_contents:((this.flags==i.Compression.ZLIB||this.flags==i.Compression.NONE)&&(this._debug._m_contents={},this._m_contents=this.flags==i.Compression.ZLIB?this.contentsZlib:this.contentsRaw),this._m_contents)}}),Object.defineProperty(e.prototype,"contentsRaw",{get:function(){if(this._m_contentsRaw!==void 0)return this._m_contentsRaw;if(this.flags==i.Compression.NONE){var t=this._root._io,s=t.pos;t.seek(this.offset),this._debug._m_contentsRaw={start:t.pos,ioOffset:t.byteOffset},this._m_contentsRaw=t.readBytes(this.sizeUnpacked),this._debug._m_contentsRaw.end=t.pos,t.seek(s)}return this._m_contentsRaw}}),Object.defineProperty(e.prototype,"contentsZlib",{get:function(){if(this._m_contentsZlib!==void 0)return this._m_contentsZlib;if(this.flags==i.Compression.ZLIB){var t=this._root._io,s=t.pos;t.seek(this.offset),this._debug._m_contentsZlib={start:t.pos,ioOffset:t.byteOffset},this._raw__m_contentsZlib=t.readBytes(this.sizePacked),this._m_contentsZlib=_.processZlib(this._raw__m_contentsZlib),this._debug._m_contentsZlib.end=t.pos,t.seek(s)}return this._m_contentsZlib}}),e})(),a=i.Footer=(function(){function e(t,s,r){this._io=t,this._parent=s,this._root=r,this._debug={},this._read()}return e.prototype._read=function(){this._debug.indexSize={start:this._io.pos,ioOffset:this._io.byteOffset},this.indexSize=this._io.readU4le(),this._debug.indexSize.end=this._io.pos,this._debug.fileSize={start:this._io.pos,ioOffset:this._io.byteOffset},this.fileSize=this._io.readU4le(),this._debug.fileSize.end=this._io.pos},e})(),d=i.Index=(function(){function e(t,s,r){this._io=t,this._parent=s,this._root=r,this._debug={},this._read()}return e.prototype._read=function(){this._debug.fileCount={start:this._io.pos,ioOffset:this._io.byteOffset},this.fileCount=this._io.readU4le(),this._debug.fileCount.end=this._io.pos,this._debug.files={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.files.arr=[],this.files=[];for(var t=0;t<this.fileCount;t++)this._debug.files.arr[t]={start:this._io.pos,ioOffset:this._io.byteOffset},this.files.push(new h(this._io,this,this._root)),this._debug.files.arr[t].end=this._io.pos;this._debug.files.end=this._io.pos},e})(),p=i.Pstr=(function(){function e(t,s,r){this._io=t,this._parent=s,this._root=r,this._debug={},this._read()}return e.prototype._read=function(){this._debug.size={start:this._io.pos,ioOffset:this._io.byteOffset},this.size=this._io.readU4le(),this._debug.size.end=this._io.pos,this._debug.str={start:this._io.pos,ioOffset:this._io.byteOffset},this.str=_.bytesToStr(this._io.readBytes(this.size),"ASCII"),this._debug.str.end=this._io.pos},e})();return Object.defineProperty(i.prototype,"footer",{get:function(){if(this._m_footer!==void 0)return this._m_footer;var e=this._io.pos;return this._io.seek(this._io.size-8),this._debug._m_footer={start:this._io.pos,ioOffset:this._io.byteOffset},this._m_footer=new a(this._io,this,this._root),this._debug._m_footer.end=this._io.pos,this._io.seek(e),this._m_footer}}),Object.defineProperty(i.prototype,"index",{get:function(){if(this._m_index!==void 0)return this._m_index;var e=this._io.pos;return this._io.seek(this._io.size-8-this.footer.indexSize),this._debug._m_index={start:this._io.pos,ioOffset:this._io.byteOffset},this._m_index=new d(this._io,this,this._root),this._debug._m_index.end=this._io.pos,this._io.seek(e),this._m_index}}),i})();o.Fallout2Dat=f})}});const m=b(),y={id:"fallout2_dat",title:"fallout2_dat",ksy:{meta:{id:"fallout2_dat",application:"Fallout 2","file-extension":"dat",xref:{wikidata:"Q32097899"},license:"CC0-1.0",endian:"le"},types:{pstr:{seq:[{id:"size",type:"u4"},{id:"str",type:"str",size:"size",encoding:"ASCII"}]},footer:{seq:[{id:"index_size",type:"u4"},{id:"file_size",type:"u4"}]},index:{seq:[{id:"file_count",type:"u4"},{id:"files",type:"file",repeat:"expr","repeat-expr":"file_count"}]},file:{seq:[{id:"name",type:"pstr"},{id:"flags",type:"u1",enum:"compression"},{id:"size_unpacked",type:"u4"},{id:"size_packed",type:"u4"},{id:"offset",type:"u4"}],instances:{contents_raw:{io:"_root._io",pos:"offset",size:"size_unpacked",if:"flags == compression::none"},contents_zlib:{io:"_root._io",pos:"offset",size:"size_packed",process:"zlib",if:"flags == compression::zlib"},contents:{value:"flags == compression::zlib ? contents_zlib : contents_raw",if:"flags == compression::zlib or flags == compression::none"}}}},instances:{footer:{pos:"_io.size - 8",type:"footer"},index:{pos:"_io.size - 8 - footer.index_size",type:"index"}},enums:{compression:{0:"none",1:"zlib"}}}};export{m as default,y as spec};
