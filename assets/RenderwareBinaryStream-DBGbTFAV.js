import{k as G}from"./index-DZ3xxA7Z.js";var N=Object.getOwnPropertyNames,S=(h,o)=>function(){return o||(0,h[N(h)[0]])((o={exports:{}}).exports,o),o.exports},M=S({"<stdin>"(h){(function(o,r){typeof define=="function"&&define.amd?define(["exports","kaitai-struct/KaitaiStream"],r):typeof h=="object"&&h!==null&&typeof h.nodeType!="number"?r(h,G.KaitaiStream):r(o.RenderwareBinaryStream||(o.RenderwareBinaryStream={}),o.KaitaiStream)})(typeof self<"u"?self:h,function(o,r){var d=(function(){s.Sections=Object.freeze({STRUCT:1,STRING:2,EXTENSION:3,CAMERA:5,TEXTURE:6,MATERIAL:7,MATERIAL_LIST:8,ATOMIC_SECTION:9,PLANE_SECTION:10,WORLD:11,SPLINE:12,MATRIX:13,FRAME_LIST:14,GEOMETRY:15,CLUMP:16,LIGHT:18,UNICODE_STRING:19,ATOMIC:20,TEXTURE_NATIVE:21,TEXTURE_DICTIONARY:22,ANIMATION_DATABASE:23,IMAGE:24,SKIN_ANIMATION:25,GEOMETRY_LIST:26,ANIM_ANIMATION:27,TEAM:28,CROWD:29,DELTA_MORPH_ANIMATION:30,RIGHT_TO_RENDER:31,MULTITEXTURE_EFFECT_NATIVE:32,MULTITEXTURE_EFFECT_DICTIONARY:33,TEAM_DICTIONARY:34,PLATFORM_INDEPENDENT_TEXTURE_DICTIONARY:35,TABLE_OF_CONTENTS:36,PARTICLE_STANDARD_GLOBAL_DATA:37,ALTPIPE:38,PLATFORM_INDEPENDENT_PEDS:39,PATCH_MESH:40,CHUNK_GROUP_START:41,CHUNK_GROUP_END:42,UV_ANIMATION_DICTIONARY:43,COLL_TREE:44,METRICS_PLG:257,SPLINE_PLG:258,STEREO_PLG:259,VRML_PLG:260,MORPH_PLG:261,PVS_PLG:262,MEMORY_LEAK_PLG:263,ANIMATION_PLG:264,GLOSS_PLG:265,LOGO_PLG:266,MEMORY_INFO_PLG:267,RANDOM_PLG:268,PNG_IMAGE_PLG:269,BONE_PLG:270,VRML_ANIM_PLG:271,SKY_MIPMAP_VAL:272,MRM_PLG:273,LOD_ATOMIC_PLG:274,ME_PLG:275,LIGHTMAP_PLG:276,REFINE_PLG:277,SKIN_PLG:278,LABEL_PLG:279,PARTICLES_PLG:280,GEOMTX_PLG:281,SYNTH_CORE_PLG:282,STQPP_PLG:283,PART_PP_PLG:284,COLLISION_PLG:285,HANIM_PLG:286,USER_DATA_PLG:287,MATERIAL_EFFECTS_PLG:288,PARTICLE_SYSTEM_PLG:289,DELTA_MORPH_PLG:290,PATCH_PLG:291,TEAM_PLG:292,CROWD_PP_PLG:293,MIP_SPLIT_PLG:294,ANISOTROPY_PLG:295,GCN_MATERIAL_PLG:297,GEOMETRIC_PVS_PLG:298,XBOX_MATERIAL_PLG:299,MULTI_TEXTURE_PLG:300,CHAIN_PLG:301,TOON_PLG:302,PTANK_PLG:303,PARTICLE_STANDARD_PLG:304,PDS_PLG:305,PRTADV_PLG:306,NORMAL_MAP_PLG:307,ADC_PLG:308,UV_ANIMATION_PLG:309,CHARACTER_SET_PLG:384,NOHS_WORLD_PLG:385,IMPORT_UTIL_PLG:386,SLERP_PLG:387,OPTIM_PLG:388,TL_WORLD_PLG:389,DATABASE_PLG:390,RAYTRACE_PLG:391,RAY_PLG:392,LIBRARY_PLG:393,PLG_2D:400,TILE_RENDER_PLG:401,JPEG_IMAGE_PLG:402,TGA_IMAGE_PLG:403,GIF_IMAGE_PLG:404,QUAT_PLG:405,SPLINE_PVS_PLG:406,MIPMAP_PLG:407,MIPMAPK_PLG:408,FONT_2D:409,INTERSECTION_PLG:410,TIFF_IMAGE_PLG:411,PICK_PLG:412,BMP_IMAGE_PLG:413,RAS_IMAGE_PLG:414,SKIN_FX_PLG:415,VCAT_PLG:416,PATH_2D:417,BRUSH_2D:418,OBJECT_2D:419,SHAPE_2D:420,SCENE_2D:421,PICK_REGION_2D:422,OBJECT_STRING_2D:423,ANIMATION_PLG_2D:424,ANIMATION_2D:425,KEYFRAME_2D:432,MAESTRO_2D:433,BARYCENTRIC:434,PLATFORM_INDEPENDENT_TEXTURE_DICTIONARY_TK:435,TOC_TK:436,TPL_TK:437,ALTPIPE_TK:438,ANIMATION_TK:439,SKIN_SPLIT_TOOKIT:440,COMPRESSED_KEY_TK:441,GEOMETRY_CONDITIONING_PLG:442,WING_PLG:443,GENERIC_PIPELINE_TK:444,LIGHTMAP_CONVERSION_TK:445,FILESYSTEM_PLG:446,DICTIONARY_TK:447,UV_ANIMATION_LINEAR:448,UV_ANIMATION_PARAMETER:449,BIN_MESH_PLG:1294,NATIVE_DATA_PLG:1296,ZMODELER_LOCK:61982,ATOMIC_VISIBILITY_DISTANCE:39055872,CLUMP_VISIBILITY_DISTANCE:39055873,FRAME_VISIBILITY_DISTANCE:39055874,PIPELINE_SET:39056115,UNUSED_5:39056116,TEXDICTIONARY_LINK:39056117,SPECULAR_MATERIAL:39056118,UNUSED_8:39056119,EFFECT_2D:39056120,EXTRA_VERT_COLOUR:39056121,COLLISION_MODEL:39056122,GTA_HANIM:39056123,REFLECTION_MATERIAL:39056124,BREAKABLE:39056125,FRAME:39056126,UNUSED_16:39056127,1:"STRUCT",2:"STRING",3:"EXTENSION",5:"CAMERA",6:"TEXTURE",7:"MATERIAL",8:"MATERIAL_LIST",9:"ATOMIC_SECTION",10:"PLANE_SECTION",11:"WORLD",12:"SPLINE",13:"MATRIX",14:"FRAME_LIST",15:"GEOMETRY",16:"CLUMP",18:"LIGHT",19:"UNICODE_STRING",20:"ATOMIC",21:"TEXTURE_NATIVE",22:"TEXTURE_DICTIONARY",23:"ANIMATION_DATABASE",24:"IMAGE",25:"SKIN_ANIMATION",26:"GEOMETRY_LIST",27:"ANIM_ANIMATION",28:"TEAM",29:"CROWD",30:"DELTA_MORPH_ANIMATION",31:"RIGHT_TO_RENDER",32:"MULTITEXTURE_EFFECT_NATIVE",33:"MULTITEXTURE_EFFECT_DICTIONARY",34:"TEAM_DICTIONARY",35:"PLATFORM_INDEPENDENT_TEXTURE_DICTIONARY",36:"TABLE_OF_CONTENTS",37:"PARTICLE_STANDARD_GLOBAL_DATA",38:"ALTPIPE",39:"PLATFORM_INDEPENDENT_PEDS",40:"PATCH_MESH",41:"CHUNK_GROUP_START",42:"CHUNK_GROUP_END",43:"UV_ANIMATION_DICTIONARY",44:"COLL_TREE",257:"METRICS_PLG",258:"SPLINE_PLG",259:"STEREO_PLG",260:"VRML_PLG",261:"MORPH_PLG",262:"PVS_PLG",263:"MEMORY_LEAK_PLG",264:"ANIMATION_PLG",265:"GLOSS_PLG",266:"LOGO_PLG",267:"MEMORY_INFO_PLG",268:"RANDOM_PLG",269:"PNG_IMAGE_PLG",270:"BONE_PLG",271:"VRML_ANIM_PLG",272:"SKY_MIPMAP_VAL",273:"MRM_PLG",274:"LOD_ATOMIC_PLG",275:"ME_PLG",276:"LIGHTMAP_PLG",277:"REFINE_PLG",278:"SKIN_PLG",279:"LABEL_PLG",280:"PARTICLES_PLG",281:"GEOMTX_PLG",282:"SYNTH_CORE_PLG",283:"STQPP_PLG",284:"PART_PP_PLG",285:"COLLISION_PLG",286:"HANIM_PLG",287:"USER_DATA_PLG",288:"MATERIAL_EFFECTS_PLG",289:"PARTICLE_SYSTEM_PLG",290:"DELTA_MORPH_PLG",291:"PATCH_PLG",292:"TEAM_PLG",293:"CROWD_PP_PLG",294:"MIP_SPLIT_PLG",295:"ANISOTROPY_PLG",297:"GCN_MATERIAL_PLG",298:"GEOMETRIC_PVS_PLG",299:"XBOX_MATERIAL_PLG",300:"MULTI_TEXTURE_PLG",301:"CHAIN_PLG",302:"TOON_PLG",303:"PTANK_PLG",304:"PARTICLE_STANDARD_PLG",305:"PDS_PLG",306:"PRTADV_PLG",307:"NORMAL_MAP_PLG",308:"ADC_PLG",309:"UV_ANIMATION_PLG",384:"CHARACTER_SET_PLG",385:"NOHS_WORLD_PLG",386:"IMPORT_UTIL_PLG",387:"SLERP_PLG",388:"OPTIM_PLG",389:"TL_WORLD_PLG",390:"DATABASE_PLG",391:"RAYTRACE_PLG",392:"RAY_PLG",393:"LIBRARY_PLG",400:"PLG_2D",401:"TILE_RENDER_PLG",402:"JPEG_IMAGE_PLG",403:"TGA_IMAGE_PLG",404:"GIF_IMAGE_PLG",405:"QUAT_PLG",406:"SPLINE_PVS_PLG",407:"MIPMAP_PLG",408:"MIPMAPK_PLG",409:"FONT_2D",410:"INTERSECTION_PLG",411:"TIFF_IMAGE_PLG",412:"PICK_PLG",413:"BMP_IMAGE_PLG",414:"RAS_IMAGE_PLG",415:"SKIN_FX_PLG",416:"VCAT_PLG",417:"PATH_2D",418:"BRUSH_2D",419:"OBJECT_2D",420:"SHAPE_2D",421:"SCENE_2D",422:"PICK_REGION_2D",423:"OBJECT_STRING_2D",424:"ANIMATION_PLG_2D",425:"ANIMATION_2D",432:"KEYFRAME_2D",433:"MAESTRO_2D",434:"BARYCENTRIC",435:"PLATFORM_INDEPENDENT_TEXTURE_DICTIONARY_TK",436:"TOC_TK",437:"TPL_TK",438:"ALTPIPE_TK",439:"ANIMATION_TK",440:"SKIN_SPLIT_TOOKIT",441:"COMPRESSED_KEY_TK",442:"GEOMETRY_CONDITIONING_PLG",443:"WING_PLG",444:"GENERIC_PIPELINE_TK",445:"LIGHTMAP_CONVERSION_TK",446:"FILESYSTEM_PLG",447:"DICTIONARY_TK",448:"UV_ANIMATION_LINEAR",449:"UV_ANIMATION_PARAMETER",1294:"BIN_MESH_PLG",1296:"NATIVE_DATA_PLG",61982:"ZMODELER_LOCK",39055872:"ATOMIC_VISIBILITY_DISTANCE",39055873:"CLUMP_VISIBILITY_DISTANCE",39055874:"FRAME_VISIBILITY_DISTANCE",39056115:"PIPELINE_SET",39056116:"UNUSED_5",39056117:"TEXDICTIONARY_LINK",39056118:"SPECULAR_MATERIAL",39056119:"UNUSED_8",39056120:"EFFECT_2D",39056121:"EXTRA_VERT_COLOUR",39056122:"COLLISION_MODEL",39056123:"GTA_HANIM",39056124:"REFLECTION_MATERIAL",39056125:"BREAKABLE",39056126:"FRAME",39056127:"UNUSED_16"});function s(e,t,i){this._io=e,this._parent=t,this._root=i||this,this._debug={},this._read()}s.prototype._read=function(){switch(this._debug.code={start:this._io.pos,ioOffset:this._io.byteOffset,enumName:"RenderwareBinaryStream.Sections"},this.code=this._io.readU4le(),this._debug.code.end=this._io.pos,this._debug.size={start:this._io.pos,ioOffset:this._io.byteOffset},this.size=this._io.readU4le(),this._debug.size.end=this._io.pos,this._debug.libraryIdStamp={start:this._io.pos,ioOffset:this._io.byteOffset},this.libraryIdStamp=this._io.readU4le(),this._debug.libraryIdStamp.end=this._io.pos,this._debug.body={start:this._io.pos,ioOffset:this._io.byteOffset},this.code){case s.Sections.ATOMIC:this._raw_body=this._io.readBytes(this.size);var e=new r(this._raw_body);this.body=new a(e,this,this._root);break;case s.Sections.CLUMP:this._raw_body=this._io.readBytes(this.size);var e=new r(this._raw_body);this.body=new a(e,this,this._root);break;case s.Sections.FRAME_LIST:this._raw_body=this._io.readBytes(this.size);var e=new r(this._raw_body);this.body=new a(e,this,this._root);break;case s.Sections.GEOMETRY:this._raw_body=this._io.readBytes(this.size);var e=new r(this._raw_body);this.body=new a(e,this,this._root);break;case s.Sections.GEOMETRY_LIST:this._raw_body=this._io.readBytes(this.size);var e=new r(this._raw_body);this.body=new a(e,this,this._root);break;case s.Sections.TEXTURE_DICTIONARY:this._raw_body=this._io.readBytes(this.size);var e=new r(this._raw_body);this.body=new a(e,this,this._root);break;case s.Sections.TEXTURE_NATIVE:this._raw_body=this._io.readBytes(this.size);var e=new r(this._raw_body);this.body=new a(e,this,this._root);break;default:this.body=this._io.readBytes(this.size);break}this._debug.body.end=this._io.pos};var p=s.Frame=(function(){function e(t,i,_){this._io=t,this._parent=i,this._root=_,this._debug={},this._read()}return e.prototype._read=function(){this._debug.rotationMatrix={start:this._io.pos,ioOffset:this._io.byteOffset},this.rotationMatrix=new f(this._io,this,this._root),this._debug.rotationMatrix.end=this._io.pos,this._debug.position={start:this._io.pos,ioOffset:this._io.byteOffset},this.position=new n(this._io,this,this._root),this._debug.position.end=this._io.pos,this._debug.curFrameIdx={start:this._io.pos,ioOffset:this._io.byteOffset},this.curFrameIdx=this._io.readS4le(),this._debug.curFrameIdx.end=this._io.pos,this._debug.matrixCreationFlags={start:this._io.pos,ioOffset:this._io.byteOffset},this.matrixCreationFlags=this._io.readU4le(),this._debug.matrixCreationFlags.end=this._io.pos},e})(),u=s.GeometryNonNative=(function(){function e(t,i,_){this._io=t,this._parent=i,this._root=_,this._debug={},this._read()}return e.prototype._read=function(){if(this._parent.isPrelit){this._debug.prelitColors={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.prelitColors.arr=[],this.prelitColors=[];for(var t=0;t<this._parent.numVertices;t++)this._debug.prelitColors.arr[t]={start:this._io.pos,ioOffset:this._io.byteOffset},this.prelitColors.push(new g(this._io,this,this._root)),this._debug.prelitColors.arr[t].end=this._io.pos;this._debug.prelitColors.end=this._io.pos}this._debug.uvLayers={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.uvLayers.arr=[],this.uvLayers=[];for(var t=0;t<this._parent.numUvLayers;t++)this._debug.uvLayers.arr[t]={start:this._io.pos,ioOffset:this._io.byteOffset},this.uvLayers.push(new A(this._io,this,this._root,this._parent.numVertices)),this._debug.uvLayers.arr[t].end=this._io.pos;this._debug.uvLayers.end=this._io.pos,this._debug.triangles={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.triangles.arr=[],this.triangles=[];for(var t=0;t<this._parent.numTriangles;t++)this._debug.triangles.arr[t]={start:this._io.pos,ioOffset:this._io.byteOffset},this.triangles.push(new P(this._io,this,this._root)),this._debug.triangles.arr[t].end=this._io.pos;this._debug.triangles.end=this._io.pos},e})(),a=s.ListWithHeader=(function(){function e(t,i,_){this._io=t,this._parent=i,this._root=_,this._debug={},this._read()}return e.prototype._read=function(){if(this._debug.code={start:this._io.pos,ioOffset:this._io.byteOffset},this.code=this._io.readBytes(4),this._debug.code.end=this._io.pos,r.byteArrayCompare(this.code,new Uint8Array([1,0,0,0]))!=0){var t=new r.ValidationNotEqualError(new Uint8Array([1,0,0,0]),this.code,this._io,"/types/list_with_header/seq/0");throw this._debug.code.validationError=t,t}switch(this._debug.headerSize={start:this._io.pos,ioOffset:this._io.byteOffset},this.headerSize=this._io.readU4le(),this._debug.headerSize.end=this._io.pos,this._debug.libraryIdStamp={start:this._io.pos,ioOffset:this._io.byteOffset},this.libraryIdStamp=this._io.readU4le(),this._debug.libraryIdStamp.end=this._io.pos,this._debug.header={start:this._io.pos,ioOffset:this._io.byteOffset},this._parent.code){case s.Sections.ATOMIC:this._raw_header=this._io.readBytes(this.headerSize);var i=new r(this._raw_header);this.header=new b(i,this,this._root);break;case s.Sections.CLUMP:this._raw_header=this._io.readBytes(this.headerSize);var i=new r(this._raw_header);this.header=new l(i,this,this._root);break;case s.Sections.FRAME_LIST:this._raw_header=this._io.readBytes(this.headerSize);var i=new r(this._raw_header);this.header=new y(i,this,this._root);break;case s.Sections.GEOMETRY:this._raw_header=this._io.readBytes(this.headerSize);var i=new r(this._raw_header);this.header=new L(i,this,this._root);break;case s.Sections.GEOMETRY_LIST:this._raw_header=this._io.readBytes(this.headerSize);var i=new r(this._raw_header);this.header=new c(i,this,this._root);break;case s.Sections.TEXTURE_DICTIONARY:this._raw_header=this._io.readBytes(this.headerSize);var i=new r(this._raw_header);this.header=new I(i,this,this._root);break;default:this.header=this._io.readBytes(this.headerSize);break}for(this._debug.header.end=this._io.pos,this._debug.entries={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.entries.arr=[],this.entries=[];!this._io.isEof();)this._debug.entries.arr[this.entries.length]={start:this._io.pos,ioOffset:this._io.byteOffset},this.entries.push(new s(this._io,this,this._root)),this._debug.entries.arr[this.entries.length-1].end=this._io.pos;this._debug.entries.end=this._io.pos},Object.defineProperty(e.prototype,"version",{get:function(){return this._m_version!==void 0?this._m_version:(this._debug._m_version={},this._m_version=(this.libraryIdStamp&4294901760)!=0?(this.libraryIdStamp>>>14&261888)+196608|this.libraryIdStamp>>>16&63:this.libraryIdStamp<<8,this._m_version)}}),e})(),f=s.Matrix=(function(){function e(t,i,_){this._io=t,this._parent=i,this._root=_,this._debug={},this._read()}return e.prototype._read=function(){this._debug.entries={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.entries.arr=[],this.entries=[];for(var t=0;t<3;t++)this._debug.entries.arr[t]={start:this._io.pos,ioOffset:this._io.byteOffset},this.entries.push(new n(this._io,this,this._root)),this._debug.entries.arr[t].end=this._io.pos;this._debug.entries.end=this._io.pos},e})(),m=s.MorphTarget=(function(){function e(t,i,_){this._io=t,this._parent=i,this._root=_,this._debug={},this._read()}return e.prototype._read=function(){if(this._debug.boundingSphere={start:this._io.pos,ioOffset:this._io.byteOffset},this.boundingSphere=new T(this._io,this,this._root),this._debug.boundingSphere.end=this._io.pos,this._debug.hasVertices={start:this._io.pos,ioOffset:this._io.byteOffset},this.hasVertices=this._io.readU4le(),this._debug.hasVertices.end=this._io.pos,this._debug.hasNormals={start:this._io.pos,ioOffset:this._io.byteOffset},this.hasNormals=this._io.readU4le(),this._debug.hasNormals.end=this._io.pos,this.hasVertices!=0){this._debug.vertices={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.vertices.arr=[],this.vertices=[];for(var t=0;t<this._parent.numVertices;t++)this._debug.vertices.arr[t]={start:this._io.pos,ioOffset:this._io.byteOffset},this.vertices.push(new n(this._io,this,this._root)),this._debug.vertices.arr[t].end=this._io.pos;this._debug.vertices.end=this._io.pos}if(this.hasNormals!=0){this._debug.normals={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.normals.arr=[],this.normals=[];for(var t=0;t<this._parent.numVertices;t++)this._debug.normals.arr[t]={start:this._io.pos,ioOffset:this._io.byteOffset},this.normals.push(new n(this._io,this,this._root)),this._debug.normals.arr[t].end=this._io.pos;this._debug.normals.end=this._io.pos}},e})(),g=s.Rgba=(function(){function e(t,i,_){this._io=t,this._parent=i,this._root=_,this._debug={},this._read()}return e.prototype._read=function(){this._debug.r={start:this._io.pos,ioOffset:this._io.byteOffset},this.r=this._io.readU1(),this._debug.r.end=this._io.pos,this._debug.g={start:this._io.pos,ioOffset:this._io.byteOffset},this.g=this._io.readU1(),this._debug.g.end=this._io.pos,this._debug.b={start:this._io.pos,ioOffset:this._io.byteOffset},this.b=this._io.readU1(),this._debug.b.end=this._io.pos,this._debug.a={start:this._io.pos,ioOffset:this._io.byteOffset},this.a=this._io.readU1(),this._debug.a.end=this._io.pos},e})(),T=s.Sphere=(function(){function e(t,i,_){this._io=t,this._parent=i,this._root=_,this._debug={},this._read()}return e.prototype._read=function(){this._debug.x={start:this._io.pos,ioOffset:this._io.byteOffset},this.x=this._io.readF4le(),this._debug.x.end=this._io.pos,this._debug.y={start:this._io.pos,ioOffset:this._io.byteOffset},this.y=this._io.readF4le(),this._debug.y.end=this._io.pos,this._debug.z={start:this._io.pos,ioOffset:this._io.byteOffset},this.z=this._io.readF4le(),this._debug.z.end=this._io.pos,this._debug.radius={start:this._io.pos,ioOffset:this._io.byteOffset},this.radius=this._io.readF4le(),this._debug.radius.end=this._io.pos},e})(),b=s.StructAtomic=(function(){function e(t,i,_){this._io=t,this._parent=i,this._root=_,this._debug={},this._read()}return e.prototype._read=function(){this._debug.frameIndex={start:this._io.pos,ioOffset:this._io.byteOffset},this.frameIndex=this._io.readU4le(),this._debug.frameIndex.end=this._io.pos,this._debug.geometryIndex={start:this._io.pos,ioOffset:this._io.byteOffset},this.geometryIndex=this._io.readU4le(),this._debug.geometryIndex.end=this._io.pos,this._debug.flagRender={start:this._io.pos,ioOffset:this._io.byteOffset},this.flagRender=this._io.readBitsIntLe(1)!=0,this._debug.flagRender.end=this._io.pos,this._debug._unnamed3={start:this._io.pos,ioOffset:this._io.byteOffset},this._unnamed3=this._io.readBitsIntLe(1)!=0,this._debug._unnamed3.end=this._io.pos,this._debug.flagCollisionTest={start:this._io.pos,ioOffset:this._io.byteOffset},this.flagCollisionTest=this._io.readBitsIntLe(1)!=0,this._debug.flagCollisionTest.end=this._io.pos,this._debug._unnamed5={start:this._io.pos,ioOffset:this._io.byteOffset},this._unnamed5=this._io.readBitsIntLe(29),this._debug._unnamed5.end=this._io.pos,this._io.alignToByte(),this._debug.unused={start:this._io.pos,ioOffset:this._io.byteOffset},this.unused=this._io.readU4le(),this._debug.unused.end=this._io.pos},e})(),l=s.StructClump=(function(){function e(t,i,_){this._io=t,this._parent=i,this._root=_,this._debug={},this._read()}return e.prototype._read=function(){this._debug.numAtomics={start:this._io.pos,ioOffset:this._io.byteOffset},this.numAtomics=this._io.readU4le(),this._debug.numAtomics.end=this._io.pos,this._parent.version>=208896&&(this._debug.numLights={start:this._io.pos,ioOffset:this._io.byteOffset},this.numLights=this._io.readU4le(),this._debug.numLights.end=this._io.pos),this._parent.version>=208896&&(this._debug.numCameras={start:this._io.pos,ioOffset:this._io.byteOffset},this.numCameras=this._io.readU4le(),this._debug.numCameras.end=this._io.pos)},e})(),y=s.StructFrameList=(function(){function e(t,i,_){this._io=t,this._parent=i,this._root=_,this._debug={},this._read()}return e.prototype._read=function(){this._debug.numFrames={start:this._io.pos,ioOffset:this._io.byteOffset},this.numFrames=this._io.readU4le(),this._debug.numFrames.end=this._io.pos,this._debug.frames={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.frames.arr=[],this.frames=[];for(var t=0;t<this.numFrames;t++)this._debug.frames.arr[t]={start:this._io.pos,ioOffset:this._io.byteOffset},this.frames.push(new p(this._io,this,this._root)),this._debug.frames.arr[t].end=this._io.pos;this._debug.frames.end=this._io.pos},e})(),L=s.StructGeometry=(function(){function e(t,i,_){this._io=t,this._parent=i,this._root=_,this._debug={},this._read()}return e.prototype._read=function(){this._debug.format={start:this._io.pos,ioOffset:this._io.byteOffset},this.format=this._io.readU4le(),this._debug.format.end=this._io.pos,this._debug.numTriangles={start:this._io.pos,ioOffset:this._io.byteOffset},this.numTriangles=this._io.readU4le(),this._debug.numTriangles.end=this._io.pos,this._debug.numVertices={start:this._io.pos,ioOffset:this._io.byteOffset},this.numVertices=this._io.readU4le(),this._debug.numVertices.end=this._io.pos,this._debug.numMorphTargets={start:this._io.pos,ioOffset:this._io.byteOffset},this.numMorphTargets=this._io.readU4le(),this._debug.numMorphTargets.end=this._io.pos,this._parent.version<212992&&(this._debug.surfProp={start:this._io.pos,ioOffset:this._io.byteOffset},this.surfProp=new O(this._io,this,this._root),this._debug.surfProp.end=this._io.pos),this.isNative||(this._debug.geometry={start:this._io.pos,ioOffset:this._io.byteOffset},this.geometry=new u(this._io,this,this._root),this._debug.geometry.end=this._io.pos),this._debug.morphTargets={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.morphTargets.arr=[],this.morphTargets=[];for(var t=0;t<this.numMorphTargets;t++)this._debug.morphTargets.arr[t]={start:this._io.pos,ioOffset:this._io.byteOffset},this.morphTargets.push(new m(this._io,this,this._root)),this._debug.morphTargets.arr[t].end=this._io.pos;this._debug.morphTargets.end=this._io.pos},Object.defineProperty(e.prototype,"isNative",{get:function(){return this._m_isNative!==void 0?this._m_isNative:(this._debug._m_isNative={},this._m_isNative=(this.format&16777216)!=0,this._m_isNative)}}),Object.defineProperty(e.prototype,"isPrelit",{get:function(){return this._m_isPrelit!==void 0?this._m_isPrelit:(this._debug._m_isPrelit={},this._m_isPrelit=(this.format&8)!=0,this._m_isPrelit)}}),Object.defineProperty(e.prototype,"isTextured",{get:function(){return this._m_isTextured!==void 0?this._m_isTextured:(this._debug._m_isTextured={},this._m_isTextured=(this.format&4)!=0,this._m_isTextured)}}),Object.defineProperty(e.prototype,"isTextured2",{get:function(){return this._m_isTextured2!==void 0?this._m_isTextured2:(this._debug._m_isTextured2={},this._m_isTextured2=(this.format&128)!=0,this._m_isTextured2)}}),Object.defineProperty(e.prototype,"numUvLayers",{get:function(){return this._m_numUvLayers!==void 0?this._m_numUvLayers:(this._debug._m_numUvLayers={},this._m_numUvLayers=this.numUvLayersRaw==0?this.isTextured2?2:this.isTextured?1:0:this.numUvLayersRaw,this._m_numUvLayers)}}),Object.defineProperty(e.prototype,"numUvLayersRaw",{get:function(){return this._m_numUvLayersRaw!==void 0?this._m_numUvLayersRaw:(this._debug._m_numUvLayersRaw={},this._m_numUvLayersRaw=(this.format&16711680)>>>16,this._m_numUvLayersRaw)}}),e})(),c=s.StructGeometryList=(function(){function e(t,i,_){this._io=t,this._parent=i,this._root=_,this._debug={},this._read()}return e.prototype._read=function(){this._debug.numGeometries={start:this._io.pos,ioOffset:this._io.byteOffset},this.numGeometries=this._io.readU4le(),this._debug.numGeometries.end=this._io.pos},e})(),I=s.StructTextureDictionary=(function(){function e(t,i,_){this._io=t,this._parent=i,this._root=_,this._debug={},this._read()}return e.prototype._read=function(){this._debug.numTextures={start:this._io.pos,ioOffset:this._io.byteOffset},this.numTextures=this._io.readU4le(),this._debug.numTextures.end=this._io.pos},e})(),O=s.SurfaceProperties=(function(){function e(t,i,_){this._io=t,this._parent=i,this._root=_,this._debug={},this._read()}return e.prototype._read=function(){this._debug.ambient={start:this._io.pos,ioOffset:this._io.byteOffset},this.ambient=this._io.readF4le(),this._debug.ambient.end=this._io.pos,this._debug.specular={start:this._io.pos,ioOffset:this._io.byteOffset},this.specular=this._io.readF4le(),this._debug.specular.end=this._io.pos,this._debug.diffuse={start:this._io.pos,ioOffset:this._io.byteOffset},this.diffuse=this._io.readF4le(),this._debug.diffuse.end=this._io.pos},e})(),E=s.TexCoord=(function(){function e(t,i,_){this._io=t,this._parent=i,this._root=_,this._debug={},this._read()}return e.prototype._read=function(){this._debug.u={start:this._io.pos,ioOffset:this._io.byteOffset},this.u=this._io.readF4le(),this._debug.u.end=this._io.pos,this._debug.v={start:this._io.pos,ioOffset:this._io.byteOffset},this.v=this._io.readF4le(),this._debug.v.end=this._io.pos},e})(),P=s.Triangle=(function(){function e(t,i,_){this._io=t,this._parent=i,this._root=_,this._debug={},this._read()}return e.prototype._read=function(){this._debug.vertex2={start:this._io.pos,ioOffset:this._io.byteOffset},this.vertex2=this._io.readU2le(),this._debug.vertex2.end=this._io.pos,this._debug.vertex1={start:this._io.pos,ioOffset:this._io.byteOffset},this.vertex1=this._io.readU2le(),this._debug.vertex1.end=this._io.pos,this._debug.materialId={start:this._io.pos,ioOffset:this._io.byteOffset},this.materialId=this._io.readU2le(),this._debug.materialId.end=this._io.pos,this._debug.vertex3={start:this._io.pos,ioOffset:this._io.byteOffset},this.vertex3=this._io.readU2le(),this._debug.vertex3.end=this._io.pos},e})(),A=s.UvLayer=(function(){function e(t,i,_,R){this._io=t,this._parent=i,this._root=_,this.numVertices=R,this._debug={},this._read()}return e.prototype._read=function(){this._debug.texCoords={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.texCoords.arr=[],this.texCoords=[];for(var t=0;t<this.numVertices;t++)this._debug.texCoords.arr[t]={start:this._io.pos,ioOffset:this._io.byteOffset},this.texCoords.push(new E(this._io,this,this._root)),this._debug.texCoords.arr[t].end=this._io.pos;this._debug.texCoords.end=this._io.pos},e})(),n=s.Vector3d=(function(){function e(t,i,_){this._io=t,this._parent=i,this._root=_,this._debug={},this._read()}return e.prototype._read=function(){this._debug.x={start:this._io.pos,ioOffset:this._io.byteOffset},this.x=this._io.readF4le(),this._debug.x.end=this._io.pos,this._debug.y={start:this._io.pos,ioOffset:this._io.byteOffset},this.y=this._io.readF4le(),this._debug.y.end=this._io.pos,this._debug.z={start:this._io.pos,ioOffset:this._io.byteOffset},this.z=this._io.readF4le(),this._debug.z.end=this._io.pos},e})();return Object.defineProperty(s.prototype,"version",{get:function(){return this._m_version!==void 0?this._m_version:(this._debug._m_version={},this._m_version=(this.libraryIdStamp&4294901760)!=0?(this.libraryIdStamp>>>14&261888)+196608|this.libraryIdStamp>>>16&63:this.libraryIdStamp<<8,this._m_version)}}),s})();o.RenderwareBinaryStream=d})}});const C=M(),x={id:"renderware_binary_stream",title:"RenderWare binary stream",ksy:{meta:{id:"renderware_binary_stream",title:"RenderWare binary stream",application:"Games based on RenderWare engine (Grand Theft Auto 3D series)","file-extension":["dff","txd"],xref:{justsolve:"RenderWare_binary_stream_file",wikidata:"Q29960668"},endian:"le","bit-endian":"le"},"doc-ref":"https://gtamods.com/wiki/RenderWare_binary_stream_file",seq:[{id:"code",type:"u4",enum:"sections"},{id:"size",type:"u4"},{id:"library_id_stamp",type:"u4"},{id:"body",size:"size",type:{"switch-on":"code",cases:{"sections::clump":"list_with_header","sections::frame_list":"list_with_header","sections::geometry":"list_with_header","sections::geometry_list":"list_with_header","sections::texture_dictionary":"list_with_header","sections::texture_native":"list_with_header","sections::atomic":"list_with_header"}}}],instances:{version:{value:"library_id_stamp & 0xFFFF0000 != 0 ? (library_id_stamp >> 14 & 0x3FF00) + 0x30000 | (library_id_stamp >> 16 & 0x3F) : library_id_stamp << 8"}},types:{list_with_header:{doc:`Typical structure used by many data types in RenderWare binary
stream. Substream contains a list of binary stream entries,
first entry always has type "struct" and carries some specific
binary data it in, determined by the type of parent. All other
entries, beside the first one, are normal, self-describing
records.
`,seq:[{id:"code",contents:[1,0,0,0]},{id:"header_size",type:"u4"},{id:"library_id_stamp",type:"u4"},{id:"header",size:"header_size",type:{"switch-on":"_parent.code",cases:{"sections::clump":"struct_clump","sections::frame_list":"struct_frame_list","sections::geometry":"struct_geometry","sections::geometry_list":"struct_geometry_list","sections::texture_dictionary":"struct_texture_dictionary","sections::atomic":"struct_atomic"}}},{id:"entries",type:"renderware_binary_stream",repeat:"eos"}],instances:{version:{value:"library_id_stamp & 0xFFFF0000 != 0 ? (library_id_stamp >> 14 & 0x3FF00) + 0x30000 | (library_id_stamp >> 16 & 0x3F) : library_id_stamp << 8"}}},struct_atomic:{"doc-ref":"https://gtamods.com/wiki/Atomic_(RW_Section)#Structure",seq:[{id:"frame_index",type:"u4"},{id:"geometry_index",type:"u4"},{id:"flag_render",type:"b1"},{type:"b1"},{id:"flag_collision_test",type:"b1"},{type:"b29"},{id:"unused",type:"u4"}]},struct_texture_dictionary:{seq:[{id:"num_textures",type:"u4"}]},struct_clump:{"doc-ref":"https://gtamods.com/wiki/RpClump",seq:[{id:"num_atomics",type:"u4"},{id:"num_lights",type:"u4",if:"_parent.version >= 0x33000"},{id:"num_cameras",type:"u4",if:"_parent.version >= 0x33000"}]},struct_frame_list:{"doc-ref":"https://gtamods.com/wiki/Frame_List_(RW_Section)#Structure",seq:[{id:"num_frames",type:"u4"},{id:"frames",type:"frame",repeat:"expr","repeat-expr":"num_frames"}]},frame:{"doc-ref":"https://gtamods.com/wiki/Frame_List_(RW_Section)#Structure",seq:[{id:"rotation_matrix",type:"matrix"},{id:"position",type:"vector_3d"},{id:"cur_frame_idx",type:"s4"},{id:"matrix_creation_flags",type:"u4"}]},matrix:{"doc-ref":"https://gtamods.com/wiki/Frame_List_(RW_Section)#Structure",seq:[{id:"entries",type:"vector_3d",repeat:"expr","repeat-expr":3}]},vector_3d:{"doc-ref":"https://gtamods.com/wiki/Frame_List_(RW_Section)#Structure",seq:[{id:"x",type:"f4"},{id:"y",type:"f4"},{id:"z",type:"f4"}]},struct_geometry_list:{"doc-ref":"https://gtamods.com/wiki/Geometry_List_(RW_Section)#Structure",seq:[{id:"num_geometries",type:"u4"}]},struct_geometry:{"doc-ref":"https://gtamods.com/wiki/RpGeometry",seq:[{id:"format",type:"u4"},{id:"num_triangles",type:"u4"},{id:"num_vertices",type:"u4"},{id:"num_morph_targets",type:"u4"},{id:"surf_prop",type:"surface_properties",if:"_parent.version < 0x34000"},{id:"geometry",type:"geometry_non_native",if:"not is_native"},{id:"morph_targets",type:"morph_target",repeat:"expr","repeat-expr":"num_morph_targets"}],instances:{is_textured:{value:"format & 0x0000_0004 != 0"},is_prelit:{value:"format & 0x0000_0008 != 0"},is_textured2:{value:"format & 0x0000_0080 != 0"},is_native:{value:"format & 0x0100_0000 != 0"},num_uv_layers_raw:{value:"(format & 0x00ff_0000) >> 16"},num_uv_layers:{value:`num_uv_layers_raw == 0
  ? is_textured2
    ? 2
    : is_textured
      ? 1
      : 0
  : num_uv_layers_raw
`}}},surface_properties:{"doc-ref":"https://gtamods.com/wiki/RpGeometry",seq:[{id:"ambient",type:"f4"},{id:"specular",type:"f4"},{id:"diffuse",type:"f4"}]},geometry_non_native:{seq:[{id:"prelit_colors",type:"rgba",repeat:"expr","repeat-expr":"_parent.num_vertices",if:"_parent.is_prelit"},{id:"uv_layers",type:"uv_layer(_parent.num_vertices)",repeat:"expr","repeat-expr":"_parent.num_uv_layers"},{id:"triangles",type:"triangle",repeat:"expr","repeat-expr":"_parent.num_triangles"}]},uv_layer:{params:[{id:"num_vertices",type:"u4"}],seq:[{id:"tex_coords",type:"tex_coord",repeat:"expr","repeat-expr":"num_vertices"}]},rgba:{seq:[{id:"r",type:"u1"},{id:"g",type:"u1"},{id:"b",type:"u1"},{id:"a",type:"u1"}]},tex_coord:{seq:[{id:"u",type:"f4"},{id:"v",type:"f4"}]},triangle:{seq:[{id:"vertex2",type:"u2"},{id:"vertex1",type:"u2"},{id:"material_id",type:"u2"},{id:"vertex3",type:"u2"}]},morph_target:{seq:[{id:"bounding_sphere",type:"sphere"},{id:"has_vertices",type:"u4"},{id:"has_normals",type:"u4"},{id:"vertices",repeat:"expr","repeat-expr":"_parent.num_vertices",type:"vector_3d",if:"has_vertices != 0"},{id:"normals",repeat:"expr","repeat-expr":"_parent.num_vertices",type:"vector_3d",if:"has_normals != 0"}]},sphere:{seq:[{id:"x",type:"f4"},{id:"y",type:"f4"},{id:"z",type:"f4"},{id:"radius",type:"f4"}]}},enums:{sections:{1:"struct",2:"string",3:"extension",5:"camera",6:"texture",7:"material",8:"material_list",9:"atomic_section",10:"plane_section",11:"world",12:"spline",13:"matrix",14:"frame_list",15:"geometry",16:"clump",18:"light",19:"unicode_string",20:"atomic",21:"texture_native",22:"texture_dictionary",23:"animation_database",24:"image",25:"skin_animation",26:"geometry_list",27:"anim_animation",28:"team",29:"crowd",30:"delta_morph_animation",31:"right_to_render",32:"multitexture_effect_native",33:"multitexture_effect_dictionary",34:"team_dictionary",35:"platform_independent_texture_dictionary",36:"table_of_contents",37:"particle_standard_global_data",38:"altpipe",39:"platform_independent_peds",40:"patch_mesh",41:"chunk_group_start",42:"chunk_group_end",43:"uv_animation_dictionary",44:"coll_tree",257:"metrics_plg",258:"spline_plg",259:"stereo_plg",260:"vrml_plg",261:"morph_plg",262:"pvs_plg",263:"memory_leak_plg",264:"animation_plg",265:"gloss_plg",266:"logo_plg",267:"memory_info_plg",268:"random_plg",269:"png_image_plg",270:"bone_plg",271:"vrml_anim_plg",272:"sky_mipmap_val",273:"mrm_plg",274:"lod_atomic_plg",275:"me_plg",276:"lightmap_plg",277:"refine_plg",278:"skin_plg",279:"label_plg",280:"particles_plg",281:"geomtx_plg",282:"synth_core_plg",283:"stqpp_plg",284:"part_pp_plg",285:"collision_plg",286:"hanim_plg",287:"user_data_plg",288:"material_effects_plg",289:"particle_system_plg",290:"delta_morph_plg",291:"patch_plg",292:"team_plg",293:"crowd_pp_plg",294:"mip_split_plg",295:"anisotropy_plg",297:"gcn_material_plg",298:"geometric_pvs_plg",299:"xbox_material_plg",300:"multi_texture_plg",301:"chain_plg",302:"toon_plg",303:"ptank_plg",304:"particle_standard_plg",305:"pds_plg",306:"prtadv_plg",307:"normal_map_plg",308:"adc_plg",309:"uv_animation_plg",384:"character_set_plg",385:"nohs_world_plg",386:"import_util_plg",387:"slerp_plg",388:"optim_plg",389:"tl_world_plg",390:"database_plg",391:"raytrace_plg",392:"ray_plg",393:"library_plg",400:"plg_2d",401:"tile_render_plg",402:"jpeg_image_plg",403:"tga_image_plg",404:"gif_image_plg",405:"quat_plg",406:"spline_pvs_plg",407:"mipmap_plg",408:"mipmapk_plg",409:"font_2d",410:"intersection_plg",411:"tiff_image_plg",412:"pick_plg",413:"bmp_image_plg",414:"ras_image_plg",415:"skin_fx_plg",416:"vcat_plg",417:"path_2d",418:"brush_2d",419:"object_2d",420:"shape_2d",421:"scene_2d",422:"pick_region_2d",423:"object_string_2d",424:"animation_plg_2d",425:"animation_2d",432:"keyframe_2d",433:"maestro_2d",434:"barycentric",435:"platform_independent_texture_dictionary_tk",436:"toc_tk",437:"tpl_tk",438:"altpipe_tk",439:"animation_tk",440:"skin_split_tookit",441:"compressed_key_tk",442:"geometry_conditioning_plg",443:"wing_plg",444:"generic_pipeline_tk",445:"lightmap_conversion_tk",446:"filesystem_plg",447:"dictionary_tk",448:"uv_animation_linear",449:"uv_animation_parameter",1294:"bin_mesh_plg",1296:"native_data_plg",61982:"zmodeler_lock",39055872:"atomic_visibility_distance",39055873:"clump_visibility_distance",39055874:"frame_visibility_distance",39056115:"pipeline_set",39056116:"unused_5",39056117:"texdictionary_link",39056118:"specular_material",39056119:"unused_8",39056120:"effect_2d",39056121:"extra_vert_colour",39056122:"collision_model",39056123:"gta_hanim",39056124:"reflection_material",39056125:"breakable",39056126:"frame",39056127:"unused_16"}}}};export{C as default,x as spec};
