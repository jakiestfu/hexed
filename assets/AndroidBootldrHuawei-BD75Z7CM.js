import{k as u}from"./index-LM5QM2-c.js";var g=Object.getOwnPropertyNames,l=(r,o)=>function(){return o||(0,r[g(r)[0]])((o={exports:{}}).exports,o),o.exports},p=l({"<stdin>"(r){(function(o,i){typeof define=="function"&&define.amd?define(["exports","kaitai-struct/KaitaiStream"],i):typeof r=="object"&&r!==null&&typeof r.nodeType!="number"?i(r,u.KaitaiStream):i(o.AndroidBootldrHuawei||(o.AndroidBootldrHuawei={}),o.KaitaiStream)})(typeof self<"u"?self:r,function(o,i){var n=(function(){function d(t,e,s){this._io=t,this._parent=e,this._root=s||this,this._debug={},this._read()}d.prototype._read=function(){this._debug.metaHeader={start:this._io.pos,ioOffset:this._io.byteOffset},this.metaHeader=new f(this._io,this,this._root),this._debug.metaHeader.end=this._io.pos,this._debug.headerExt={start:this._io.pos,ioOffset:this._io.byteOffset},this.headerExt=this._io.readBytes(this.metaHeader.lenMetaHeader-76),this._debug.headerExt.end=this._io.pos,this._debug.imageHeader={start:this._io.pos,ioOffset:this._io.byteOffset},this._raw_imageHeader=this._io.readBytes(this.metaHeader.lenImageHeader);var t=new i(this._raw_imageHeader);this.imageHeader=new h(t,this,this._root),this._debug.imageHeader.end=this._io.pos};var h=d.ImageHdr=(function(){function t(e,s,a){this._io=e,this._parent=s,this._root=a,this._debug={},this._read()}return t.prototype._read=function(){for(this._debug.entries={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.entries.arr=[],this.entries=[];!this._io.isEof();)this._debug.entries.arr[this.entries.length]={start:this._io.pos,ioOffset:this._io.byteOffset},this.entries.push(new _(this._io,this,this._root)),this._debug.entries.arr[this.entries.length-1].end=this._io.pos;this._debug.entries.end=this._io.pos},t})(),_=d.ImageHdrEntry=(function(){function t(e,s,a){this._io=e,this._parent=s,this._root=a,this._debug={},this._read()}return t.prototype._read=function(){this._debug.name={start:this._io.pos,ioOffset:this._io.byteOffset},this.name=i.bytesToStr(i.bytesTerminate(this._io.readBytes(72),0,!1),"ASCII"),this._debug.name.end=this._io.pos,this._debug.ofsBody={start:this._io.pos,ioOffset:this._io.byteOffset},this.ofsBody=this._io.readU4le(),this._debug.ofsBody.end=this._io.pos,this._debug.lenBody={start:this._io.pos,ioOffset:this._io.byteOffset},this.lenBody=this._io.readU4le(),this._debug.lenBody.end=this._io.pos},Object.defineProperty(t.prototype,"body",{get:function(){if(this._m_body!==void 0)return this._m_body;if(this.isUsed){var e=this._root._io,s=e.pos;e.seek(this.ofsBody),this._debug._m_body={start:e.pos,ioOffset:e.byteOffset},this._m_body=e.readBytes(this.lenBody),this._debug._m_body.end=e.pos,e.seek(s)}return this._m_body}}),Object.defineProperty(t.prototype,"isUsed",{get:function(){return this._m_isUsed!==void 0?this._m_isUsed:(this._debug._m_isUsed={},this._m_isUsed=this.ofsBody!=0&&this.lenBody!=0,this._m_isUsed)}}),t})(),f=d.MetaHdr=(function(){function t(e,s,a){this._io=e,this._parent=s,this._root=a,this._debug={},this._read()}return t.prototype._read=function(){if(this._debug.magic={start:this._io.pos,ioOffset:this._io.byteOffset},this.magic=this._io.readBytes(4),this._debug.magic.end=this._io.pos,i.byteArrayCompare(this.magic,new Uint8Array([60,214,26,206]))!=0){var e=new i.ValidationNotEqualError(new Uint8Array([60,214,26,206]),this.magic,this._io,"/types/meta_hdr/seq/0");throw this._debug.magic.validationError=e,e}this._debug.version={start:this._io.pos,ioOffset:this._io.byteOffset},this.version=new m(this._io,this,this._root),this._debug.version.end=this._io.pos,this._debug.imageVersion={start:this._io.pos,ioOffset:this._io.byteOffset},this.imageVersion=i.bytesToStr(i.bytesTerminate(this._io.readBytes(64),0,!1),"ASCII"),this._debug.imageVersion.end=this._io.pos,this._debug.lenMetaHeader={start:this._io.pos,ioOffset:this._io.byteOffset},this.lenMetaHeader=this._io.readU2le(),this._debug.lenMetaHeader.end=this._io.pos,this._debug.lenImageHeader={start:this._io.pos,ioOffset:this._io.byteOffset},this.lenImageHeader=this._io.readU2le(),this._debug.lenImageHeader.end=this._io.pos},t})(),m=d.Version=(function(){function t(e,s,a){this._io=e,this._parent=s,this._root=a,this._debug={},this._read()}return t.prototype._read=function(){this._debug.major={start:this._io.pos,ioOffset:this._io.byteOffset},this.major=this._io.readU2le(),this._debug.major.end=this._io.pos,this._debug.minor={start:this._io.pos,ioOffset:this._io.byteOffset},this.minor=this._io.readU2le(),this._debug.minor.end=this._io.pos},t})();return d})();o.AndroidBootldrHuawei=n})}});const c=p(),b={id:"android_bootldr_huawei",title:"Huawei Bootloader packed image format",ksy:{meta:{id:"android_bootldr_huawei",title:"Huawei Bootloader packed image format","file-extension":"img",tags:["archive","android"],license:"CC0-1.0",encoding:"ASCII",endian:"le"},doc:`Format of \`bootloader-*.img\` files found in factory images of certain Android devices from Huawei:

* Nexus 6P "angler": [sample][sample-angler] ([other samples][others-angler]),
  [releasetools.py](https://android.googlesource.com/device/huawei/angler/+/cf92cd8/releasetools.py#29)

[sample-angler]: https://androidfilehost.com/?fid=11410963190603870158 "bootloader-angler-angler-03.84.img"
[others-angler]: https://androidfilehost.com/?w=search&s=bootloader-angler&type=files

All image versions can be found in factory images at
<https://developers.google.com/android/images> for the specific device. To
avoid having to download an entire ZIP archive when you only need one file
from it, install [remotezip](https://github.com/gtsystem/python-remotezip) and
use its [command line
tool](https://github.com/gtsystem/python-remotezip#command-line-tool) to list
members in the archive and then to download only the file you want.
`,"doc-ref":["https://android.googlesource.com/device/huawei/angler/+/673cfb9/releasetools.py","https://source.codeaurora.org/quic/la/device/qcom/common/tree/meta_image/meta_format.h?h=LA.UM.6.1.1&id=a68d284aee85","https://source.codeaurora.org/quic/la/device/qcom/common/tree/meta_image/meta_image.c?h=LA.UM.6.1.1&id=a68d284aee85"],seq:[{id:"meta_header",type:"meta_hdr"},{id:"header_ext",size:"meta_header.len_meta_header - meta_header._sizeof"},{id:"image_header",size:"meta_header.len_image_header",type:"image_hdr"}],types:{meta_hdr:{seq:[{id:"magic",contents:[60,214,26,206]},{id:"version",type:"version"},{id:"image_version",size:64,type:"strz"},{id:"len_meta_header","-orig-id":"meta_hdr_sz",type:"u2"},{id:"len_image_header","-orig-id":"img_hdr_sz",type:"u2"}]},version:{seq:[{id:"major",type:"u2"},{id:"minor",type:"u2"}]},image_hdr:{seq:[{id:"entries",type:"image_hdr_entry",repeat:"eos",doc:"The C generator program defines `img_header` as a [fixed size\narray](https://source.codeaurora.org/quic/la/device/qcom/common/tree/meta_image/meta_image.c?h=LA.UM.6.1.1&id=a68d284aee85#n42)\nof `img_header_entry_t` structs with length `MAX_IMAGES` (which is\ndefined as `16`).\n\nThis means that technically there will always be 16 `image_hdr`\nentries, the first *n* entries being used (filled with real values)\nand the rest left unused with all bytes zero.\n\nTo check if an entry is used, use the `is_used` attribute.\n"}]},image_hdr_entry:{"-webide-representation":"{name} - o:{ofs_body}, s:{len_body} (used: {is_used})",seq:[{id:"name",size:72,type:"strz",doc:"partition name"},{id:"ofs_body",type:"u4"},{id:"len_body",type:"u4"}],instances:{is_used:{value:"ofs_body != 0 and len_body != 0","doc-ref":"https://source.codeaurora.org/quic/la/device/qcom/common/tree/meta_image/meta_image.c?h=LA.UM.6.1.1&id=a68d284aee85#n119"},body:{io:"_root._io",pos:"ofs_body",size:"len_body",if:"is_used"}}}}}};export{c as default,b as spec};
