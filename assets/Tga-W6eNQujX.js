import{k as p}from"./index-C9sUxlHS.js";var n=Object.getOwnPropertyNames,u=(o,s)=>function(){return s||(0,o[n(o)[0]])((s={exports:{}}).exports,s),s.exports},m=u({"<stdin>"(o){(function(s,i){typeof define=="function"&&define.amd?define(["exports","kaitai-struct/KaitaiStream"],i):typeof o=="object"&&o!==null&&typeof o.nodeType!="number"?i(o,p.KaitaiStream):i(s.Tga||(s.Tga={}),s.KaitaiStream)})(typeof self<"u"?self:o,function(s,i){var h=(function(){_.ColorMapEnum=Object.freeze({NO_COLOR_MAP:0,HAS_COLOR_MAP:1,0:"NO_COLOR_MAP",1:"HAS_COLOR_MAP"}),_.ImageTypeEnum=Object.freeze({NO_IMAGE_DATA:0,UNCOMP_COLOR_MAPPED:1,UNCOMP_TRUE_COLOR:2,UNCOMP_BW:3,RLE_COLOR_MAPPED:9,RLE_TRUE_COLOR:10,RLE_BW:11,0:"NO_IMAGE_DATA",1:"UNCOMP_COLOR_MAPPED",2:"UNCOMP_TRUE_COLOR",3:"UNCOMP_BW",9:"RLE_COLOR_MAPPED",10:"RLE_TRUE_COLOR",11:"RLE_BW"});function _(t,e,r){this._io=t,this._parent=e,this._root=r||this,this._debug={},this._read()}_.prototype._read=function(){if(this._debug.imageIdLen={start:this._io.pos,ioOffset:this._io.byteOffset},this.imageIdLen=this._io.readU1(),this._debug.imageIdLen.end=this._io.pos,this._debug.colorMapType={start:this._io.pos,ioOffset:this._io.byteOffset,enumName:"Tga.ColorMapEnum"},this.colorMapType=this._io.readU1(),this._debug.colorMapType.end=this._io.pos,this._debug.imageType={start:this._io.pos,ioOffset:this._io.byteOffset,enumName:"Tga.ImageTypeEnum"},this.imageType=this._io.readU1(),this._debug.imageType.end=this._io.pos,this._debug.colorMapOfs={start:this._io.pos,ioOffset:this._io.byteOffset},this.colorMapOfs=this._io.readU2le(),this._debug.colorMapOfs.end=this._io.pos,this._debug.numColorMap={start:this._io.pos,ioOffset:this._io.byteOffset},this.numColorMap=this._io.readU2le(),this._debug.numColorMap.end=this._io.pos,this._debug.colorMapDepth={start:this._io.pos,ioOffset:this._io.byteOffset},this.colorMapDepth=this._io.readU1(),this._debug.colorMapDepth.end=this._io.pos,this._debug.xOffset={start:this._io.pos,ioOffset:this._io.byteOffset},this.xOffset=this._io.readU2le(),this._debug.xOffset.end=this._io.pos,this._debug.yOffset={start:this._io.pos,ioOffset:this._io.byteOffset},this.yOffset=this._io.readU2le(),this._debug.yOffset.end=this._io.pos,this._debug.width={start:this._io.pos,ioOffset:this._io.byteOffset},this.width=this._io.readU2le(),this._debug.width.end=this._io.pos,this._debug.height={start:this._io.pos,ioOffset:this._io.byteOffset},this.height=this._io.readU2le(),this._debug.height.end=this._io.pos,this._debug.imageDepth={start:this._io.pos,ioOffset:this._io.byteOffset},this.imageDepth=this._io.readU1(),this._debug.imageDepth.end=this._io.pos,this._debug.imgDescriptor={start:this._io.pos,ioOffset:this._io.byteOffset},this.imgDescriptor=this._io.readU1(),this._debug.imgDescriptor.end=this._io.pos,this._debug.imageId={start:this._io.pos,ioOffset:this._io.byteOffset},this.imageId=this._io.readBytes(this.imageIdLen),this._debug.imageId.end=this._io.pos,this.colorMapType==_.ColorMapEnum.HAS_COLOR_MAP){this._debug.colorMap={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.colorMap.arr=[],this.colorMap=[];for(var t=0;t<this.numColorMap;t++)this._debug.colorMap.arr[t]={start:this._io.pos,ioOffset:this._io.byteOffset},this.colorMap.push(this._io.readBytes(Math.floor((this.colorMapDepth+7)/8))),this._debug.colorMap.arr[t].end=this._io.pos;this._debug.colorMap.end=this._io.pos}};var f=_.TgaExtArea=(function(){function t(e,r,a){this._io=e,this._parent=r,this._root=a,this._debug={},this._read()}return t.prototype._read=function(){this._debug.extAreaSize={start:this._io.pos,ioOffset:this._io.byteOffset},this.extAreaSize=this._io.readU2le(),this._debug.extAreaSize.end=this._io.pos,this._debug.authorName={start:this._io.pos,ioOffset:this._io.byteOffset},this.authorName=i.bytesToStr(this._io.readBytes(41),"ASCII"),this._debug.authorName.end=this._io.pos,this._debug.comments={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.comments.arr=[],this.comments=[];for(var e=0;e<4;e++)this._debug.comments.arr[e]={start:this._io.pos,ioOffset:this._io.byteOffset},this.comments.push(i.bytesToStr(this._io.readBytes(81),"ASCII")),this._debug.comments.arr[e].end=this._io.pos;this._debug.comments.end=this._io.pos,this._debug.timestamp={start:this._io.pos,ioOffset:this._io.byteOffset},this.timestamp=this._io.readBytes(12),this._debug.timestamp.end=this._io.pos,this._debug.jobId={start:this._io.pos,ioOffset:this._io.byteOffset},this.jobId=i.bytesToStr(this._io.readBytes(41),"ASCII"),this._debug.jobId.end=this._io.pos,this._debug.jobTime={start:this._io.pos,ioOffset:this._io.byteOffset},this.jobTime=i.bytesToStr(this._io.readBytes(6),"ASCII"),this._debug.jobTime.end=this._io.pos,this._debug.softwareId={start:this._io.pos,ioOffset:this._io.byteOffset},this.softwareId=i.bytesToStr(this._io.readBytes(41),"ASCII"),this._debug.softwareId.end=this._io.pos,this._debug.softwareVersion={start:this._io.pos,ioOffset:this._io.byteOffset},this.softwareVersion=this._io.readBytes(3),this._debug.softwareVersion.end=this._io.pos,this._debug.keyColor={start:this._io.pos,ioOffset:this._io.byteOffset},this.keyColor=this._io.readU4le(),this._debug.keyColor.end=this._io.pos,this._debug.pixelAspectRatio={start:this._io.pos,ioOffset:this._io.byteOffset},this.pixelAspectRatio=this._io.readU4le(),this._debug.pixelAspectRatio.end=this._io.pos,this._debug.gammaValue={start:this._io.pos,ioOffset:this._io.byteOffset},this.gammaValue=this._io.readU4le(),this._debug.gammaValue.end=this._io.pos,this._debug.colorCorrOfs={start:this._io.pos,ioOffset:this._io.byteOffset},this.colorCorrOfs=this._io.readU4le(),this._debug.colorCorrOfs.end=this._io.pos,this._debug.postageStampOfs={start:this._io.pos,ioOffset:this._io.byteOffset},this.postageStampOfs=this._io.readU4le(),this._debug.postageStampOfs.end=this._io.pos,this._debug.scanLineOfs={start:this._io.pos,ioOffset:this._io.byteOffset},this.scanLineOfs=this._io.readU4le(),this._debug.scanLineOfs.end=this._io.pos,this._debug.attributes={start:this._io.pos,ioOffset:this._io.byteOffset},this.attributes=this._io.readU1(),this._debug.attributes.end=this._io.pos},t})(),d=_.TgaFooter=(function(){function t(e,r,a){this._io=e,this._parent=r,this._root=a,this._debug={},this._read()}return t.prototype._read=function(){this._debug.extAreaOfs={start:this._io.pos,ioOffset:this._io.byteOffset},this.extAreaOfs=this._io.readU4le(),this._debug.extAreaOfs.end=this._io.pos,this._debug.devDirOfs={start:this._io.pos,ioOffset:this._io.byteOffset},this.devDirOfs=this._io.readU4le(),this._debug.devDirOfs.end=this._io.pos,this._debug.versionMagic={start:this._io.pos,ioOffset:this._io.byteOffset},this.versionMagic=this._io.readBytes(18),this._debug.versionMagic.end=this._io.pos},Object.defineProperty(t.prototype,"extArea",{get:function(){if(this._m_extArea!==void 0)return this._m_extArea;if(this.isValid){var e=this._io.pos;this._io.seek(this.extAreaOfs),this._debug._m_extArea={start:this._io.pos,ioOffset:this._io.byteOffset},this._m_extArea=new f(this._io,this,this._root),this._debug._m_extArea.end=this._io.pos,this._io.seek(e)}return this._m_extArea}}),Object.defineProperty(t.prototype,"isValid",{get:function(){return this._m_isValid!==void 0?this._m_isValid:(this._debug._m_isValid={},this._m_isValid=i.byteArrayCompare(this.versionMagic,new Uint8Array([84,82,85,69,86,73,83,73,79,78,45,88,70,73,76,69,46,0]))==0,this._m_isValid)}}),t})();return Object.defineProperty(_.prototype,"footer",{get:function(){if(this._m_footer!==void 0)return this._m_footer;var t=this._io.pos;return this._io.seek(this._io.size-26),this._debug._m_footer={start:this._io.pos,ioOffset:this._io.byteOffset},this._m_footer=new d(this._io,this,this._root),this._debug._m_footer.end=this._io.pos,this._io.seek(t),this._m_footer}}),_})();s.Tga=h})}});const b=m(),c={id:"tga",title:"TGA (AKA Truevision TGA, AKA TARGA) raster image file format",ksy:{meta:{id:"tga",title:"TGA (AKA Truevision TGA, AKA TARGA) raster image file format",xref:{justsolve:"TGA",loc:"fdd000180",pronom:"fmt/402",wikidata:"Q1063976"},"file-extension":["tga","icb","vda","vst"],license:"CC0-1.0",encoding:"ASCII",endian:"le"},doc:"TGA (AKA Truevision TGA, AKA TARGA), is a raster image file format created by Truevision. It supports up to 32 bits per pixel (three 8-bit RGB channels + 8-bit alpha channel), color mapping and optional lossless RLE compression.","doc-ref":"https://www.dca.fee.unicamp.br/~martino/disciplinas/ea978/tgaffs.pdf",seq:[{id:"image_id_len",type:"u1"},{id:"color_map_type",type:"u1",enum:"color_map_enum"},{id:"image_type",type:"u1",enum:"image_type_enum"},{id:"color_map_ofs",type:"u2"},{id:"num_color_map",type:"u2",doc:"Number of entries in a color map"},{id:"color_map_depth",type:"u1",doc:"Number of bits in a each color maps entry"},{id:"x_offset",type:"u2"},{id:"y_offset",type:"u2"},{id:"width",type:"u2",doc:"Width of the image, in pixels"},{id:"height",type:"u2",doc:"Height of the image, in pixels"},{id:"image_depth",type:"u1"},{id:"img_descriptor",type:"u1"},{id:"image_id",size:"image_id_len",doc:`Arbitrary application-specific information that is used to
identify image. May contain text or some binary data.
`},{id:"color_map",repeat:"expr","repeat-expr":"num_color_map",size:"(color_map_depth + 7) / 8",if:"color_map_type == color_map_enum::has_color_map",doc:"Color map"}],instances:{footer:{pos:"_io.size - 26",type:"tga_footer"}},enums:{color_map_enum:{0:"no_color_map",1:"has_color_map"},image_type_enum:{0:"no_image_data",1:"uncomp_color_mapped",2:"uncomp_true_color",3:"uncomp_bw",9:"rle_color_mapped",10:"rle_true_color",11:"rle_bw"}},types:{tga_footer:{seq:[{id:"ext_area_ofs",type:"u4",doc:"Offset to extension area"},{id:"dev_dir_ofs",type:"u4",doc:"Offset to developer directory"},{id:"version_magic",size:18}],instances:{is_valid:{value:"version_magic == [0x54, 0x52, 0x55, 0x45, 0x56, 0x49, 0x53, 0x49, 0x4f, 0x4e, 0x2d, 0x58, 0x46, 0x49, 0x4c, 0x45, 0x2e, 0x00]"},ext_area:{pos:"ext_area_ofs",type:"tga_ext_area",if:"is_valid"}}},tga_ext_area:{seq:[{id:"ext_area_size",type:"u2",doc:"Extension area size in bytes (always 495)"},{id:"author_name",type:"str",size:41},{id:"comments",repeat:"expr","repeat-expr":4,type:"str",size:81,doc:"Comments, organized as four lines, each consisting of 80 characters plus a NULL"},{id:"timestamp",size:12,doc:"Image creation date / time"},{id:"job_id",type:"str",size:41,doc:"Internal job ID, to be used in image workflow systems"},{id:"job_time",type:"str",size:6,doc:"Hours, minutes and seconds spent creating the file (for billing, etc.)"},{id:"software_id",type:"str",size:41,doc:"The application that created the file."},{id:"software_version",size:3},{id:"key_color",type:"u4"},{id:"pixel_aspect_ratio",type:"u4"},{id:"gamma_value",type:"u4"},{id:"color_corr_ofs",type:"u4",doc:"Number of bytes from the beginning of the file to the color correction table if present"},{id:"postage_stamp_ofs",type:"u4",doc:"Number of bytes from the beginning of the file to the postage stamp image if present"},{id:"scan_line_ofs",type:"u4",doc:"Number of bytes from the beginning of the file to the scan lines table if present"},{id:"attributes",type:"u1",doc:"Specifies the alpha channel"}]}}}};export{b as default,c as spec};
