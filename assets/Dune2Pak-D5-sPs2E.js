import{k as u}from"./index-COA_x_BK.js";var p=Object.getOwnPropertyNames,l=(s,e)=>function(){return e||(0,s[p(s)[0]])((e={exports:{}}).exports,e),e.exports},b=l({"<stdin>"(s){(function(e,o){typeof define=="function"&&define.amd?define(["exports","kaitai-struct/KaitaiStream"],o):typeof s=="object"&&s!==null&&typeof s.nodeType!="number"?o(s,u.KaitaiStream):o(e.Dune2Pak||(e.Dune2Pak={}),e.KaitaiStream)})(typeof self<"u"?self:s,function(e,o){var n=(function(){function f(t,i,_){this._io=t,this._parent=i,this._root=_||this,this._debug={},this._read()}f.prototype._read=function(){this._debug.dir={start:this._io.pos,ioOffset:this._io.byteOffset},this._raw_dir=this._io.readBytes(this.dirSize);var t=new o(this._raw_dir);this.dir=new d(t,this,this._root),this._debug.dir.end=this._io.pos};var h=f.File=(function(){function t(i,_,r,a){this._io=i,this._parent=_,this._root=r,this.idx=a,this._debug={},this._read()}return t.prototype._read=function(){this._debug.ofs={start:this._io.pos,ioOffset:this._io.byteOffset},this.ofs=this._io.readU4le(),this._debug.ofs.end=this._io.pos,this.ofs!=0&&(this._debug.fileName={start:this._io.pos,ioOffset:this._io.byteOffset},this.fileName=o.bytesToStr(this._io.readBytesTerm(0,!1,!0,!0),"ASCII"),this._debug.fileName.end=this._io.pos)},Object.defineProperty(t.prototype,"body",{get:function(){if(this._m_body!==void 0)return this._m_body;if(this.ofs!=0){var i=this._root._io,_=i.pos;i.seek(this.ofs),this._debug._m_body={start:i.pos,ioOffset:i.byteOffset},this._m_body=i.readBytes(this.nextOfs-this.ofs),this._debug._m_body.end=i.pos,i.seek(_)}return this._m_body}}),Object.defineProperty(t.prototype,"nextOfs",{get:function(){return this._m_nextOfs!==void 0?this._m_nextOfs:(this.ofs!=0&&(this._debug._m_nextOfs={},this._m_nextOfs=this.nextOfs0==0?this._root._io.size:this.nextOfs0),this._m_nextOfs)}}),Object.defineProperty(t.prototype,"nextOfs0",{get:function(){return this._m_nextOfs0!==void 0?this._m_nextOfs0:(this.ofs!=0&&(this._debug._m_nextOfs0={},this._m_nextOfs0=this._root.dir.files[this.idx+1].ofs),this._m_nextOfs0)}}),t})(),d=f.Files=(function(){function t(i,_,r){this._io=i,this._parent=_,this._root=r,this._debug={},this._read()}return t.prototype._read=function(){this._debug.files={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.files.arr=[],this.files=[];for(var i=0;!this._io.isEof();)this._debug.files.arr[this.files.length]={start:this._io.pos,ioOffset:this._io.byteOffset},this.files.push(new h(this._io,this,this._root,i)),this._debug.files.arr[this.files.length-1].end=this._io.pos,i++;this._debug.files.end=this._io.pos},t})();return Object.defineProperty(f.prototype,"dirSize",{get:function(){if(this._m_dirSize!==void 0)return this._m_dirSize;var t=this._io.pos;return this._io.seek(0),this._debug._m_dirSize={start:this._io.pos,ioOffset:this._io.byteOffset},this._m_dirSize=this._io.readU4le(),this._debug._m_dirSize.end=this._io.pos,this._io.seek(t),this._m_dirSize}}),f})();e.Dune2Pak=n})}});const m=b(),O={id:"dune_2_pak",title:"dune_2_pak",ksy:{meta:{id:"dune_2_pak",application:"Dune 2 game engine","file-extension":"pak",license:"CC0-1.0","ks-version":.8,encoding:"ASCII",endian:"le"},"doc-ref":"https://moddingwiki.shikadi.net/wiki/PAK_Format_(Westwood)",seq:[{id:"dir",size:"dir_size",type:"files"}],instances:{dir_size:{pos:0,type:"u4"}},types:{files:{seq:[{id:"files",type:"file(_index)",repeat:"eos"}]},file:{params:[{id:"idx",type:"u4"}],seq:[{id:"ofs",type:"u4"},{id:"file_name",type:"strz",if:"ofs != 0"}],instances:{next_ofs0:{value:"_root.dir.files[idx + 1].ofs",if:"ofs != 0"},next_ofs:{value:"next_ofs0 == 0 ? _root._io.size : next_ofs0",if:"ofs != 0"},body:{io:"_root._io",pos:"ofs",size:"next_ofs - ofs",if:"ofs != 0"}}}}}};export{m as default,O as spec};
