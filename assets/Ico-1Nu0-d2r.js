import{k as _}from"./index-COmSdSC_.js";var f=Object.getOwnPropertyNames,g=(o,e)=>function(){return e||(0,o[f(o)[0]])((e={exports:{}}).exports,e),e.exports},m=g({"<stdin>"(o){(function(e,t){typeof define=="function"&&define.amd?define(["exports","kaitai-struct/KaitaiStream"],t):typeof o=="object"&&o!==null&&typeof o.nodeType!="number"?t(o,_.KaitaiStream):t(e.Ico||(e.Ico={}),e.KaitaiStream)})(typeof self<"u"?self:o,function(e,t){var h=(function(){function r(s,i,n){this._io=s,this._parent=i,this._root=n||this,this._debug={},this._read()}r.prototype._read=function(){if(this._debug.magic={start:this._io.pos,ioOffset:this._io.byteOffset},this.magic=this._io.readBytes(4),this._debug.magic.end=this._io.pos,t.byteArrayCompare(this.magic,new Uint8Array([0,0,1,0]))!=0){var s=new t.ValidationNotEqualError(new Uint8Array([0,0,1,0]),this.magic,this._io,"/seq/0");throw this._debug.magic.validationError=s,s}this._debug.numImages={start:this._io.pos,ioOffset:this._io.byteOffset},this.numImages=this._io.readU2le(),this._debug.numImages.end=this._io.pos,this._debug.images={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.images.arr=[],this.images=[];for(var i=0;i<this.numImages;i++)this._debug.images.arr[i]={start:this._io.pos,ioOffset:this._io.byteOffset},this.images.push(new d(this._io,this,this._root)),this._debug.images.arr[i].end=this._io.pos;this._debug.images.end=this._io.pos};var d=r.IconDirEntry=(function(){function s(i,n,a){this._io=i,this._parent=n,this._root=a,this._debug={},this._read()}return s.prototype._read=function(){if(this._debug.width={start:this._io.pos,ioOffset:this._io.byteOffset},this.width=this._io.readU1(),this._debug.width.end=this._io.pos,this._debug.height={start:this._io.pos,ioOffset:this._io.byteOffset},this.height=this._io.readU1(),this._debug.height.end=this._io.pos,this._debug.numColors={start:this._io.pos,ioOffset:this._io.byteOffset},this.numColors=this._io.readU1(),this._debug.numColors.end=this._io.pos,this._debug.reserved={start:this._io.pos,ioOffset:this._io.byteOffset},this.reserved=this._io.readBytes(1),this._debug.reserved.end=this._io.pos,t.byteArrayCompare(this.reserved,new Uint8Array([0]))!=0){var i=new t.ValidationNotEqualError(new Uint8Array([0]),this.reserved,this._io,"/types/icon_dir_entry/seq/3");throw this._debug.reserved.validationError=i,i}this._debug.numPlanes={start:this._io.pos,ioOffset:this._io.byteOffset},this.numPlanes=this._io.readU2le(),this._debug.numPlanes.end=this._io.pos,this._debug.bpp={start:this._io.pos,ioOffset:this._io.byteOffset},this.bpp=this._io.readU2le(),this._debug.bpp.end=this._io.pos,this._debug.lenImg={start:this._io.pos,ioOffset:this._io.byteOffset},this.lenImg=this._io.readU4le(),this._debug.lenImg.end=this._io.pos,this._debug.ofsImg={start:this._io.pos,ioOffset:this._io.byteOffset},this.ofsImg=this._io.readU4le(),this._debug.ofsImg.end=this._io.pos},Object.defineProperty(s.prototype,"img",{get:function(){if(this._m_img!==void 0)return this._m_img;var i=this._io.pos;return this._io.seek(this.ofsImg),this._debug._m_img={start:this._io.pos,ioOffset:this._io.byteOffset},this._m_img=this._io.readBytes(this.lenImg),this._debug._m_img.end=this._io.pos,this._io.seek(i),this._m_img}}),Object.defineProperty(s.prototype,"isPng",{get:function(){return this._m_isPng!==void 0?this._m_isPng:(this._debug._m_isPng={},this._m_isPng=t.byteArrayCompare(this.pngHeader,new Uint8Array([137,80,78,71,13,10,26,10]))==0,this._m_isPng)}}),Object.defineProperty(s.prototype,"pngHeader",{get:function(){if(this._m_pngHeader!==void 0)return this._m_pngHeader;var i=this._io.pos;return this._io.seek(this.ofsImg),this._debug._m_pngHeader={start:this._io.pos,ioOffset:this._io.byteOffset},this._m_pngHeader=this._io.readBytes(8),this._debug._m_pngHeader.end=this._io.pos,this._io.seek(i),this._m_pngHeader}}),s})();return r})();e.Ico=h})}});const u=m(),c={id:"ico",title:"Microsoft Windows icon file",ksy:{meta:{id:"ico",title:"Microsoft Windows icon file","file-extension":"ico",xref:{justsolve:"ICO",mime:["image/x-icon","image/vnd.microsoft.icon"],pronom:"x-fmt/418",wikidata:"Q729366"},tags:["windows"],license:"CC0-1.0",endian:"le"},doc:`Microsoft Windows uses specific file format to store applications
icons - ICO. This is a container that contains one or more image
files (effectively, DIB parts of BMP files or full PNG files are
contained inside).
`,"doc-ref":"https://learn.microsoft.com/en-us/previous-versions/ms997538(v=msdn.10)",seq:[{id:"magic",contents:[0,0,1,0]},{id:"num_images","-orig-id":"idCount",type:"u2",doc:"Number of images contained in this file"},{id:"images","-orig-id":"idEntries",type:"icon_dir_entry",repeat:"expr","repeat-expr":"num_images"}],types:{icon_dir_entry:{"-orig-id":"ICONDIRENTRY",seq:[{id:"width","-orig-id":"bWidth",type:"u1",doc:"Width of image, px"},{id:"height","-orig-id":"bHeight",type:"u1",doc:"Height of image, px"},{id:"num_colors","-orig-id":"bColorCount",type:"u1",doc:`Number of colors in palette of the image or 0 if image has
no palette (i.e. RGB, RGBA, etc)
`},{id:"reserved","-orig-id":"bReserved",contents:[0]},{id:"num_planes","-orig-id":"wPlanes",type:"u2",doc:"Number of color planes"},{id:"bpp","-orig-id":"wBitCount",type:"u2",doc:"Bits per pixel in the image"},{id:"len_img","-orig-id":"dwBytesInRes",type:"u4",doc:"Size of the image data"},{id:"ofs_img","-orig-id":"dwImageOffset",type:"u4",doc:"Absolute offset of the image data start in the file"}],instances:{img:{pos:"ofs_img",size:"len_img",doc:`Raw image data. Use \`is_png\` to determine whether this is an
embedded PNG file (true) or a DIB bitmap (false) and call a
relevant parser, if needed to parse image data further.
`},png_header:{pos:"ofs_img",size:8,doc:`Pre-reads first 8 bytes of the image to determine if it's an
embedded PNG file.
`},is_png:{value:"png_header == [137, 80, 78, 71, 13, 10, 26, 10]",doc:"True if this image is in PNG format."}}}}}};export{u as default,c as spec};
