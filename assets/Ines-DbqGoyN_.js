import{k as g}from"./index-C9sUxlHS.js";var m=Object.getOwnPropertyNames,l=(_,r)=>function(){return r||(0,_[m(_)[0]])((r={exports:{}}).exports,r),r.exports},O=l({"<stdin>"(_){(function(r,e){typeof define=="function"&&define.amd?define(["exports","kaitai-struct/KaitaiStream"],e):typeof _=="object"&&_!==null&&typeof _.nodeType!="number"?e(_,g.KaitaiStream):e(r.Ines||(r.Ines={}),r.KaitaiStream)})(typeof self<"u"?self:_,function(r,e){var u=(function(){function p(i,d,n){this._io=i,this._parent=d,this._root=n||this,this._debug={},this._read()}p.prototype._read=function(){this._debug.header={start:this._io.pos,ioOffset:this._io.byteOffset},this._raw_header=this._io.readBytes(16);var i=new e(this._raw_header);this.header=new b(i,this,this._root),this._debug.header.end=this._io.pos,this.header.f6.trainer&&(this._debug.trainer={start:this._io.pos,ioOffset:this._io.byteOffset},this.trainer=this._io.readBytes(512),this._debug.trainer.end=this._io.pos),this._debug.prgRom={start:this._io.pos,ioOffset:this._io.byteOffset},this.prgRom=this._io.readBytes(this.header.lenPrgRom*16384),this._debug.prgRom.end=this._io.pos,this._debug.chrRom={start:this._io.pos,ioOffset:this._io.byteOffset},this.chrRom=this._io.readBytes(this.header.lenChrRom*8192),this._debug.chrRom.end=this._io.pos,this.header.f7.playchoice10&&(this._debug.playchoice10={start:this._io.pos,ioOffset:this._io.byteOffset},this.playchoice10=new y(this._io,this,this._root),this._debug.playchoice10.end=this._io.pos),this._io.isEof()||(this._debug.title={start:this._io.pos,ioOffset:this._io.byteOffset},this.title=e.bytesToStr(this._io.readBytesFull(),"ASCII"),this._debug.title.end=this._io.pos)};var b=p.Header=(function(){function i(t,s,o){this._io=t,this._parent=s,this._root=o,this._debug={},this._read()}i.prototype._read=function(){if(this._debug.magic={start:this._io.pos,ioOffset:this._io.byteOffset},this.magic=this._io.readBytes(4),this._debug.magic.end=this._io.pos,e.byteArrayCompare(this.magic,new Uint8Array([78,69,83,26]))!=0){var t=new e.ValidationNotEqualError(new Uint8Array([78,69,83,26]),this.magic,this._io,"/types/header/seq/0");throw this._debug.magic.validationError=t,t}this._debug.lenPrgRom={start:this._io.pos,ioOffset:this._io.byteOffset},this.lenPrgRom=this._io.readU1(),this._debug.lenPrgRom.end=this._io.pos,this._debug.lenChrRom={start:this._io.pos,ioOffset:this._io.byteOffset},this.lenChrRom=this._io.readU1(),this._debug.lenChrRom.end=this._io.pos,this._debug.f6={start:this._io.pos,ioOffset:this._io.byteOffset},this._raw_f6=this._io.readBytes(1);var s=new e(this._raw_f6);this.f6=new n(s,this,this._root),this._debug.f6.end=this._io.pos,this._debug.f7={start:this._io.pos,ioOffset:this._io.byteOffset},this._raw_f7=this._io.readBytes(1);var o=new e(this._raw_f7);this.f7=new a(o,this,this._root),this._debug.f7.end=this._io.pos,this._debug.lenPrgRam={start:this._io.pos,ioOffset:this._io.byteOffset},this.lenPrgRam=this._io.readU1(),this._debug.lenPrgRam.end=this._io.pos,this._debug.f9={start:this._io.pos,ioOffset:this._io.byteOffset},this._raw_f9=this._io.readBytes(1);var h=new e(this._raw_f9);this.f9=new f(h,this,this._root),this._debug.f9.end=this._io.pos,this._debug.f10={start:this._io.pos,ioOffset:this._io.byteOffset},this._raw_f10=this._io.readBytes(1);var c=new e(this._raw_f10);if(this.f10=new d(c,this,this._root),this._debug.f10.end=this._io.pos,this._debug.reserved={start:this._io.pos,ioOffset:this._io.byteOffset},this.reserved=this._io.readBytes(5),this._debug.reserved.end=this._io.pos,e.byteArrayCompare(this.reserved,new Uint8Array([0,0,0,0,0]))!=0){var t=new e.ValidationNotEqualError(new Uint8Array([0,0,0,0,0]),this.reserved,this._io,"/types/header/seq/8");throw this._debug.reserved.validationError=t,t}};var d=i.F10=(function(){t.TvSystem=Object.freeze({NTSC:0,DUAL1:1,PAL:2,DUAL2:3,0:"NTSC",1:"DUAL1",2:"PAL",3:"DUAL2"});function t(s,o,h){this._io=s,this._parent=o,this._root=h,this._debug={},this._read()}return t.prototype._read=function(){this._debug.reserved1={start:this._io.pos,ioOffset:this._io.byteOffset},this.reserved1=this._io.readBitsIntBe(2),this._debug.reserved1.end=this._io.pos,this._debug.busConflict={start:this._io.pos,ioOffset:this._io.byteOffset},this.busConflict=this._io.readBitsIntBe(1)!=0,this._debug.busConflict.end=this._io.pos,this._debug.prgRam={start:this._io.pos,ioOffset:this._io.byteOffset},this.prgRam=this._io.readBitsIntBe(1)!=0,this._debug.prgRam.end=this._io.pos,this._debug.reserved2={start:this._io.pos,ioOffset:this._io.byteOffset},this.reserved2=this._io.readBitsIntBe(2),this._debug.reserved2.end=this._io.pos,this._debug.tvSystem={start:this._io.pos,ioOffset:this._io.byteOffset,enumName:"Ines.Header.F10.TvSystem"},this.tvSystem=this._io.readBitsIntBe(2),this._debug.tvSystem.end=this._io.pos},t})(),n=i.F6=(function(){t.Mirroring=Object.freeze({HORIZONTAL:0,VERTICAL:1,0:"HORIZONTAL",1:"VERTICAL"});function t(s,o,h){this._io=s,this._parent=o,this._root=h,this._debug={},this._read()}return t.prototype._read=function(){this._debug.lowerMapper={start:this._io.pos,ioOffset:this._io.byteOffset},this.lowerMapper=this._io.readBitsIntBe(4),this._debug.lowerMapper.end=this._io.pos,this._debug.fourScreen={start:this._io.pos,ioOffset:this._io.byteOffset},this.fourScreen=this._io.readBitsIntBe(1)!=0,this._debug.fourScreen.end=this._io.pos,this._debug.trainer={start:this._io.pos,ioOffset:this._io.byteOffset},this.trainer=this._io.readBitsIntBe(1)!=0,this._debug.trainer.end=this._io.pos,this._debug.hasBatteryRam={start:this._io.pos,ioOffset:this._io.byteOffset},this.hasBatteryRam=this._io.readBitsIntBe(1)!=0,this._debug.hasBatteryRam.end=this._io.pos,this._debug.mirroring={start:this._io.pos,ioOffset:this._io.byteOffset,enumName:"Ines.Header.F6.Mirroring"},this.mirroring=this._io.readBitsIntBe(1),this._debug.mirroring.end=this._io.pos},t})(),a=i.F7=(function(){function t(s,o,h){this._io=s,this._parent=o,this._root=h,this._debug={},this._read()}return t.prototype._read=function(){this._debug.upperMapper={start:this._io.pos,ioOffset:this._io.byteOffset},this.upperMapper=this._io.readBitsIntBe(4),this._debug.upperMapper.end=this._io.pos,this._debug.format={start:this._io.pos,ioOffset:this._io.byteOffset},this.format=this._io.readBitsIntBe(2),this._debug.format.end=this._io.pos,this._debug.playchoice10={start:this._io.pos,ioOffset:this._io.byteOffset},this.playchoice10=this._io.readBitsIntBe(1)!=0,this._debug.playchoice10.end=this._io.pos,this._debug.vsUnisystem={start:this._io.pos,ioOffset:this._io.byteOffset},this.vsUnisystem=this._io.readBitsIntBe(1)!=0,this._debug.vsUnisystem.end=this._io.pos},t})(),f=i.F9=(function(){t.TvSystem=Object.freeze({NTSC:0,PAL:1,0:"NTSC",1:"PAL"});function t(s,o,h){this._io=s,this._parent=o,this._root=h,this._debug={},this._read()}return t.prototype._read=function(){this._debug.reserved={start:this._io.pos,ioOffset:this._io.byteOffset},this.reserved=this._io.readBitsIntBe(7),this._debug.reserved.end=this._io.pos,this._debug.tvSystem={start:this._io.pos,ioOffset:this._io.byteOffset,enumName:"Ines.Header.F9.TvSystem"},this.tvSystem=this._io.readBitsIntBe(1),this._debug.tvSystem.end=this._io.pos},t})();return Object.defineProperty(i.prototype,"mapper",{get:function(){return this._m_mapper!==void 0?this._m_mapper:(this._debug._m_mapper={},this._m_mapper=this.f6.lowerMapper|this.f7.upperMapper<<4,this._m_mapper)}}),i})(),y=p.Playchoice10=(function(){function i(n,a,f){this._io=n,this._parent=a,this._root=f,this._debug={},this._read()}i.prototype._read=function(){this._debug.instRom={start:this._io.pos,ioOffset:this._io.byteOffset},this.instRom=this._io.readBytes(8192),this._debug.instRom.end=this._io.pos,this._debug.prom={start:this._io.pos,ioOffset:this._io.byteOffset},this.prom=new d(this._io,this,this._root),this._debug.prom.end=this._io.pos};var d=i.Prom=(function(){function n(a,f,t){this._io=a,this._parent=f,this._root=t,this._debug={},this._read()}return n.prototype._read=function(){this._debug.data={start:this._io.pos,ioOffset:this._io.byteOffset},this.data=this._io.readBytes(16),this._debug.data.end=this._io.pos,this._debug.counterOut={start:this._io.pos,ioOffset:this._io.byteOffset},this.counterOut=this._io.readBytes(16),this._debug.counterOut.end=this._io.pos},n})();return i})();return p})();r.Ines=u})}});const w=O(),B={id:"ines",title:"ines",ksy:{meta:{id:"ines","file-extension":"nes",license:"WTFPL",encoding:"ASCII"},"doc-ref":"https://www.nesdev.org/wiki/INES",seq:[{id:"header",size:16,type:"header"},{id:"trainer",size:512,if:"header.f6.trainer"},{id:"prg_rom",size:"header.len_prg_rom * 16384"},{id:"chr_rom",size:"header.len_chr_rom * 8192"},{id:"playchoice10",type:"playchoice10",if:"header.f7.playchoice10"},{id:"title","size-eos":!0,type:"str",if:"not _io.eof"}],types:{header:{seq:[{id:"magic",contents:["NES",26]},{id:"len_prg_rom",type:"u1",doc:"Size of PRG ROM in 16 KB units"},{id:"len_chr_rom",type:"u1",doc:"Size of CHR ROM in 8 KB units (Value 0 means the board uses CHR RAM)"},{id:"f6",size:1,type:"f6"},{id:"f7",size:1,type:"f7"},{id:"len_prg_ram",type:"u1",doc:"Size of PRG RAM in 8 KB units (Value 0 infers 8 KB for compatibility; see PRG RAM circuit on nesdev.com)"},{id:"f9",size:1,type:"f9"},{id:"f10",size:1,type:"f10",doc:"this one is unofficial"},{id:"reserved",contents:[0,0,0,0,0]}],instances:{mapper:{value:"f6.lower_mapper | (f7.upper_mapper << 4)","doc-ref":"https://www.nesdev.org/wiki/Mapper"}},types:{f6:{"doc-ref":"https://www.nesdev.org/wiki/INES#Flags_6",seq:[{id:"lower_mapper",type:"b4",doc:"Lower nibble of mapper number"},{id:"four_screen",type:"b1",doc:"Ignore mirroring control or above mirroring bit; instead provide four-screen VRAM"},{id:"trainer",type:"b1",doc:"512-byte trainer at $7000-$71FF (stored before PRG data)"},{id:"has_battery_ram",type:"b1",doc:"If on the cartridge contains battery-backed PRG RAM ($6000-7FFF) or other persistent memory"},{id:"mirroring",type:"b1",enum:"mirroring",doc:"if 0, horizontal arrangement. if 1, vertical arrangement"}],enums:{mirroring:{0:"horizontal",1:"vertical"}}},f7:{"doc-ref":"https://www.nesdev.org/wiki/INES#Flags_7",seq:[{id:"upper_mapper",type:"b4",doc:"Upper nibble of mapper number"},{id:"format",type:"b2",doc:"If equal to 2, flags 8-15 are in NES 2.0 format"},{id:"playchoice10",type:"b1",doc:"Determines if it made for a Nintendo PlayChoice-10 or not"},{id:"vs_unisystem",type:"b1",doc:"Determines if it is made for a Nintendo VS Unisystem or not"}]},f9:{"doc-ref":"https://www.nesdev.org/wiki/INES#Flags_9",seq:[{id:"reserved",type:"b7"},{id:"tv_system",type:"b1",enum:"tv_system",doc:"if 0, NTSC. If 1, PAL."}],enums:{tv_system:{0:"ntsc",1:"pal"}}},f10:{"doc-ref":"https://www.nesdev.org/wiki/INES#Flags_10",seq:[{id:"reserved1",type:"b2"},{id:"bus_conflict",type:"b1",doc:"If 0, no bus conflicts. If 1, bus conflicts."},{id:"prg_ram",type:"b1",doc:"If 0, PRG ram is present. If 1, not present."},{id:"reserved2",type:"b2"},{id:"tv_system",type:"b2",enum:"tv_system",doc:"if 0, NTSC. If 2, PAL. If 1 or 3, dual compatible."}],enums:{tv_system:{0:"ntsc",1:"dual1",2:"pal",3:"dual2"}}}}},playchoice10:{"doc-ref":"https://www.nesdev.org/wiki/PC10_ROM-Images",seq:[{id:"inst_rom",size:8192},{id:"prom",type:"prom"}],types:{prom:{seq:[{id:"data",size:16},{id:"counter_out",size:16}]}}}}}};export{w as default,B as spec};
