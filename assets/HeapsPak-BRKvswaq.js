import{k as g}from"./index-DQZRlv-R.js";var c=Object.getOwnPropertyNames,l=(a,o)=>function(){return o||(0,a[c(a)[0]])((o={exports:{}}).exports,o),o.exports},m=l({"<stdin>"(a){(function(o,s){typeof define=="function"&&define.amd?define(["exports","kaitai-struct/KaitaiStream"],s):typeof a=="object"&&a!==null&&typeof a.nodeType!="number"?s(a,g.KaitaiStream):s(o.HeapsPak||(o.HeapsPak={}),o.KaitaiStream)})(typeof self<"u"?self:a,function(o,s){var p=(function(){function n(r,d,_){this._io=r,this._parent=d,this._root=_||this,this._debug={},this._read()}n.prototype._read=function(){this._debug.header={start:this._io.pos,ioOffset:this._io.byteOffset},this.header=new u(this._io,this,this._root),this._debug.header.end=this._io.pos};var u=n.Header=(function(){function r(e,t,i){this._io=e,this._parent=t,this._root=i,this._debug={},this._read()}r.prototype._read=function(){if(this._debug.magic1={start:this._io.pos,ioOffset:this._io.byteOffset},this.magic1=this._io.readBytes(3),this._debug.magic1.end=this._io.pos,s.byteArrayCompare(this.magic1,new Uint8Array([80,65,75]))!=0){var e=new s.ValidationNotEqualError(new Uint8Array([80,65,75]),this.magic1,this._io,"/types/header/seq/0");throw this._debug.magic1.validationError=e,e}this._debug.version={start:this._io.pos,ioOffset:this._io.byteOffset},this.version=this._io.readU1(),this._debug.version.end=this._io.pos,this._debug.lenHeader={start:this._io.pos,ioOffset:this._io.byteOffset},this.lenHeader=this._io.readU4le(),this._debug.lenHeader.end=this._io.pos,this._debug.lenData={start:this._io.pos,ioOffset:this._io.byteOffset},this.lenData=this._io.readU4le(),this._debug.lenData.end=this._io.pos,this._debug.rootEntry={start:this._io.pos,ioOffset:this._io.byteOffset},this._raw_rootEntry=this._io.readBytes(this.lenHeader-16);var t=new s(this._raw_rootEntry);if(this.rootEntry=new _(t,this,this._root),this._debug.rootEntry.end=this._io.pos,this._debug.magic2={start:this._io.pos,ioOffset:this._io.byteOffset},this.magic2=this._io.readBytes(4),this._debug.magic2.end=this._io.pos,s.byteArrayCompare(this.magic2,new Uint8Array([68,65,84,65]))!=0){var e=new s.ValidationNotEqualError(new Uint8Array([68,65,84,65]),this.magic2,this._io,"/types/header/seq/5");throw this._debug.magic2.validationError=e,e}};var d=r.Dir=(function(){function e(t,i,h){this._io=t,this._parent=i,this._root=h,this._debug={},this._read()}return e.prototype._read=function(){this._debug.numEntries={start:this._io.pos,ioOffset:this._io.byteOffset},this.numEntries=this._io.readU4le(),this._debug.numEntries.end=this._io.pos,this._debug.entries={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.entries.arr=[],this.entries=[];for(var t=0;t<this.numEntries;t++)this._debug.entries.arr[t]={start:this._io.pos,ioOffset:this._io.byteOffset},this.entries.push(new _(this._io,this,this._root)),this._debug.entries.arr[t].end=this._io.pos;this._debug.entries.end=this._io.pos},e})(),_=r.Entry=(function(){function e(i,h,f){this._io=i,this._parent=h,this._root=f,this._debug={},this._read()}e.prototype._read=function(){switch(this._debug.lenName={start:this._io.pos,ioOffset:this._io.byteOffset},this.lenName=this._io.readU1(),this._debug.lenName.end=this._io.pos,this._debug.name={start:this._io.pos,ioOffset:this._io.byteOffset},this.name=s.bytesToStr(this._io.readBytes(this.lenName),"UTF-8"),this._debug.name.end=this._io.pos,this._debug.flags={start:this._io.pos,ioOffset:this._io.byteOffset},this.flags=new t(this._io,this,this._root),this._debug.flags.end=this._io.pos,this._debug.body={start:this._io.pos,ioOffset:this._io.byteOffset},this.flags.isDir){case!1:this.body=new b(this._io,this,this._root);break;case!0:this.body=new d(this._io,this,this._root);break}this._debug.body.end=this._io.pos};var t=e.Flags=(function(){function i(h,f,y){this._io=h,this._parent=f,this._root=y,this._debug={},this._read()}return i.prototype._read=function(){this._debug.unused={start:this._io.pos,ioOffset:this._io.byteOffset},this.unused=this._io.readBitsIntBe(7),this._debug.unused.end=this._io.pos,this._debug.isDir={start:this._io.pos,ioOffset:this._io.byteOffset},this.isDir=this._io.readBitsIntBe(1)!=0,this._debug.isDir.end=this._io.pos},i})();return e})(),b=r.File=(function(){function e(t,i,h){this._io=t,this._parent=i,this._root=h,this._debug={},this._read()}return e.prototype._read=function(){this._debug.ofsData={start:this._io.pos,ioOffset:this._io.byteOffset},this.ofsData=this._io.readU4le(),this._debug.ofsData.end=this._io.pos,this._debug.lenData={start:this._io.pos,ioOffset:this._io.byteOffset},this.lenData=this._io.readU4le(),this._debug.lenData.end=this._io.pos,this._debug.checksum={start:this._io.pos,ioOffset:this._io.byteOffset},this.checksum=this._io.readBytes(4),this._debug.checksum.end=this._io.pos},Object.defineProperty(e.prototype,"data",{get:function(){if(this._m_data!==void 0)return this._m_data;var t=this._root._io,i=t.pos;return t.seek(this._root.header.lenHeader+this.ofsData),this._debug._m_data={start:t.pos,ioOffset:t.byteOffset},this._m_data=t.readBytes(this.lenData),this._debug._m_data.end=t.pos,t.seek(i),this._m_data}}),e})();return r})();return n})();o.HeapsPak=p})}});const k=m(),w={id:"heaps_pak",title:"heaps_pak",ksy:{meta:{id:"heaps_pak",application:'Games based on Haxe Game Framework "Heaps" (e.g. Dead Cells)',"file-extension":"pak",license:"MIT",encoding:"UTF-8",endian:"le"},"doc-ref":"https://github.com/HeapsIO/heaps/blob/2bbc2b386952dfd8856c04a854bb706a52cb4b58/hxd/fmt/pak/Reader.hx",seq:[{id:"header",type:"header"}],types:{header:{seq:[{id:"magic1",contents:"PAK"},{id:"version",type:"u1"},{id:"len_header",type:"u4"},{id:"len_data",type:"u4"},{id:"root_entry",type:"entry",size:"len_header - 16"},{id:"magic2",contents:"DATA"}],types:{entry:{"doc-ref":"https://github.com/HeapsIO/heaps/blob/2bbc2b386952dfd8856c04a854bb706a52cb4b58/hxd/fmt/pak/Data.hx",seq:[{id:"len_name",type:"u1"},{id:"name",type:"str",size:"len_name"},{id:"flags",type:"flags"},{id:"body",type:{"switch-on":"flags.is_dir",cases:{true:"dir",false:"file"}}}],types:{flags:{seq:[{id:"unused",type:"b7"},{id:"is_dir",type:"b1"}]}}},file:{seq:[{id:"ofs_data",type:"u4"},{id:"len_data",type:"u4"},{id:"checksum",size:4}],instances:{data:{io:"_root._io",pos:"_root.header.len_header + ofs_data",size:"len_data"}}},dir:{seq:[{id:"num_entries",type:"u4"},{id:"entries",type:"entry",repeat:"expr","repeat-expr":"num_entries"}]}}}}}};export{k as default,w as spec};
