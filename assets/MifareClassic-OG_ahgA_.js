import{k as A}from"./index-Cy_iKu7E.js";var C=Object.getOwnPropertyNames,z=(p,c)=>function(){return c||(0,p[C(p)[0]])((c={exports:{}}).exports,c),c.exports},q=z({"<stdin>"(p){(function(c,f){typeof define=="function"&&define.amd?define(["exports","kaitai-struct/KaitaiStream"],f):typeof p=="object"&&p!==null&&typeof p.nodeType!="number"?f(p,A.KaitaiStream):f(c.MifareClassic||(c.MifareClassic={}),c.KaitaiStream)})(typeof self<"u"?self:p,function(c,f){var v=(function(){function b(s,d,_){this._io=s,this._parent=d,this._root=_||this,this._debug={},this._read()}b.prototype._read=function(){this._debug.sectors={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.sectors.arr=[],this._raw_sectors=[],this.sectors=[];for(var s=0;!this._io.isEof();){this._debug.sectors.arr[this.sectors.length]={start:this._io.pos,ioOffset:this._io.byteOffset},this._raw_sectors.push(this._io.readBytes((s>=32?4:1)*4*16));var d=new f(this._raw_sectors[this._raw_sectors.length-1]);this.sectors.push(new k(d,this,this._root,s==0)),this._debug.sectors.arr[this.sectors.length-1].end=this._io.pos,s++}this._debug.sectors.end=this._io.pos};var y=b.Key=(function(){function s(d,_,i){this._io=d,this._parent=_,this._root=i,this._debug={},this._read()}return s.prototype._read=function(){this._debug.key={start:this._io.pos,ioOffset:this._io.byteOffset},this.key=this._io.readBytes(6),this._debug.key.end=this._io.pos},s})(),g=b.Manufacturer=(function(){function s(d,_,i){this._io=d,this._parent=_,this._root=i,this._debug={},this._read()}return s.prototype._read=function(){this._debug.nuid={start:this._io.pos,ioOffset:this._io.byteOffset},this.nuid=this._io.readU4le(),this._debug.nuid.end=this._io.pos,this._debug.bcc={start:this._io.pos,ioOffset:this._io.byteOffset},this.bcc=this._io.readU1(),this._debug.bcc.end=this._io.pos,this._debug.sak={start:this._io.pos,ioOffset:this._io.byteOffset},this.sak=this._io.readU1(),this._debug.sak.end=this._io.pos,this._debug.atqa={start:this._io.pos,ioOffset:this._io.byteOffset},this.atqa=this._io.readU2le(),this._debug.atqa.end=this._io.pos,this._debug.manufacturer={start:this._io.pos,ioOffset:this._io.byteOffset},this.manufacturer=this._io.readBytes(8),this._debug.manufacturer.end=this._io.pos},s})(),k=b.Sector=(function(){function s(i,n,h,r){this._io=i,this._parent=n,this._root=h,this.hasManufacturer=r,this._debug={},this._read()}s.prototype._read=function(){this.hasManufacturer&&(this._debug.manufacturer={start:this._io.pos,ioOffset:this._io.byteOffset},this.manufacturer=new g(this._io,this,this._root),this._debug.manufacturer.end=this._io.pos),this._debug.dataFiller={start:this._io.pos,ioOffset:this._io.byteOffset},this._raw_dataFiller=this._io.readBytes(this._io.size-this._io.pos-16);var i=new f(this._raw_dataFiller);this.dataFiller=new d(i,this,this._root),this._debug.dataFiller.end=this._io.pos,this._debug.trailer={start:this._io.pos,ioOffset:this._io.byteOffset},this.trailer=new O(this._io,this,this._root),this._debug.trailer.end=this._io.pos};var d=s.Filler=(function(){function i(n,h,r){this._io=n,this._parent=h,this._root=r,this._debug={},this._read()}return i.prototype._read=function(){this._debug.data={start:this._io.pos,ioOffset:this._io.byteOffset},this.data=this._io.readBytes(this._io.size),this._debug.data.end=this._io.pos},i})(),_=s.Values=(function(){function i(h,r,l){this._io=h,this._parent=r,this._root=l,this._debug={},this._read()}i.prototype._read=function(){for(this._debug.values={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.values.arr=[],this.values=[];!this._io.isEof();)this._debug.values.arr[this.values.length]={start:this._io.pos,ioOffset:this._io.byteOffset},this.values.push(new n(this._io,this,this._root)),this._debug.values.arr[this.values.length-1].end=this._io.pos;this._debug.values.end=this._io.pos};var n=i.ValueBlock=(function(){function h(r,l,t){this._io=r,this._parent=l,this._root=t,this._debug={},this._read()}return h.prototype._read=function(){this._debug.valuez={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.valuez.arr=[],this.valuez=[];for(var r=0;r<3;r++)this._debug.valuez.arr[r]={start:this._io.pos,ioOffset:this._io.byteOffset},this.valuez.push(this._io.readU4le()),this._debug.valuez.arr[r].end=this._io.pos;this._debug.valuez.end=this._io.pos,this._debug.addrz={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.addrz.arr=[],this.addrz=[];for(var r=0;r<4;r++)this._debug.addrz.arr[r]={start:this._io.pos,ioOffset:this._io.byteOffset},this.addrz.push(this._io.readU1()),this._debug.addrz.arr[r].end=this._io.pos;this._debug.addrz.end=this._io.pos},Object.defineProperty(h.prototype,"addr",{get:function(){return this._m_addr!==void 0?this._m_addr:(this.valid&&(this._debug._m_addr={},this._m_addr=this.addrz[0]),this._m_addr)}}),Object.defineProperty(h.prototype,"addrValid",{get:function(){return this._m_addrValid!==void 0?this._m_addrValid:(this._debug._m_addrValid={},this._m_addrValid=this.addrz[0]==~this.addrz[1]&&this.addrz[0]==this.addrz[2]&&this.addrz[1]==this.addrz[3],this._m_addrValid)}}),Object.defineProperty(h.prototype,"valid",{get:function(){return this._m_valid!==void 0?this._m_valid:(this._debug._m_valid={},this._m_valid=this.valueValid&&this.addrValid,this._m_valid)}}),Object.defineProperty(h.prototype,"value",{get:function(){return this._m_value!==void 0?this._m_value:(this.valid&&(this._debug._m_value={},this._m_value=this.valuez[0]),this._m_value)}}),Object.defineProperty(h.prototype,"valueValid",{get:function(){return this._m_valueValid!==void 0?this._m_valueValid:(this._debug._m_valueValid={},this._m_valueValid=this.valuez[0]==~this.valuez[1]&&this.valuez[0]==this.valuez[2],this._m_valueValid)}}),h})();return i})();return Object.defineProperty(s.prototype,"blockSize",{get:function(){return this._m_blockSize!==void 0?this._m_blockSize:(this._debug._m_blockSize={},this._m_blockSize=16,this._m_blockSize)}}),Object.defineProperty(s.prototype,"blocks",{get:function(){if(this._m_blocks!==void 0)return this._m_blocks;var i=this.dataFiller._io,n=i.pos;for(i.seek(0),this._debug._m_blocks={start:i.pos,ioOffset:i.byteOffset},this._debug._m_blocks.arr=[],this._m_blocks=[];!i.isEof();)this._debug._m_blocks.arr[this._m_blocks.length]={start:i.pos,ioOffset:i.byteOffset},this._m_blocks.push(i.readBytes(this.blockSize)),this._debug._m_blocks.arr[this._m_blocks.length-1].end=i.pos;return this._debug._m_blocks.end=i.pos,i.seek(n),this._m_blocks}}),Object.defineProperty(s.prototype,"data",{get:function(){return this._m_data!==void 0?this._m_data:(this._debug._m_data={},this._m_data=this.dataFiller.data,this._m_data)}}),Object.defineProperty(s.prototype,"values",{get:function(){if(this._m_values!==void 0)return this._m_values;var i=this.dataFiller._io,n=i.pos;return i.seek(0),this._debug._m_values={start:i.pos,ioOffset:i.byteOffset},this._m_values=new _(i,this,this._root),this._debug._m_values.end=i.pos,i.seek(n),this._m_values}}),s})(),O=b.Trailer=(function(){function s(_,i,n){this._io=_,this._parent=i,this._root=n,this._debug={},this._read()}s.prototype._read=function(){this._debug.keyA={start:this._io.pos,ioOffset:this._io.byteOffset},this.keyA=new y(this._io,this,this._root),this._debug.keyA.end=this._io.pos,this._debug.accessBits={start:this._io.pos,ioOffset:this._io.byteOffset},this._raw_accessBits=this._io.readBytes(3);var _=new f(this._raw_accessBits);this.accessBits=new d(_,this,this._root),this._debug.accessBits.end=this._io.pos,this._debug.userByte={start:this._io.pos,ioOffset:this._io.byteOffset},this.userByte=this._io.readU1(),this._debug.userByte.end=this._io.pos,this._debug.keyB={start:this._io.pos,ioOffset:this._io.byteOffset},this.keyB=new y(this._io,this,this._root),this._debug.keyB.end=this._io.pos};var d=s.AccessConditions=(function(){function _(t,e,a){this._io=t,this._parent=e,this._root=a,this._debug={},this._read()}_.prototype._read=function(){this._debug.rawChunks={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug.rawChunks.arr=[],this.rawChunks=[];for(var t=0;t<this._parent.acCountOfChunks;t++)this._debug.rawChunks.arr[t]={start:this._io.pos,ioOffset:this._io.byteOffset},this.rawChunks.push(this._io.readBitsIntBe(4)),this._debug.rawChunks.arr[t].end=this._io.pos;this._debug.rawChunks.end=this._io.pos};var i=_.Ac=(function(){function t(a,o,u,m){this._io=a,this._parent=o,this._root=u,this.index=m,this._debug={},this._read()}t.prototype._read=function(){};var e=t.AcBit=(function(){function a(o,u,m,w,B){this._io=o,this._parent=u,this._root=m,this.i=w,this.chunk=B,this._debug={},this._read()}return a.prototype._read=function(){},Object.defineProperty(a.prototype,"b",{get:function(){return this._m_b!==void 0?this._m_b:(this._debug._m_b={},this._m_b=this.n==1,this._m_b)}}),Object.defineProperty(a.prototype,"n",{get:function(){return this._m_n!==void 0?this._m_n:(this._debug._m_n={},this._m_n=this.chunk>>>this.i&1,this._m_n)}}),a})();return Object.defineProperty(t.prototype,"bits",{get:function(){if(this._m_bits!==void 0)return this._m_bits;var a=this._io.pos;this._io.seek(0),this._debug._m_bits={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug._m_bits.arr=[],this._m_bits=[];for(var o=0;o<this._parent._parent.acBits;o++)this._debug._m_bits.arr[o]={start:this._io.pos,ioOffset:this._io.byteOffset},this._m_bits.push(new e(this._io,this,this._root,this.index,this._parent.chunks[o].chunk)),this._debug._m_bits.arr[o].end=this._io.pos;return this._debug._m_bits.end=this._io.pos,this._io.seek(a),this._m_bits}}),Object.defineProperty(t.prototype,"invShiftVal",{get:function(){return this._m_invShiftVal!==void 0?this._m_invShiftVal:(this._debug._m_invShiftVal={},this._m_invShiftVal=this.bits[0].n<<2|this.bits[1].n<<1|this.bits[2].n,this._m_invShiftVal)}}),Object.defineProperty(t.prototype,"val",{get:function(){return this._m_val!==void 0?this._m_val:(this._debug._m_val={},this._m_val=this.bits[2].n<<2|this.bits[1].n<<1|this.bits[0].n,this._m_val)}}),t})(),n=_.ChunkBitRemap=(function(){function t(e,a,o,u){this._io=e,this._parent=a,this._root=o,this.bitNo=u,this._debug={},this._read()}return t.prototype._read=function(){},Object.defineProperty(t.prototype,"chunkNo",{get:function(){return this._m_chunkNo!==void 0?this._m_chunkNo:(this._debug._m_chunkNo={},this._m_chunkNo=f.mod(this.invChunkNo+this.shiftValue+this._parent._parent.acCountOfChunks,this._parent._parent.acCountOfChunks),this._m_chunkNo)}}),Object.defineProperty(t.prototype,"invChunkNo",{get:function(){return this._m_invChunkNo!==void 0?this._m_invChunkNo:(this._debug._m_invChunkNo={},this._m_invChunkNo=this.bitNo+this.shiftValue,this._m_invChunkNo)}}),Object.defineProperty(t.prototype,"shiftValue",{get:function(){return this._m_shiftValue!==void 0?this._m_shiftValue:(this._debug._m_shiftValue={},this._m_shiftValue=this.bitNo==1?-1:1,this._m_shiftValue)}}),t})(),h=_.DataAc=(function(){function t(e,a,o,u){this._io=e,this._parent=a,this._root=o,this.ac=u,this._debug={},this._read()}return t.prototype._read=function(){},Object.defineProperty(t.prototype,"decrementAvailable",{get:function(){return this._m_decrementAvailable!==void 0?this._m_decrementAvailable:(this._debug._m_decrementAvailable={},this._m_decrementAvailable=(this.ac.bits[1].b||!this.ac.bits[0].b)&&!this.ac.bits[2].b,this._m_decrementAvailable)}}),Object.defineProperty(t.prototype,"incrementAvailable",{get:function(){return this._m_incrementAvailable!==void 0?this._m_incrementAvailable:(this._debug._m_incrementAvailable={},this._m_incrementAvailable=!this.ac.bits[0].b&&!this.readKeyARequired&&!this.readKeyBRequired||!this.ac.bits[0].b&&this.readKeyARequired&&this.readKeyBRequired,this._m_incrementAvailable)}}),Object.defineProperty(t.prototype,"readKeyARequired",{get:function(){return this._m_readKeyARequired!==void 0?this._m_readKeyARequired:(this._debug._m_readKeyARequired={},this._m_readKeyARequired=this.ac.val<=4,this._m_readKeyARequired)}}),Object.defineProperty(t.prototype,"readKeyBRequired",{get:function(){return this._m_readKeyBRequired!==void 0?this._m_readKeyBRequired:(this._debug._m_readKeyBRequired={},this._m_readKeyBRequired=this.ac.val<=6,this._m_readKeyBRequired)}}),Object.defineProperty(t.prototype,"writeKeyARequired",{get:function(){return this._m_writeKeyARequired!==void 0?this._m_writeKeyARequired:(this._debug._m_writeKeyARequired={},this._m_writeKeyARequired=this.ac.val==0,this._m_writeKeyARequired)}}),Object.defineProperty(t.prototype,"writeKeyBRequired",{get:function(){return this._m_writeKeyBRequired!==void 0?this._m_writeKeyBRequired:(this._debug._m_writeKeyBRequired={},this._m_writeKeyBRequired=(!this.readKeyARequired||this.readKeyBRequired)&&!this.ac.bits[0].b,this._m_writeKeyBRequired)}}),t})(),r=_.TrailerAc=(function(){function t(e,a,o,u){this._io=e,this._parent=a,this._root=o,this.ac=u,this._debug={},this._read()}return t.prototype._read=function(){},Object.defineProperty(t.prototype,"canReadKeyB",{get:function(){return this._m_canReadKeyB!==void 0?this._m_canReadKeyB:(this._debug._m_canReadKeyB={},this._m_canReadKeyB=this.ac.invShiftVal<=2,this._m_canReadKeyB)}}),Object.defineProperty(t.prototype,"canWriteAccessBits",{get:function(){return this._m_canWriteAccessBits!==void 0?this._m_canWriteAccessBits:(this._debug._m_canWriteAccessBits={},this._m_canWriteAccessBits=this.ac.bits[2].b,this._m_canWriteAccessBits)}}),Object.defineProperty(t.prototype,"canWriteKeys",{get:function(){return this._m_canWriteKeys!==void 0?this._m_canWriteKeys:(this._debug._m_canWriteKeys={},this._m_canWriteKeys=f.mod(this.ac.invShiftVal+1,3)!=0&&this.ac.invShiftVal<6,this._m_canWriteKeys)}}),Object.defineProperty(t.prototype,"keyBControlsWrite",{get:function(){return this._m_keyBControlsWrite!==void 0?this._m_keyBControlsWrite:(this._debug._m_keyBControlsWrite={},this._m_keyBControlsWrite=!this.canReadKeyB,this._m_keyBControlsWrite)}}),t})(),l=_.ValidChunk=(function(){function t(e,a,o,u,m){this._io=e,this._parent=a,this._root=o,this.invChunk=u,this.chunk=m,this._debug={},this._read()}return t.prototype._read=function(){},Object.defineProperty(t.prototype,"valid",{get:function(){return this._m_valid!==void 0?this._m_valid:(this._debug._m_valid={},this._m_valid=(this.invChunk^this.chunk)==15,this._m_valid)}}),t})();return Object.defineProperty(_.prototype,"acsRaw",{get:function(){if(this._m_acsRaw!==void 0)return this._m_acsRaw;var t=this._io.pos;this._io.seek(0),this._debug._m_acsRaw={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug._m_acsRaw.arr=[],this._m_acsRaw=[];for(var e=0;e<this._parent.acsInSector;e++)this._debug._m_acsRaw.arr[e]={start:this._io.pos,ioOffset:this._io.byteOffset},this._m_acsRaw.push(new i(this._io,this,this._root,e)),this._debug._m_acsRaw.arr[e].end=this._io.pos;return this._debug._m_acsRaw.end=this._io.pos,this._io.seek(t),this._m_acsRaw}}),Object.defineProperty(_.prototype,"chunks",{get:function(){if(this._m_chunks!==void 0)return this._m_chunks;var t=this._io.pos;this._io.seek(0),this._debug._m_chunks={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug._m_chunks.arr=[],this._m_chunks=[];for(var e=0;e<this._parent.acBits;e++)this._debug._m_chunks.arr[e]={start:this._io.pos,ioOffset:this._io.byteOffset},this._m_chunks.push(new l(this._io,this,this._root,this.rawChunks[this.remaps[e].invChunkNo],this.rawChunks[this.remaps[e].chunkNo])),this._debug._m_chunks.arr[e].end=this._io.pos;return this._debug._m_chunks.end=this._io.pos,this._io.seek(t),this._m_chunks}}),Object.defineProperty(_.prototype,"dataAcs",{get:function(){if(this._m_dataAcs!==void 0)return this._m_dataAcs;var t=this._io.pos;this._io.seek(0),this._debug._m_dataAcs={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug._m_dataAcs.arr=[],this._m_dataAcs=[];for(var e=0;e<this._parent.acsInSector-1;e++)this._debug._m_dataAcs.arr[e]={start:this._io.pos,ioOffset:this._io.byteOffset},this._m_dataAcs.push(new h(this._io,this,this._root,this.acsRaw[e])),this._debug._m_dataAcs.arr[e].end=this._io.pos;return this._debug._m_dataAcs.end=this._io.pos,this._io.seek(t),this._m_dataAcs}}),Object.defineProperty(_.prototype,"remaps",{get:function(){if(this._m_remaps!==void 0)return this._m_remaps;var t=this._io.pos;this._io.seek(0),this._debug._m_remaps={start:this._io.pos,ioOffset:this._io.byteOffset},this._debug._m_remaps.arr=[],this._m_remaps=[];for(var e=0;e<this._parent.acBits;e++)this._debug._m_remaps.arr[e]={start:this._io.pos,ioOffset:this._io.byteOffset},this._m_remaps.push(new n(this._io,this,this._root,e)),this._debug._m_remaps.arr[e].end=this._io.pos;return this._debug._m_remaps.end=this._io.pos,this._io.seek(t),this._m_remaps}}),Object.defineProperty(_.prototype,"trailerAc",{get:function(){if(this._m_trailerAc!==void 0)return this._m_trailerAc;var t=this._io.pos;return this._io.seek(0),this._debug._m_trailerAc={start:this._io.pos,ioOffset:this._io.byteOffset},this._m_trailerAc=new r(this._io,this,this._root,this.acsRaw[this._parent.acsInSector-1]),this._debug._m_trailerAc.end=this._io.pos,this._io.seek(t),this._m_trailerAc}}),_})();return Object.defineProperty(s.prototype,"acBits",{get:function(){return this._m_acBits!==void 0?this._m_acBits:(this._debug._m_acBits={},this._m_acBits=3,this._m_acBits)}}),Object.defineProperty(s.prototype,"acCountOfChunks",{get:function(){return this._m_acCountOfChunks!==void 0?this._m_acCountOfChunks:(this._debug._m_acCountOfChunks={},this._m_acCountOfChunks=this.acBits*2,this._m_acCountOfChunks)}}),Object.defineProperty(s.prototype,"acsInSector",{get:function(){return this._m_acsInSector!==void 0?this._m_acsInSector:(this._debug._m_acsInSector={},this._m_acsInSector=4,this._m_acsInSector)}}),s})();return b})();c.MifareClassic=v})}});const K=q(),V={id:"mifare_classic",title:"Mifare Classic RFID tag dump",ksy:{meta:{id:"mifare_classic",title:"Mifare Classic RFID tag dump","file-extension":"mfd",xref:{wikidata:["Q29000512","Q29000513"]},license:"BSD-2-Clause","ks-version":.9,endian:"le"},"doc-ref":`https://github.com/nfc-tools/libnfc
https://www.nxp.com/docs/en/data-sheet/MF1S70YYX_V1.pdf
`,doc:`You can get a dump for testing from this link:
<https://github.com/zhovner/mfdread/raw/master/dump.mfd>
`,seq:[{id:"sectors",size:"((_index >= 32)?4:1)*4*16",type:"sector(_index == 0)",repeat:"eos"}],types:{key:{seq:[{id:"key",size:6}]},sector:{params:[{id:"has_manufacturer",type:"bool"}],seq:[{id:"manufacturer",type:"manufacturer",if:"has_manufacturer"},{id:"data_filler","-orig-id":"abtData",size:"_io.size - _io.pos - 16",type:"filler"},{id:"trailer",type:"trailer"}],instances:{block_size:{value:16},data:{value:"data_filler.data"},blocks:{pos:0,io:"data_filler._io",size:"block_size",repeat:"eos"},values:{pos:0,io:"data_filler._io",type:"values"}},types:{values:{seq:[{id:"values",type:"value_block",repeat:"eos"}],types:{value_block:{seq:[{id:"valuez",type:"u4",repeat:"expr","repeat-expr":3},{id:"addrz",type:"u1",repeat:"expr","repeat-expr":4}],instances:{value_valid:{value:"valuez[0]==~valuez[1] and valuez[0]==valuez[2]"},addr_valid:{value:"addrz[0]==~addrz[1] and addrz[0]==addrz[2] and addrz[1]==addrz[3]"},valid:{value:"value_valid and addr_valid"},addr:{value:"addrz[0]",if:"valid"},value:{value:"valuez[0]",if:"valid"}}}}},filler:{doc:"only to create _io",seq:[{id:"data",size:"_io.size"}]}}},manufacturer:{seq:[{id:"nuid","-orig-id":"abtUID",type:"u4",doc:"beware for 7bytes UID it goes over next fields"},{id:"bcc","-orig-id":"btBCC",type:"u1"},{id:"sak","-orig-id":"btSAK",type:"u1"},{id:"atqa","-orig-id":"abtATQA",type:"u2"},{id:"manufacturer","-orig-id":"abtManufacturer",size:8,doc:"may contain manufacture date as BCD"}]},trailer:{seq:[{id:"key_a","-orig-id":"abtKeyA",type:"key"},{id:"access_bits","-orig-id":"abtAccessBits",size:3,type:"access_conditions"},{id:"user_byte","-orig-id":"abtAccessBits",type:"u1"},{id:"key_b","-orig-id":"abtKeyB",type:"key"}],instances:{ac_bits:{value:3},acs_in_sector:{value:4},ac_count_of_chunks:{value:"ac_bits*2"}},types:{access_conditions:{seq:[{id:"raw_chunks",type:"b4",repeat:"expr","repeat-expr":"_parent.ac_count_of_chunks"}],instances:{remaps:{pos:0,repeat:"expr","repeat-expr":"_parent.ac_bits",type:"chunk_bit_remap(_index)"},chunks:{pos:0,type:"valid_chunk(raw_chunks[remaps[_index].inv_chunk_no], raw_chunks[remaps[_index].chunk_no])",repeat:"expr","repeat-expr":"_parent.ac_bits"},acs_raw:{pos:0,type:"ac(_index)",repeat:"expr","repeat-expr":"_parent.acs_in_sector"},data_acs:{pos:0,type:"data_ac(acs_raw[_index])",repeat:"expr","repeat-expr":"_parent.acs_in_sector-1"},trailer_ac:{pos:0,type:"trailer_ac(acs_raw[_parent.acs_in_sector-1])"}},types:{chunk_bit_remap:{params:[{id:"bit_no",type:"u1"}],instances:{shift_value:{value:"(bit_no==1?-1:1)"},chunk_no:{value:"((inv_chunk_no+shift_value+_parent._parent.ac_count_of_chunks)%_parent._parent.ac_count_of_chunks)"},inv_chunk_no:{value:"bit_no+shift_value"}}},valid_chunk:{params:[{id:"inv_chunk",type:"u1"},{id:"chunk",type:"u1",doc:"c3 c2 c1 c0"}],instances:{valid:{value:"inv_chunk ^ chunk == 0b1111"}}},ac:{params:[{id:"index",type:"u1"}],instances:{bits:{pos:0,repeat:"expr","repeat-expr":"_parent._parent.ac_bits",type:"ac_bit(index, _parent.chunks[_index].chunk)"},val:{value:"(bits[2].n << 2) | (bits[1].n << 1) | bits[0].n",doc:"c3 c2 c1"},inv_shift_val:{value:"(bits[0].n << 2) | (bits[1].n << 1) | bits[2].n"}},types:{ac_bit:{params:[{id:"i",type:"u1"},{id:"chunk",type:"u1"}],instances:{n:{value:"(chunk >> i) & 1"},b:{value:"n == 1"}}}}},trailer_ac:{params:[{id:"ac",type:"ac"}],instances:{can_read_key_b:{value:"ac.inv_shift_val <= 0b010",doc:"key A is required"},can_write_keys:{value:"(ac.inv_shift_val+1)%3 != 0 and (ac.inv_shift_val<6)"},can_write_access_bits:{value:"ac.bits[2].b"},key_b_controls_write:{value:"not can_read_key_b"}}},data_ac:{params:[{id:"ac",type:"ac"}],instances:{read_key_a_required:{value:"ac.val <= 0b100"},read_key_b_required:{value:"ac.val <= 0b110"},write_key_a_required:{value:"ac.val == 0"},write_key_b_required:{value:"(not read_key_a_required or read_key_b_required) and not ac.bits[0].b"},increment_available:{value:"(not ac.bits[0].b and not read_key_a_required and not read_key_b_required) or (not ac.bits[0].b and read_key_a_required and read_key_b_required)"},decrement_available:{value:"(ac.bits[1].b or not ac.bits[0].b) and not ac.bits[2].b"}}}}}}}}}};export{K as default,V as spec};
